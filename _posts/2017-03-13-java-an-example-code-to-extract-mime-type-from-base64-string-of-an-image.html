---
layout: single
title: Java - an example code to extract mime type from base64 string of an image
date: 2017-03-13 05:13:00.000000000 -05:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Java
- Programming
tags: []
meta:
  _edit_last: '14827209'
  geo_public: '0'
  _publicize_job_id: '2787437244'
author:
  login: acrocontext
  email: nsclass@hotmail.com
  display_name: acrocontext
  first_name: ''
  last_name: ''
permalink: "/2017/03/13/java-an-example-code-to-extract-mime-type-from-base64-string-of-an-image/"
---
<p>[code lang="c"]</p>
<p>    private boolean isMatch(byte[] pattern, byte[] data) {<br />
        if (pattern.length &lt;= data.length) {<br />
            for (int idx = 0; idx &lt; pattern.length; ++idx) {<br />
                if (pattern[idx] != data[idx])<br />
                    return false;<br />
            }<br />
            return true;<br />
        }</p>
<p>        return false;<br />
    }</p>
<p>    private String getImageType(byte[] data) {<br />
//        filetype    magic number(hex)<br />
//        jpg         FF D8 FF<br />
//        gif         47 49 46 38<br />
//        png         89 50 4E 47 0D 0A 1A 0A<br />
//        bmp         42 4D<br />
//        tiff(LE)    49 49 2A 00<br />
//        tiff(BE)    4D 4D 00 2A</p>
<p>        final byte[] pngPattern = new byte[] { (byte)0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A};<br />
        final byte[] jpgPattern = new byte[] { (byte)0xFF, (byte)0xD8, (byte)0xFF};<br />
        final byte[] gifPattern = new byte[] { 0x47, 0x49, 0x46, 0x38};<br />
        final byte[] bmpPattern = new byte[] { 0x42, 0x4D };<br />
        final byte[] tiffLEPattern = new byte[] { 0x49, 0x49, 0x2A, 0x00};<br />
        final byte[] tiffBEPattern = new byte[] { 0x4D, 0x4D, 0x00, 0x2A};<br />
        if (isMatch(pngPattern, data))<br />
            return &quot;image/png&quot;;</p>
<p>        if (isMatch(jpgPattern, data))<br />
            return &quot;image/jpg&quot;;</p>
<p>        if (isMatch(gifPattern, data))<br />
            return &quot;image/gif&quot;;</p>
<p>        if (isMatch(bmpPattern, data))<br />
            return &quot;image/bmp&quot;;</p>
<p>        if (isMatch(tiffLEPattern, data))<br />
            return &quot;image/tif&quot;;</p>
<p>        if (isMatch(tiffBEPattern, data))<br />
            return &quot;image/tif&quot;;</p>
<p>        return &quot;image/png&quot;;<br />
    }</p>
<p>String imageDataBytes = base64String.substring(base64String.indexOf(&quot;,&quot;) + 1);<br />
                        byte[] bytes = Base64.decodeBase64(imageDataBytes);<br />
                        String imageMimeType = getImageType(bytes);</p>
<p>[/code]</p>

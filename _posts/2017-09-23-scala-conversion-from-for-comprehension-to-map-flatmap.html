---
layout: post
title: Scala - conversion from for-comprehension to map, flatMap
date: 2017-09-23 23:05:02.000000000 -05:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Programming
- Scala
tags: []
meta:
  _edit_last: '14827209'
  geo_public: '0'
  _publicize_job_id: '9584498147'
author:
  login: acrocontext
  email: nsclass@hotmail.com
  display_name: acrocontext
  first_name: ''
  last_name: ''
permalink: "/2017/09/23/scala-conversion-from-for-comprehension-to-map-flatmap/"
---
<p>[code lang="c"]</p>
<p>def getProduct(id: String): Try[Product]<br />
def getPrice(product: Product): Try[Price]<br />
def calculateProductPrice(product: Product, price: Price): Try[Price]</p>
<p>for {<br />
  product &lt;- getProduct(&quot;1234&quot;)<br />
  price &lt;- getPrice(product)<br />
  calculatedPrice &lt;- calculateProductPrice(product, price)<br />
  if (calculatedPrice &gt; 1000)<br />
} yield (product, calculatedPrice)</p>
<p>getProduct(&quot;1234&quot;).flatMap{ product =&gt;<br />
  getPrice(product).flatMap{ price =&gt;<br />
    calculateProductPrice(product, price).filter { p =&gt; p &gt; 1000 }<br />
      .map{ p =&gt; (product, p) }<br />
  }<br />
}</p>
<p>[/code]</p>

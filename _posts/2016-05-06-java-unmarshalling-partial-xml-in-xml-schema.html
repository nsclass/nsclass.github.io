---
layout: post
title: Java - unmarshalling partial XML in XML schema
date: 2016-05-06 10:50:50.000000000 -05:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Java
- Programming
tags: []
meta:
  _edit_last: '14827209'
  geo_public: '0'
  _publicize_job_id: '22522283702'
author:
  login: acrocontext
  email: nsclass@hotmail.com
  display_name: acrocontext
  first_name: ''
  last_name: ''
permalink: "/2016/05/06/java-unmarshalling-partial-xml-in-xml-schema/"
---
<p>[code lang="c"]</p>
<p>public class XmlPartialMarshaller&lt;T&gt; {<br />
    private static final Logger LOGGER = LoggerFactory.getLogger(XmlPartialMarshaller.class);<br />
    private DocumentBuilder documentBuilder;<br />
    private DocumentBuilderFactory documentBuilderFactory;<br />
    private Binder&lt;Node&gt; binderPartialXml;<br />
    private JAXBContext contextPartialXml;</p>
<p>    private Class partialSchemaClass;</p>
<p>    public XmlPartialMarshaller(Class&lt;T&gt; partialSchemaClass) {<br />
        this.partialSchemaClass = partialSchemaClass;</p>
<p>        try {<br />
            this.documentBuilderFactory = DocumentBuilderFactory.newInstance();<br />
            this.documentBuilder = documentBuilderFactory.newDocumentBuilder();</p>
<p>            this.contextPartialXml = JAXBContext.newInstance(partialSchemaClass);<br />
            this.binderPartialXml = contextPartialXml.createBinder();<br />
        } catch (Exception e) {<br />
            LOGGER.error(e.getMessage(), e);<br />
        }<br />
    }</p>
<p>    public T marshalPartialXml(String xml) {<br />
       try {<br />
            InputStream inputStream = null;<br />
            try {<br />
                inputStream = IOUtils.toInputStream(xml);<br />
                Document document = documentBuilder.parse(inputStream);<br />
                Node xmlNode = document.getDocumentElement();<br />
                JAXBElement&lt;T&gt; element = binderPartialXml.unmarshal(xmlNode,<br />
                        partialSchemaClass);</p>
<p>                return element.getValue();<br />
            } catch (Exception e) {<br />
                LOGGER.error(e.getMessage(), e);<br />
            } finally {<br />
                if (inputStream != null)<br />
                    inputStream.close();<br />
            }<br />
        } catch (Exception e) {<br />
            LOGGER.error(e.getMessage(), e);<br />
        }</p>
<p>        return null;<br />
    }<br />
}<br />
[/code]</p>

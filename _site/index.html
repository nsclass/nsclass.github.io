<!DOCTYPE html>
<html lang="en-US">

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/style.css?v=c804ba95ee658dcf04060c9b1aee98c539d0fb2f">

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>All Posts | Nam Seob Seo</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="All Posts" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/" />
<meta property="og:url" content="http://localhost:4000/" />
<meta property="og:site_name" content="Nam Seob Seo" />
<script type="application/ld+json">
{"headline":"All Posts","url":"http://localhost:4000/","@type":"WebSite","name":"Nam Seob Seo","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/nsclass/nsclass.github.io">View on GitHub</a>

          <h1 id="project_title">Nam Seob Seo</h1>
          <h2 id="project_tagline"></h2>

          
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2 id="all-posts">All Posts</h2>

<article>
    <h2>
      <a href="/2020/03/29/rust-how-async-await-works/">
        Rust - how async/await works
      </a>
    </h2>
    <time datetime="2020-03-29">29 March 2020</time>
    <p>https://os.phil-opp.com/async-await/</p>

  </article>

<article>
    <h2>
      <a href="/2020/03/27/sublime-matching-multiple-lines-with-regex/">
        Sublime - matching multiple lines with regex
      </a>
    </h2>
    <time datetime="2020-03-27">27 March 2020</time>
    <p>Start with (?s)<br />
[code lang="c"]<br />
(?s)\[sometag\](.*?)\[\/sometag\]<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2020/03/18/java-dropwizard-http-request-accessing-log-customizing-example/">
        Java - Dropwizard http request accessing log customizing example
      </a>
    </h2>
    <time datetime="2020-03-18">18 March 2020</time>
    <p>Dropwizard can allow to access the attributes in a request as shown in below example.<br />
Full layout logback format details can be found from http://logback.qos.ch/manual/layouts.html</p>
<p>[code lang="c"]<br />
server:<br />
  rootPath: /test/services/rest<br />
  requestLog:<br />
    appenders:<br />
    - type: file<br />
      currentLogFilename: ./logs/requests.log<br />
      archivedLogFilenamePattern: ./logs/requests-%d.log<br />
      archivedFileCount: 5<br />
      timeZone: UTC<br />
      logFormat: &quot;%h %l %u [%t{dd/MMM/yyyy:HH:mm:ss Z,UTC}] %reqAttribute{attributeName} \&quot;%r\&quot; %s %b \&quot;%i{Referer}\&quot; \&quot;%i{User-Agent}\&quot; %D&quot;</p>
<p>[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2020/02/02/linux-top-10-performance-commands/">
        Linux - Top 10 Performance commands
      </a>
    </h2>
    <time datetime="2020-02-02">02 February 2020</time>
    <p>	1. uptime<br />
	2. dmesg | tail<br />
	3. vmstat 1<br />
	4. mpstat -P ALL 1<br />
	5. pipstat 1<br />
	6. iostat -xz 1<br />
	7. free -m<br />
	8. sar -n DEV 1<br />
	9. sar -n TCP, ETCP 1<br />
        10. top</p>

  </article>

<article>
    <h2>
      <a href="/2020/02/01/bpf-learn-ebpf-tracing-for-linux-application-performance/">
        eBPF - Learn eBPF Tracing for Linux application performance
      </a>
    </h2>
    <time datetime="2020-02-01">01 February 2020</time>
    <p>extended Berkeley Packet Filter<br />
Linux application performance tracing tool</p>
<p>http://www.brendangregg.com/blog/2019-01-01/learn-ebpf-tracing.html</p>

  </article>

<article>
    <h2>
      <a href="/2020/01/26/kubernetes-container-networks/">
        Kubernetes - Container networks
      </a>
    </h2>
    <time datetime="2020-01-26">26 January 2020</time>
    <p>https://www.youtube.com/watch?v=6v_BDHIgOY8<br />
https://github.com/kristenjacobs/container-networking</p>

  </article>

<article>
    <h2>
      <a href="/2019/12/24/springboot-webflux-reading-a-request-body-with-spring-webflux-for-controller/">
        SpringBoot WebFlux - Reading a request body with Spring WebFlux for Controller
      </a>
    </h2>
    <time datetime="2019-12-24">24 December 2019</time>
    <p>SpringBoot WebFlux 2.2.x requires to load the request body by using an input stream.<br />
Below example will show how it can convert the json data into the expected class after loading json data with an input stream.</p>
<p>Full source code can be found from https://github.com/nsclass/ns-svg-converter/blob/master/ns-main-service/src/main/java/com/acrocontext/reactive/rest/SvgConverterController.java</p>
<p>Github: https://github.com/nsclass/ns-svg-converter<br />
[code lang="java"]<br />
    private &lt;T&gt; T toRequestBody(InputStream inputStream, Class&lt;T&gt; classValue) {<br />
        try {<br />
            return objectMapper.readValue(inputStream, classValue);<br />
        } catch(Exception e){<br />
            throw new RuntimeException(e);<br />
        }<br />
    }</p>
<p>    public static class InputStreamCollector {<br />
        private InputStream inputStream;</p>
<p>        public void collectInputStream(InputStream inputStream) {<br />
            if (this.inputStream == null) {<br />
                this.inputStream = inputStream;<br />
            }</p>
<p>            this.inputStream = new SequenceInputStream(this.inputStream, inputStream);<br />
        }</p>
<p>        public InputStream getInputStream() {<br />
            return this.inputStream;<br />
        }<br />
    }</p>
<p>[/code]</p>
<p>REST Controller<br />
[code lang="c"]<br />
    @PutMapping(path = &quot;/conversion&quot;,<br />
            consumes = MediaType.APPLICATION_JSON_VALUE,<br />
            produces = MediaType.APPLICATION_JSON_VALUE)<br />
    public Mono&lt;SvgConvertRespondView&gt; convertImage(ServerWebExchange exchange) {<br />
        return exchange.getRequest().getBody()<br />
                .collect(InputStreamCollector::new, (inputStreamCollector, dataBuffer)-&gt;<br />
                        inputStreamCollector.collectInputStream(dataBuffer.asInputStream()))<br />
                .map(InputStreamCollector::getInputStream)<br />
                .map(inputStream -&gt; toRequestBody(inputStream, SvgConvertRequestView.class))<br />
                .map(this::convertRespondView);<br />
    }<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2019/12/19/react-create-react-app-proxy-setting/">
        React - create-react-app proxy setting
      </a>
    </h2>
    <time datetime="2019-12-19">19 December 2019</time>
    <p>create-react-app allow to configure the proxy setting on calling API.<br />
documentation:<br />
https://create-react-app.dev/docs/proxying-api-requests-in-development/</p>
<p>Example<br />
https://github.com/nsclass/ns-svg-converter/blob/master/ns-svg-converter-react/src/setupProxy.js</p>

  </article>

<article>
    <h2>
      <a href="/2019/11/27/electron-using-reach-router-for-electron-app/">
        Electron - Using reach router for Electron app
      </a>
    </h2>
    <time datetime="2019-11-27">27 November 2019</time>
    <p>Creating a history with a memorySource will allow to work for Electron application with reach/router</p>
<p>[code lang="js"]<br />
import { Router, createMemorySource, createHistory, LocationProvider } from &quot;@reach/router&quot;</p>
<p>let source = createMemorySource(&quot;/&quot;)<br />
let history = createHistory(source)</p>
<p>const App = () =&gt; {<br />
   return (<br />
      &lt;LocationProvider history={history}&gt;<br />
           &lt;Router&gt;<br />
           ....<br />
           &lt;/Router&gt;<br />
      &lt;/LocationProvider&gt;</p>
<p>   )<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2019/11/11/electron-rederer-process-can-use-node-feature/">
        Electron - Rederer process can use Node feature
      </a>
    </h2>
    <time datetime="2019-11-11">11 November 2019</time>
    <p>Setting nodeIntegration true in webPreferences section in main.js will allow to use Node feature in renderer process such as require. And setting webSecurity false will disable CORS in a renderer process.<br />
[code lang="js"]<br />
  mainWindow = new BrowserWindow({<br />
    width: 1024,<br />
    height: 600,<br />
    webPreferences: {<br />
      nodeIntegration: true,<br />
      webSecurity: false<br />
    }<br />
  });<br />
[/code]</p>
<p>If a renderer process needs to access the self signed web API, the following code will allow to access it.<br />
[code lang="js"]<br />
app.on(<br />
  &quot;certificate-error&quot;,<br />
  (event, webContents, url, error, certificate, callback) =&gt; {<br />
    // On certificate error we disable default behaviour (stop loading the page)<br />
    // and we then say &quot;it is all fine - true&quot; to the callback<br />
    event.preventDefault();<br />
    callback(true);<br />
  }<br />
);<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2019/11/09/electron-creating-an-electron-app-with-react-typescript-and-emotion-css/">
        Electron - creating an electron app with react, typescript and emotion CSS
      </a>
    </h2>
    <time datetime="2019-11-09">09 November 2019</time>
    <p>Please find the following github for details steps and example.</p>
<p>https://github.com/nsclass/ns-electron-app</p>

  </article>

<article>
    <h2>
      <a href="/2019/11/08/vscode-improving-productivity-with-vs-code/">
        VSCode - Improving productivity with VS code
      </a>
    </h2>
    <time datetime="2019-11-08">08 November 2019</time>
    <p>https://burkeholland.gitbook.io/vs-code-can-do-that/</p>

  </article>

<article>
    <h2>
      <a href="/2019/10/12/javascript-find-all-available-functions-in-properties-in-an-object/">
        JavaScript - find all available functions and properties in an object
      </a>
    </h2>
    <time datetime="2019-10-12">12 October 2019</time>
    <p>The following three functions are very useful on inspecting methods and properties in any Javascrip object.<br />
Github code: https://github.com/nsclass/describe-javascript-object-methods/blob/master/list-object-methods.js</p>
<p>[code lang="c"]<br />
const getArgs = func =&gt; {<br />
  // First match everything inside the function argument parens.<br />
  let matchedItems = func.toString().match(/function\s.*?\(([^)]*)\)/)<br />
  if (matchedItems &amp;&amp; matchedItems.length &gt; 0) {<br />
    let args = matchedItems[1].trim()<br />
    if (args.length &gt; 0) {</p>
<p>      // Split the arguments string into an array comma delimited.<br />
      return args.split(',').map( arg =&gt; {<br />
        // Ensure no inline comments are parsed and trim the whitespace.<br />
        return arg.replace(/\/\*.*\*\//, '').trim()<br />
      })<br />
    }<br />
  }</p>
<p>  return &quot;no args&quot;<br />
}</p>
<p>const getMethods = (obj) =&gt; {<br />
  return Object.entries(obj)<br />
  .filter(([key, value]) =&gt; typeof obj[key] === 'function')<br />
  .map(([key, value]) =&gt; `${key}: ${getArgs(value)}`)<br />
  .sort((x, y) =&gt; {<br />
    let strX = x.toString()<br />
    let strY = y.toString()<br />
    return strX.localeCompare(strY)<br />
  })<br />
}</p>
<p>const getProperties = obj =&gt; {<br />
  return Object.getOwnPropertyNames(obj)<br />
  .filter(item =&gt; typeof obj[item] !== 'function')<br />
}</p>
<p>[/code]</p>
<p>For instance, we can list all available functions and each function's arguemnts in fs node module.<br />
[code lang="c"]<br />
const fs = require('fs)</p>
<p>getMethods(fs)</p>
<p>[/code]</p>
<p>Results<br />
[code lang="c"]<br />
[ '_debugEnd: no args',<br />
  '_debugProcess: no args',<br />
  '_fatalException: no args',<br />
  '_getActiveHandles: no args',<br />
  '_getActiveRequests: no args',<br />
  '_kill: no args',<br />
  '_linkedBinding: module',<br />
  '_rawDebug: no args',<br />
  '_startProfilerIdleNotifier: no args',<br />
  '_stopProfilerIdleNotifier: no args',<br />
  '_tickCallback: no args',<br />
  'abort: no args',<br />
  'activateUvLoop: no args',<br />
  'assert: ...args',<br />
  'atomBinding: name',<br />
  'binding: module',<br />
  'chdir: ...args',<br />
  'cpuUsage: prevValue',<br />
  'crash: no args',<br />
  'cwd: no args',<br />
  'dlopen: no args',<br />
  'emitWarning: no args',<br />
  'exit: no args',<br />
  'getCPUUsage: no args',<br />
  'getCreationTime: no args',<br />
  'getegid: no args',<br />
  'geteuid: no args',<br />
  'getgid: no args',<br />
  'getgroups: no args',<br />
  'getHeapStatistics: no args',<br />
  'getIOCounters: no args',<br />
  'getRenderProcessPreferences: no args',<br />
  'getSystemMemoryInfo: no args',<br />
  'getuid: no args',<br />
  'hang: no args',<br />
  'hasUncaughtExceptionCaptureCallback: no args',<br />
  'hrtime: time',<br />
  'initgroups: ...args',<br />
  'kill: no args',<br />
  'log: no args',<br />
  'memoryUsage: no args',<br />
  'NativeModule: id',<br />
  'nextTick: no args',<br />
  'openStdin: no args',<br />
  'reallyExit: no args',<br />
  'setegid: ...args',<br />
  'seteuid: ...args',<br />
  'setFdLimit: no args',<br />
  'setgid: ...args',<br />
  'setgroups: ...args',<br />
  'setuid: ...args',<br />
  'setUncaughtExceptionCaptureCallback: no args',<br />
  'takeHeapSnapshot: no args',<br />
  'umask: ...args',<br />
  'uptime: no args' ]<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2019/10/06/javascript-promise-all-getting-response/">
        JavaScript - Promise.all getting response
      </a>
    </h2>
    <time datetime="2019-10-06">06 October 2019</time>
    <p>Promise.all guarantee the order of response in input promises so that caller can retrieve the result with array index number.</p>
<p>[code lang="c"]<br />
var allDone = Promise.all([<br />
    promise1,<br />
    promise2<br />
])<br />
.then(res =&gt; {<br />
    res[0]; // promise1 result<br />
    res[1]; // promise2 result<br />
});<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2019/10/04/unix-sharp-bang-to-specify-a-command-by-using-a-env/">
        Unix - Sharp bang to specify a command by using a env
      </a>
    </h2>
    <time datetime="2019-10-04">04 October 2019</time>
    <p>Each script file can use a env command to specify the location of command.<br />
Below example will show how a shell can find a python3 command location with a env command.<br />
[code lang="c"]<br />
#!/usr/bin/env python3<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2019/09/30/parcel-proxy-setting/">
        Parcel - Proxy setting
      </a>
    </h2>
    <time datetime="2019-09-30">30 September 2019</time>
    <p>In 'package.json', you can defined the proxy table.<br />
[code lang="c"]<br />
{<br />
  &quot;proxy&quot;: {<br />
    &quot;/api&quot;: {<br />
      &quot;target&quot;: &quot;http://localhost:8000&quot;<br />
    },<br />
    &quot;/authorization/login&quot;: {<br />
      &quot;target&quot;: &quot;https://example.com/login&quot;,<br />
      &quot;secure&quot;: true<br />
    }<br />
  }<br />
}<br />
[/code]</p>
<p>https://github.com/parcel-bundler/parcel/pull/3281</p>

  </article>

<article>
    <h2>
      <a href="/2019/09/02/css-design-for-developers/">
        CSS - Design for developers
      </a>
    </h2>
    <time datetime="2019-09-02">02 September 2019</time>
    <p>https://github.com/sdras/design-for-developers</p>

  </article>

<article>
    <h2>
      <a href="/2019/09/01/css-examples/">
        CSS - Grid examples
      </a>
    </h2>
    <time datetime="2019-09-01">01 September 2019</time>
    <p>https://gridbyexample.com/</p>
<p>https://labs.jensimmons.com/</p>
<p>https://cssgridgarden.com/</p>
<p>https://codepen.io/</p>

  </article>

<article>
    <h2>
      <a href="/2019/08/18/css-css-flex-and-grid/">
        CSS - CSS Flex and Grid
      </a>
    </h2>
    <time datetime="2019-08-18">18 August 2019</time>
    <p>CSS Flex and Grid examples.<br />
https://github.com/jen4web/fluent2018</p>
<p>CSS definition guide.<br />
https://estelle.github.io/</p>

  </article>

<article>
    <h2>
      <a href="/2019/08/05/highly-scalable-available-distributed-system-whiling-maintaining-integrity/">
        Highly scalable/available distributed system whiling maintaining integrity
      </a>
    </h2>
    <time datetime="2019-08-05">05 August 2019</time>
    <p>I think that ACID is a main mechanism to maintain the application consistency but it's hard to make it highly scalable and available system because of synchronous property of ACID. But if we can relax the timeliness property in consistency, I think that it is possible highly scalable/available system by using a log based message system such as Kafka.<br />
The main reason is that log based messaging system can guarantee the serializability of events, we can maintain the integrity of application by processing the fault tolerant events eventually.</p>
<p>The another possible option is to use the optimistic locking mechanism. FoundataionDB is a good example.</p>

  </article>

<article>
    <h2>
      <a href="/2019/07/13/java-spring-unit-test-with-custom-provided-configuration/">
        Java - Spring unit test with custom provided configuration.
      </a>
    </h2>
    <time datetime="2019-07-13">13 July 2019</time>
    <p>The following example will show how to define the custom Spring configuration for unit test with @ContextConfiguration annotation.<br />
Full example can be found the below github.</p>
<p>https://github.com/nsclass/java-timezone/blob/master/src/test/java/com/ns/timezone/javatimezone/JavaTimezoneServiceApplicationTests.java</p>
<p>[code lang="c"]<br />
@RunWith(SpringRunner.class)<br />
@SpringBootTest<br />
@ContextConfiguration(classes = JavaTimezoneServiceApplicationTests.AppConfig.class)<br />
public class JavaTimezoneServiceApplicationTests<br />
{<br />
	@Configuration<br />
	static class AppConfig<br />
	{<br />
		@Bean<br />
		TimezoneService timezoneService() {<br />
			return new TimezoneService();<br />
		}<br />
	}</p>
<p>	@Autowired<br />
	private TimezoneService timezoneService;</p>
<p>	@Test<br />
	public void verifyGetAllTimezoneDisplay() {<br />
		Flux&lt;TimezoneService.TimezoneDisplayInfo&gt; timezones = timezoneService.getAllTimezoneDisplay();<br />
		int count = timezones.collectList().block().size();<br />
		Assert.assertEquals(627, count);<br />
	}</p>
<p>}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2019/06/22/jvm-profiling-and-gc-analysis-tool/">
        JVM - Profiling and GC analysis tool
      </a>
    </h2>
    <time datetime="2019-06-22">22 June 2019</time>
    <p>The easiest GC log analysis web site.<br />
https://gceasy.io/</p>
<p>Profiling<br />
Adding a JVM Option +XX:+PreserveFramePointer</p>
<p>https://github.com/jvm-profiling-tools/perf-map-agent<br />
https://github.com/brendangregg/FlameGraph</p>
<p>$ perf-java-flames [pid]</p>
<p>https://github.com/Netflix/flamescope</p>

  </article>

<article>
    <h2>
      <a href="/2019/06/16/simple-way-to-generate-ssh-pub-private-key/">
        Simple way to generate ssh pub/private key
      </a>
    </h2>
    <time datetime="2019-06-16">16 June 2019</time>
    <p>Very simple way to generate ssh pub/private key in Linux.</p>
<p>[code lang="c"]</p>
<p>$ ssh-keygen -t rsa -P &quot;&quot;</p>
<p>[/code]</p>
<p>Copy the content of .ssh/id_rsa.pub to .ssh/authorized_keys</p>

  </article>

<article>
    <h2>
      <a href="/2019/06/15/spark-cassandra-connector-example/">
        Spark - Cassandra connector example
      </a>
    </h2>
    <time datetime="2019-06-15">15 June 2019</time>
    <p>Github<br />
https://github.com/nsclass/spark-cassandra-example</p>
<p>[code lang="c"]<br />
object SparkCassandra {<br />
  def main(args: Array[String]): Unit = {<br />
    val spark = SparkSession.builder()<br />
      .appName(&quot;SparkCassandra&quot;)<br />
      .master(&quot;local&quot;)<br />
      .config(&quot;spark.cassandra.connection.host&quot;, &quot;127.0.0.1&quot;)<br />
      .getOrCreate()</p>
<p>    // Read data as RDD<br />
    val rdd = spark.sparkContext.cassandraTable(keyspace = &quot;system&quot;, table = &quot;local&quot;)<br />
      .select(&quot;key&quot;, &quot;cluster_name&quot;, &quot;cql_version&quot;)</p>
<p>    println(&quot;Data read as RDD&quot;)<br />
    rdd.collect()<br />
      .foreach(row =&gt; {<br />
        println(row.getString(&quot;key&quot;))<br />
        println(row.getString(&quot;cluster_name&quot;))<br />
        println(row.getString(&quot;cql_version&quot;))<br />
      })</p>
<p>    // Read data as DataSet (DataFrame)<br />
    val dataset = spark.read<br />
      .cassandraFormat(keyspace = &quot;system&quot;, table = &quot;local&quot;)<br />
      .load()</p>
<p>    dataset.collect()<br />
      .foreach(row =&gt; {<br />
        println(row.getAs(&quot;key&quot;))<br />
        println(row.getAs(&quot;cluster_name&quot;))<br />
        println(row.getAs(&quot;cql_version&quot;))<br />
      })<br />
  }<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2019/06/11/client-side-load-balancing/">
        Client side load balancing
      </a>
    </h2>
    <time datetime="2019-06-11">11 June 2019</time>
    <p>https://www.youtube.com/watch?v=6NdxUY1La2I</p>

  </article>

<article>
    <h2>
      <a href="/2019/05/17/kafka-docker-compose-example-for-kafka/">
        Kafka - Docker compose example for Kafka
      </a>
    </h2>
    <time datetime="2019-05-17">17 May 2019</time>
    <p>Kafka docker compose example. Please set value of KAFKA_ADVERTISED_HOST_NAME for local host IP address.</p>
<p>[code lang="c"]<br />
version: '2.1'</p>
<p>services:<br />
  zookeeper:<br />
    image: wurstmeister/zookeeper:3.4.6<br />
    ports:<br />
      - &quot;2181:2181&quot;</p>
<p>  kafka:<br />
    image: wurstmeister/kafka:2.12-2.2.0<br />
    ports:<br />
      - '9092:9092'<br />
    tmpfs:<br />
      - /kafka/:rw<br />
    depends_on:<br />
      - zookeeper<br />
    environment:<br />
      KAFKA_ADVERTISED_HOST_NAME: [HOST_IPADDRESS]<br />
      KAFKA_ZOOKEEPER_CONNECT: 'zookeeper:2181'<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2019/05/12/time-days-of-clock-vs-monotonic-clocks/">
        Time - days of clock vs Monotonic clocks
      </a>
    </h2>
    <time datetime="2019-05-12">12 May 2019</time>
    <p>Getting days of clocks<br />
- Linux: clock_gettime(CLOCK_REALTIME)<br />
- Java: System.currentTimeMillis()</p>
<p>Getting monotonic clocks<br />
- Linux: clock_gettime(CLOCK_MONOTONIC)<br />
- Java: System.nanoTime()</p>
<p>It's important to know difference between days of clocks and monotonic clocks because days of clocks is measured from a certain epock(Java is using 1970 Jan 1 in UTC) it can be backward when time is adjusted by NTP.<br />
But monotonic clocks will never go back, it will guarantee to be always forward so if application want to measure the duration of time, monotonic clocks should be used.<br />
However it's meaningless on comparing monotonic clocks between two machines. </p>

  </article>

<article>
    <h2>
      <a href="/2019/05/10/database-partitioning-name-in-various-database/">
        Database - Partitioning name in various database
      </a>
    </h2>
    <time datetime="2019-05-10">10 May 2019</time>
    <p>Various database called partitioning in various name. It's interesting but they are all same.</p>
<p>HBase: region<br />
Cassandra: vnode<br />
MongoDB: shard<br />
Elasticsearch: shard<br />
Bigtable: tablet<br />
Riak: vnode<br />
Couchbase: vBucket</p>

  </article>

<article>
    <h2>
      <a href="/2019/05/06/reactive-stream-example-of-implementation-of-publisher/">
        Reactive Stream - Example of implementation of Publisher
      </a>
    </h2>
    <time datetime="2019-05-06">06 May 2019</time>
    <p>https://medium.com/@olehdokuka/mastering-own-reactive-streams-implementation-part-1-publisher-e8eaf928a78c</p>

  </article>

<article>
    <h2>
      <a href="/2019/05/05/reactive-programming/">
        Reactive Programming
      </a>
    </h2>
    <time datetime="2019-05-05">05 May 2019</time>
    <p>It is worth to read through The Reactive Manifesto definition.</p>
<p>https://www.reactivemanifesto.org/glossary</p>

  </article>

<article>
    <h2>
      <a href="/2019/04/14/linux-network-settings-for-high-traffic-generating-application/">
        Linux - Network settings for high traffic generating application
      </a>
    </h2>
    <time datetime="2019-04-14">14 April 2019</time>
    <p>/etc/sysctl.conf</p>
<p>CENT OS example<br />
[code lang="C"]<br />
# sysctl -w net.core.wmem_default=262144<br />
[/code]</p>
<p># default socket memory buffer per a socker<br />
net.core.wmem_default=131072(128KB)<br />
net.core.rmem_default=131072(128KB)</p>
<p># max socker memory buffer per a socker<br />
net.core.wmem_max=2097152(2MB)<br />
net.core.rmem_max=2097152(2MB)</p>
<p># tcp buffer size (min, default, max) 4KB, 64KB, 2MB<br />
net.ipv4.tcp_wmem=4096 65536 2048000</p>
<p># enable TCP window scaling: client can transfer data more efficiently, it will be buffered in server side.<br />
net.ipv4.tcp_window_scaling=1</p>
<p># allow to accept simultaneous connections<br />
net.ipv4.tcp_max_syn_backlog=1024</p>

  </article>

<article>
    <h2>
      <a href="/2019/04/10/websocket-protocol-details/">
        Websocket protocol details
      </a>
    </h2>
    <time datetime="2019-04-10">10 April 2019</time>
    <p>Websocket protocol details.<br />
http://lucumr.pocoo.org/2012/9/24/websockets-101/</p>

  </article>

<article>
    <h2>
      <a href="/2019/04/04/java-jvm-monitoring-tool/">
        Java - JVM monitoring tool
      </a>
    </h2>
    <time datetime="2019-04-04">04 April 2019</time>
    <p>It is an amazing tool to monitor Java application such as thread cpu usage etc.</p>
<p>https://github.com/aragozin/jvm-tools</p>

  </article>

<article>
    <h2>
      <a href="/2019/04/04/python-spelling-correction-python-examples-on-list-comprehension/">
        Python - Spelling correction (Python examples on list comprehension)
      </a>
    </h2>
    <time datetime="2019-04-04">04 April 2019</time>
    <p>It's worth to read Python code as examples of using list comprehension semantics.</p>
<p>http://norvig.com/spell-correct.html</p>

  </article>

<article>
    <h2>
      <a href="/2019/03/10/machine-learning-for-software-engineer/">
        Machine Learning For Software Engineer
      </a>
    </h2>
    <time datetime="2019-03-10">10 March 2019</time>
    <p>How Software Engineer can be a ML engineer.<br />
https://www.youtube.com/watch?v=u0kyJeLvi0w</p>

  </article>

<article>
    <h2>
      <a href="/2019/03/09/modern-distributed-database-internals-and-core-concepts/">
        Modern Distributed Database Internals and Core Concepts
      </a>
    </h2>
    <time datetime="2019-03-09">09 March 2019</time>
    <p>Alex Petrov talks about modern storage system approaches, discussing storage internals in QCon 2018<br />
https://www.youtube.com/watch?v=wxcCHvQeZ-U</p>
<p>https://medium.com/@ifesdjeen</p>
<p>Waiting for the book<br />
https://twitter.com/ifesdjeen/status/1103323616710664192</p>

  </article>

<article>
    <h2>
      <a href="/2019/03/08/cassandra-data-modeling-for-historical-datanetflix/">
        Cassandra - data modeling for historical data(Netflix)
      </a>
    </h2>
    <time datetime="2019-03-08">08 March 2019</time>
    <p>https://medium.com/netflix-techblog/scaling-time-series-data-storage-part-i-ec2b6d44ba39<br />
https://medium.com/netflix-techblog/scaling-time-series-data-storage-part-ii-d67939655586</p>

  </article>

<article>
    <h2>
      <a href="/2019/02/16/event-sourcing-kafka-as-an-event-source-article/">
        Event Sourcing - Kafka as an event source article.
      </a>
    </h2>
    <time datetime="2019-02-16">16 February 2019</time>
    <p>https://www.confluent.io/blog/event-sourcing-cqrs-stream-processing-apache-kafka-whats-connection/</p>

  </article>

<article>
    <h2>
      <a href="/2019/02/09/crdt-conflict-free-replicated-data-types/">
        CRDT - Conflict-Free Replicated Data Types
      </a>
    </h2>
    <time datetime="2019-02-09">09 February 2019</time>
    <p>Eventually consistency mechanism in distributed systems.</p>
<p>https://medium.com/@istanbul_techie/a-look-at-conflict-free-replicated-data-types-crdt-221a5f629e7e</p>
<p>QCon<br />
https://www.youtube.com/watch?v=B5NULPSiOGw</p>

  </article>

<article>
    <h2>
      <a href="/2019/02/05/rust-enum-serialization-example/">
        Rust - Enum serialization example
      </a>
    </h2>
    <time datetime="2019-02-05">05 February 2019</time>
    <p>[code lang="c"]</p>
<p>use serde::ser::{ Serialize, Serializer };<br />
use serde::de::{ Deserialize, Deserializer };</p>
<p>pub enum EnumTestType {<br />
    Type1,<br />
    Type2,<br />
    UNKNOWN,<br />
}</p>
<p>impl EnumTestType {<br />
    pub fn value(&amp;self) -&gt; &amp;'static str {<br />
        match *self {<br />
            EnumTestType::Type1 =&gt; &quot;T1&quot;,<br />
            EnumTestType::Type2 =&gt; &quot;T2&quot;,<br />
            EnumTestType::UNKNOWN =&gt; &quot;?&quot;,<br />
        }<br />
    }<br />
}</p>
<p>impl Serialize for EnumTestType {<br />
    fn serialize&lt;S&gt;(&amp;self, serializer: S) -&gt; Result&lt;S::Ok, S::Error&gt;<br />
        where S: Serializer,<br />
    {<br />
        serializer.serialize_str(self.value())<br />
    }<br />
}</p>
<p>impl &lt;'a&gt; Deserialize&lt;'a&gt; for EnumTestType {<br />
    fn deserialize&lt;D&gt;(deserializer: D) -&gt; Result&lt;Self, D::Error&gt;<br />
        where D: Deserializer&lt;'a&gt;,<br />
    {<br />
        let s = String::deserialize(deserializer)?;<br />
        let result = match s.as_str() {<br />
            &quot;D&quot; =&gt; EnumTestType::Type1,<br />
            &quot;I&quot; =&gt; EnumTestType::Type2,<br />
            _ =&gt; EnumTestType::UNKNOWN,<br />
        };</p>
<p>        Ok(result)<br />
    }<br />
}</p>
<p>[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2019/01/07/rust-using-error-chain-to-report-stack-traces-on-errors-occurred/">
        Rust - using error-chain to report stack traces on errors occurred.
      </a>
    </h2>
    <time datetime="2019-01-07">07 January 2019</time>
    <p>Github<br />
https://github.com/rust-lang-nursery/error-chain</p>
<p>Example)<br />
https://github.com/rust-lang-nursery/error-chain/blob/master/examples/quickstart.rs</p>

  </article>

<article>
    <h2>
      <a href="/2019/01/06/rust-index-mut-index-operator-example/">
        Rust - Index, mut Index operator example
      </a>
    </h2>
    <time datetime="2019-01-06">06 January 2019</time>
    <p>[code lang="c"]<br />
use std::ops::{Index, IndexMut};<br />
#[derive(Debug)]<br />
pub struct ImageArray2 {<br />
    data: Vec&lt;u8&gt;,<br />
    rows: usize,<br />
    cols: usize,<br />
}</p>
<p>impl ImageArray2 {<br />
    pub fn new(rows: usize, cols: usize) -&gt; ImageArray2 {<br />
        let data = Vec::with_capacity(rows * cols);<br />
        ImageArray2 {<br />
            data: data,<br />
            rows: rows,<br />
            cols: cols,<br />
        }<br />
    }<br />
}</p>
<p>impl Index&lt;usize&gt; for ImageArray2 {<br />
    type Output = [u8];<br />
    fn index(&amp;self, index: usize) -&gt; &amp;Self::Output {<br />
        &amp;self.data[index * self.cols .. (index + 1) * self.cols]<br />
    }<br />
}</p>
<p>impl IndexMut&lt;usize&gt; for ImageArray2 {<br />
    fn index_mut(&amp;mut self, index: usize) -&gt; &amp;mut Self::Output {<br />
        &amp;mut self.data[index * self.cols .. (index + 1) * self.cols]<br />
    }<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2018/12/08/cassandra-cassandra-tuning-guide/">
        Cassandra - Cassandra tuning guide
      </a>
    </h2>
    <time datetime="2018-12-08">08 December 2018</time>
    <p>https://tobert.github.io/pages/als-cassandra-21-tuning-guide.html</p>

  </article>

<article>
    <h2>
      <a href="/2018/12/08/cassandra-save-a-table-in-csv-and-loading-a-csv-to-a-table-in-cqlsh/">
        Cassandra - Save a table in CSV and loading a CSV to a table in CQLSH
      </a>
    </h2>
    <time datetime="2018-12-08">08 December 2018</time>
    <p>[code lang="c"]<br />
cqlsh:test_keyspace&gt; COPY test_table TO 'test_table.csv' WITH HEADER=true;<br />
cqlsh:test_keyspace&gt; COPY test_table FROM 'test_table.csv' WITH HEADER=true;<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2018/12/04/emacs-learning-emacs/">
        Emacs - Learning Emacs
      </a>
    </h2>
    <time datetime="2018-12-04">04 December 2018</time>
    <p>
http://www.jesshamrick.com/2012/09/10/absolute-beginners-guide-to-emacs/</p>
<p>C-h C-h : help<br />
C-g : quit<br />
C-x b : switch buffers<br />
C-x right : right-cycle through buffers<br />
C-x left : left-cycle through buffers<br />
C-x k : kill buffer</p>
<p>C-x 0 : close the active window</p>
<p>C-x 1 : close all windows except the active window<br />
C-x 2 : split the active window vertically into two horizontal windows<br />
C-x 3 : split the active window horizontally into two vertical windows<br />
C-x o : change active window to next window</p>
<p>C-x C-f : open file</p>
<p>C-x C-s : save file<br />
C-x C-w : save file as</p>
<p>C-space : set region mark</p>
<p>C-w : kill region<br />
C-k : kill region between point and end of current line<br />
M-w : kill region without deleting<br />
C-y : yank region from kill ring<br />
M-y : move to previous item in the kill ring<br />
M-Y : move to next item in the kill ring</p>
<p>C-_ : undo</p>
<p>C-s : search forwards<br />
C-r : search backwards<br />
M-% : query replace (‘space’ to replace, ‘n’ to skip, ‘!’ to replace all)<br />
M-q : wrap text</p>
<p>C-left : move one word left</p>
<p>C-right : move one word right<br />
C-up : move one paragraph up<br />
C-down : move one paragraph down<br />
home : move to the beginning of the line<br />
end : move to the end of the line<br />
page up : move up a page<br />
page down : move down a page<br />
M- : move to end of buffer</p>

  </article>

<article>
    <h2>
      <a href="/2018/11/24/rsocket-resources-about-rsocketnext-paradigm-of-communication-framework/">
        RSocket - Resources about RSocket(Next paradigm of communication framework)
      </a>
    </h2>
    <time datetime="2018-11-24">24 November 2018</time>
    <p>https://github.com/linux-china/awesome-rsocket/blob/master/README.md</p>

  </article>

<article>
    <h2>
      <a href="/2018/11/11/rust-idiomatic-rust/">
        Rust - Idiomatic rust
      </a>
    </h2>
    <time datetime="2018-11-11">11 November 2018</time>
    <p>https://github.com/mre/idiomatic-rust</p>

  </article>

<article>
    <h2>
      <a href="/2018/11/08/java-11-enable-java-flight-recorder-jvm-option-example/">
        Java 11 - Enable Java Flight Recorder JVM option example
      </a>
    </h2>
    <time datetime="2018-11-08">08 November 2018</time>
    <p>[code lang="c"]<br />
-XX:StartFlightRecording=\<br />
        disk=true, \<br />
        dumponexit=true, \<br />
        filename=recording.jfr, \<br />
        maxsize=1024m,\<br />
        maxage=1d</p>
<p>[/code]</p>
<p>Checking running JFR with jcmd<br />
[code lang="c"]<br />
% jcmd PID JFR.check name=1<br />
[/code]</p>
<p>Dump JFR now<br />
[code]<br />
%jcmd PID JFR.dump name=1 filename=dump.jfr<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2018/10/20/spark-join-transformation/">
        Spark - join transformation
      </a>
    </h2>
    <time datetime="2018-10-20">20 October 2018</time>
    <p>join—Equivalent to an inner join in RDBMS, this returns a new pair RDD with the elements (K, (V, W)) containing all possible pairs of values from the first and second RDDs that have the same keys. For the keys that exist in only one of the two RDDs, the resulting RDD will have no elements.  </p>
<p>leftOuterJoin—Instead of (K, (V, W)), this returns elements of type (K, (V, Option(W))). The resulting RDD will also contain the elements (key, (v, None)) for those keys that don’t exist in the second RDD. Keys that exist only in the second RDD will have no matching elements in the new RDD.  </p>
<p>rightOuterJoin—This returns elements of type (K, (Option(V), W)); the resulting RDD will also contain the elements (key, (None, w)) for those keys that don’t exist in the first RDD. Keys that exist only in the first RDD will have no matching elements in the new RDD.  </p>
<p>fullOuterJoin—This returns elements of type (K, (Option(V), Option(W)); the resulting RDD will contain both (key, (v, None)) and (key, (None, w)) elements for those keys that exist in only one of the two RDDs.  </p>

  </article>

<article>
    <h2>
      <a href="/2018/10/19/c-gdb-init-profile-setting-in-linux/">
        C++ - GDB init profile setting in Linux
      </a>
    </h2>
    <time datetime="2018-10-19">19 October 2018</time>
    <p>[code lang="c"]<br />
$ cat ~/.gdbinit<br />
set history save on<br />
set print pretty on<br />
set pagination off<br />
set confirm off<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2018/10/03/cassandra-docker-run-example-for-cassandra-version-2-1-with-propertyfilesnitch/">
        Cassandra - Docker run example for Cassandra version 2.1 with PropertyFileSnitch
      </a>
    </h2>
    <time datetime="2018-10-03">03 October 2018</time>
    <p>[code lang="c"]<br />
sudo docker run -d -v /mnt/ramdisk/:/var/lib/cassandra/ -e CLUSTER_NAME=TEST -e CASSANDRA_ENDPOINT_SNITCH=PropertyFileSnitch -p 9160:9160 -p 9042:9042 -p 7199:7199 --name cassandra-test cassandra:2.1<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2018/09/16/kubernetes-how-flannel-network-works/">
        Kubernetes - How Flannel network works
      </a>
    </h2>
    <time datetime="2018-09-16">16 September 2018</time>
    <p>Software based packet routing mechanism without NAT.<br />
https://blog.laputa.io/kubernetes-flannel-networking-6a1cb1f8ec7c</p>

  </article>

<article>
    <h2>
      <a href="/2018/09/08/http-streaming-events-delivery-with-http-protocol/">
        HTTP - Streaming events delivery with HTTP protocol
      </a>
    </h2>
    <time datetime="2018-09-08">08 September 2018</time>
    <p>HTTP 1.1 has the following header option to deliver the streaming data to clients by opening a TCP connection.</p>
<p>[code lang="c"]<br />
Transfer-Encoding: chunked<br />
[/code]</p>
<p>With above header, Content-Length will be omitted but beginning of each chunk will have the length of the current chunk in hexadecimal format, followed by '\r\n' and then the chunk itself, followed by another '\r\n'.<br />
[code lang="c"]<br />
HTTP/1.1 200 OK<br />
Content-Type: text/plain<br />
Transfer-Encoding: chunked</p>
<p>7\r\n<br />
Mozilla\r\n<br />
9\r\n<br />
Developer\r\n<br />
7\r\n<br />
Network\r\n<br />
0\r\n<br />
\r\n<br />
[/code]</p>
<p>Kubernetes API server is using this mechanism for watch=true API.<br />
Example)<br />
[code lang="c"]<br />
$ curl -X GET -i http://127.0.0.1:8080/api/v1/pods?watch=true<br />
HTTP/1.1 200 OK<br />
Transfer-Encoding: chunked<br />
Date: Tue, 15 Mar 2016 08:00:09 GMT<br />
Content-Type: text/plain; charset=utf-8<br />
Transfer-Encoding: chunked</p>
<p>{&quot;type&quot;:&quot;ADDED&quot;,&quot;object&quot;:{&quot;kind&quot;:&quot;Pod&quot;,&quot;apiVersion&quot;:&quot;v1&quot;,&quot;metadata&quot;:{&quot;name&quot;:&quot;nginx-app-o0kvl&quot;,&quot;generateName&quot;:&quot;nginx-app-&quot;,&quot;namespace&quot;:&quot;default&quot;,&quot;selfLink&quot;:&quot;/api/v1/namespaces/default/pods/nginx-app-o0kvl&quot;,&quot;uid&quot;:&quot;090cc0c8-ea84-11e5-8c79-42010af00003&quot;,&quot;resourceVersion&quot;:&quot;228082&quot;,&quot;creationTimestamp&quot;:&quot;2016-03-15T08:00:51Z&quot;,&quot;labels&quot;:{&quot;run&quot;:&quot;nginx-app&quot;},&quot;annotations&quot;:{&quot;kubernetes.io/created-by&quot;:&quot;{\&quot;kind\&quot;:\&quot;SerializedReference\&quot;,\&quot;apiVersion\&quot;:\&quot;v1\&quot;,\&quot;reference\&quot;:{\&quot;kind\&quot;:\&quot;ReplicationController\&quot;,\&quot;namespace\&quot;:\&quot;default\&quot;,\&quot;name\&quot;:\&quot;nginx-app\&quot;,\&quot;uid\&quot;:\&quot;090bfb57-ea84-11e5-8c79-42010af00003\&quot;,\&quot;apiVersion\&quot;:\&quot;v1\&quot;,\&quot;resourceVersion\&quot;:\&quot;228081\&quot;}}\n&quot;}},&quot;spec&quot;:{&quot;volumes&quot;:[{&quot;name&quot;:&quot;default-token-wpfjn&quot;,&quot;secret&quot;:{&quot;secretName&quot;:&quot;default-token-wpfjn&quot;}}],&quot;containers&quot;:[{&quot;name&quot;:&quot;nginx-app&quot;,&quot;image&quot;:&quot;nginx&quot;,&quot;ports&quot;:[{&quot;containerPort&quot;:80,&quot;protocol&quot;:&quot;TCP&quot;}],&quot;resources&quot;:{},&quot;volumeMounts&quot;:[{&quot;name&quot;:&quot;default-token-wpfjn&quot;,&quot;readOnly&quot;:true,&quot;mountPath&quot;:&quot;/var/run/secrets/kubernetes.io/serviceaccount&quot;}],&quot;terminationMessagePath&quot;:&quot;/dev/termination-log&quot;,&quot;imagePullPolicy&quot;:&quot;Always&quot;}],&quot;restartPolicy&quot;:&quot;Always&quot;,&quot;terminationGracePeriodSeconds&quot;:30,&quot;dnsPolicy&quot;:&quot;ClusterFirst&quot;,&quot;serviceAccountName&quot;:&quot;default&quot;,&quot;serviceAccount&quot;:&quot;default&quot;,&quot;securityContext&quot;:{}},&quot;status&quot;:{&quot;phase&quot;:&quot;Pending&quot;}}}<br />
{&quot;type&quot;:&quot;MODIFIED&quot;,&quot;object&quot;:{&quot;kind&quot;:&quot;Pod&quot;,&quot;apiVersion&quot;:&quot;v1&quot;,&quot;metadata&quot;:{&quot;name&quot;:&quot;nginx-app-o0kvl&quot;,&quot;generateName&quot;:&quot;nginx-app-&quot;,&quot;namespace&quot;:&quot;default&quot;,&quot;selfLink&quot;:&quot;/api/v1/namespaces/default/pods/nginx-app-o0kvl&quot;,&quot;uid&quot;:&quot;090cc0c8-ea84-11e5-8c79-42010af00003&quot;,&quot;resourceVersion&quot;:&quot;228084&quot;,&quot;creationTimestamp&quot;:&quot;2016-03-15T08:00:51Z&quot;,&quot;labels&quot;:{&quot;run&quot;:&quot;nginx-app&quot;},&quot;annotations&quot;:{&quot;kubernetes.io/created-by&quot;:&quot;{\&quot;kind\&quot;:\&quot;SerializedReference\&quot;,\&quot;apiVersion\&quot;:\&quot;v1\&quot;,\&quot;reference\&quot;:{\&quot;kind\&quot;:\&quot;ReplicationController\&quot;,\&quot;namespace\&quot;:\&quot;default\&quot;,\&quot;name\&quot;:\&quot;nginx-app\&quot;,\&quot;uid\&quot;:\&quot;090bfb57-ea84-11e5-8c79-42010af00003\&quot;,\&quot;apiVersion\&quot;:\&quot;v1\&quot;,\&quot;resourceVersion\&quot;:\&quot;228081\&quot;}}\n&quot;}},&quot;spec&quot;:{&quot;volumes&quot;:[{&quot;name&quot;:&quot;default-token-wpfjn&quot;,&quot;secret&quot;:{&quot;secretName&quot;:&quot;default-token-wpfjn&quot;}}],&quot;containers&quot;:[{&quot;name&quot;:&quot;nginx-app&quot;,&quot;image&quot;:&quot;nginx&quot;,&quot;ports&quot;:[{&quot;containerPort&quot;:80,&quot;protocol&quot;:&quot;TCP&quot;}],&quot;resources&quot;:{},&quot;volumeMounts&quot;:[{&quot;name&quot;:&quot;default-token-wpfjn&quot;,&quot;readOnly&quot;:true,&quot;mountPath&quot;:&quot;/var/run/secrets/kubernetes.io/serviceaccount&quot;}],&quot;terminationMessagePath&quot;:&quot;/dev/termination-log&quot;,&quot;imagePullPolicy&quot;:&quot;Always&quot;}],&quot;restartPolicy&quot;:&quot;Always&quot;,&quot;terminationGracePeriodSeconds&quot;:30,&quot;dnsPolicy&quot;:&quot;ClusterFirst&quot;,&quot;serviceAccountName&quot;:&quot;default&quot;,&quot;serviceAccount&quot;:&quot;default&quot;,&quot;nodeName&quot;:&quot;10.240.0.4&quot;,&quot;securityContext&quot;:{}},&quot;status&quot;:{&quot;phase&quot;:&quot;Pending&quot;}}}<br />
{&quot;type&quot;:&quot;MODIFIED&quot;,&quot;object&quot;:{&quot;kind&quot;:&quot;Pod&quot;,&quot;apiVersion&quot;:&quot;v1&quot;,&quot;metadata&quot;:{&quot;name&quot;:&quot;nginx-app-o0kvl&quot;,&quot;generateName&quot;:&quot;nginx-app-&quot;,&quot;namespace&quot;:&quot;default&quot;,&quot;selfLink&quot;:&quot;/api/v1/namespaces/default/pods/nginx-app-o0kvl&quot;,&quot;uid&quot;:&quot;090cc0c8-ea84-11e5-8c79-42010af00003&quot;,&quot;resourceVersion&quot;:&quot;228088&quot;,&quot;creationTimestamp&quot;:&quot;2016-03-15T08:00:51Z&quot;,&quot;labels&quot;:{&quot;run&quot;:&quot;nginx-app&quot;},&quot;annotations&quot;:{&quot;kubernetes.io/created-by&quot;:&quot;{\&quot;kind\&quot;:\&quot;SerializedReference\&quot;,\&quot;apiVersion\&quot;:\&quot;v1\&quot;,\&quot;reference\&quot;:{\&quot;kind\&quot;:\&quot;ReplicationController\&quot;,\&quot;namespace\&quot;:\&quot;default\&quot;,\&quot;name\&quot;:\&quot;nginx-app\&quot;,\&quot;uid\&quot;:\&quot;090bfb57-ea84-11e5-8c79-42010af00003\&quot;,\&quot;apiVersion\&quot;:\&quot;v1\&quot;,\&quot;resourceVersion\&quot;:\&quot;228081\&quot;}}\n&quot;}},&quot;spec&quot;:{&quot;volumes&quot;:[{&quot;name&quot;:&quot;default-token-wpfjn&quot;,&quot;secret&quot;:{&quot;secretName&quot;:&quot;default-token-wpfjn&quot;}}],&quot;containers&quot;:[{&quot;name&quot;:&quot;nginx-app&quot;,&quot;image&quot;:&quot;nginx&quot;,&quot;ports&quot;:[{&quot;containerPort&quot;:80,&quot;protocol&quot;:&quot;TCP&quot;}],&quot;resources&quot;:{},&quot;volumeMounts&quot;:[{&quot;name&quot;:&quot;default-token-wpfjn&quot;,&quot;readOnly&quot;:true,&quot;mountPath&quot;:&quot;/var/run/secrets/kubernetes.io/serviceaccount&quot;}],&quot;terminationMessagePath&quot;:&quot;/dev/termination-log&quot;,&quot;imagePullPolicy&quot;:&quot;Always&quot;}],&quot;restartPolicy&quot;:&quot;Always&quot;,&quot;terminationGracePeriodSeconds&quot;:30,&quot;dnsPolicy&quot;:&quot;ClusterFirst&quot;,&quot;serviceAccountName&quot;:&quot;default&quot;,&quot;serviceAccount&quot;:&quot;default&quot;,&quot;nodeName&quot;:&quot;10.240.0.4&quot;,&quot;securityContext&quot;:{}},&quot;status&quot;:{&quot;phase&quot;:&quot;Pending&quot;,&quot;conditions&quot;:[{&quot;type&quot;:&quot;Ready&quot;,&quot;status&quot;:&quot;False&quot;,&quot;lastProbeTime&quot;:null,&quot;lastTransitionTime&quot;:&quot;2016-03-15T08:00:51Z&quot;,&quot;reason&quot;:&quot;ContainersNotReady&quot;,&quot;message&quot;:&quot;containers with unready status: [nginx-app]&quot;}],&quot;hostIP&quot;:&quot;10.240.0.4&quot;,&quot;startTime&quot;:&quot;2016-03-15T08:00:51Z&quot;,&quot;containerStatuses&quot;:[{&quot;name&quot;:&quot;nginx-app&quot;,&quot;state&quot;:{&quot;waiting&quot;:{&quot;reason&quot;:&quot;ContainerCreating&quot;,&quot;message&quot;:&quot;Image: nginx is ready, container is creating&quot;}},&quot;lastState&quot;:{},&quot;ready&quot;:false,&quot;restartCount&quot;:0,&quot;image&quot;:&quot;nginx&quot;,&quot;imageID&quot;:&quot;&quot;}]}}}<br />
{&quot;type&quot;:&quot;MODIFIED&quot;,&quot;object&quot;:{&quot;kind&quot;:&quot;Pod&quot;,&quot;apiVersion&quot;:&quot;v1&quot;,&quot;metadata&quot;:{&quot;name&quot;:&quot;nginx-app-o0kvl&quot;,&quot;generateName&quot;:&quot;nginx-app-&quot;,&quot;namespace&quot;:&quot;default&quot;,&quot;selfLink&quot;:&quot;/api/v1/namespaces/default/pods/nginx-app-o0kvl&quot;,&quot;uid&quot;:&quot;090cc0c8-ea84-11e5-8c79-42010af00003&quot;,&quot;resourceVersion&quot;:&quot;228094&quot;,&quot;creationTimestamp&quot;:&quot;2016-03-15T08:00:51Z&quot;,&quot;labels&quot;:{&quot;run&quot;:&quot;nginx-app&quot;},&quot;annotations&quot;:{&quot;kubernetes.io/created-by&quot;:&quot;{\&quot;kind\&quot;:\&quot;SerializedReference\&quot;,\&quot;apiVersion\&quot;:\&quot;v1\&quot;,\&quot;reference\&quot;:{\&quot;kind\&quot;:\&quot;ReplicationController\&quot;,\&quot;namespace\&quot;:\&quot;default\&quot;,\&quot;name\&quot;:\&quot;nginx-app\&quot;,\&quot;uid\&quot;:\&quot;090bfb57-ea84-11e5-8c79-42010af00003\&quot;,\&quot;apiVersion\&quot;:\&quot;v1\&quot;,\&quot;resourceVersion\&quot;:\&quot;228081\&quot;}}\n&quot;}},&quot;spec&quot;:{&quot;volumes&quot;:[{&quot;name&quot;:&quot;default-token-wpfjn&quot;,&quot;secret&quot;:{&quot;secretName&quot;:&quot;default-token-wpfjn&quot;}}],&quot;containers&quot;:[{&quot;name&quot;:&quot;nginx-app&quot;,&quot;image&quot;:&quot;nginx&quot;,&quot;ports&quot;:[{&quot;containerPort&quot;:80,&quot;protocol&quot;:&quot;TCP&quot;}],&quot;resources&quot;:{},&quot;volumeMounts&quot;:[{&quot;name&quot;:&quot;default-token-wpfjn&quot;,&quot;readOnly&quot;:true,&quot;mountPath&quot;:&quot;/var/run/secrets/kubernetes.io/serviceaccount&quot;}],&quot;terminationMessagePath&quot;:&quot;/dev/termination-log&quot;,&quot;imagePullPolicy&quot;:&quot;Always&quot;}],&quot;restartPolicy&quot;:&quot;Always&quot;,&quot;terminationGracePeriodSeconds&quot;:30,&quot;dnsPolicy&quot;:&quot;ClusterFirst&quot;,&quot;serviceAccountName&quot;:&quot;default&quot;,&quot;serviceAccount&quot;:&quot;default&quot;,&quot;nodeName&quot;:&quot;10.240.0.4&quot;,&quot;securityContext&quot;:{}},&quot;status&quot;:{&quot;phase&quot;:&quot;Running&quot;,&quot;conditions&quot;:[{&quot;type&quot;:&quot;Ready&quot;,&quot;status&quot;:&quot;True&quot;,&quot;lastProbeTime&quot;:null,&quot;lastTransitionTime&quot;:&quot;2016-03-15T08:00:52Z&quot;}],&quot;hostIP&quot;:&quot;10.240.0.4&quot;,&quot;podIP&quot;:&quot;172.16.49.2&quot;,&quot;startTime&quot;:&quot;2016-03-15T08:00:51Z&quot;,&quot;containerStatuses&quot;:[{&quot;name&quot;:&quot;nginx-app&quot;,&quot;state&quot;:{&quot;running&quot;:{&quot;startedAt&quot;:&quot;2016-03-15T08:00:52Z&quot;}},&quot;lastState&quot;:{},&quot;ready&quot;:true,&quot;restartCount&quot;:0,&quot;image&quot;:&quot;nginx&quot;,&quot;imageID&quot;:&quot;docker://sha256:af4b3d7d5401624ed3a747dc20f88e2b5e92e0ee9954aab8f1b5724d7edeca5e&quot;,&quot;containerID&quot;:&quot;docker://b97168314ad58404dbce7cb94291db7a976d2cb824b39e5864bf4bdaf27af255&quot;}]}}}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2018/09/03/mapreduce-reduce-side-join-example/">
        MapReduce - Reduce side join example
      </a>
    </h2>
    <time datetime="2018-09-03">03 September 2018</time>
    <p>https://www.edureka.co/blog/mapreduce-example-reduce-side-join/</p>

  </article>

<article>
    <h2>
      <a href="/2018/08/26/kubenetes-example-of-kubenetes/">
        Kubenetes - Example of Kubenetes
      </a>
    </h2>
    <time datetime="2018-08-26">26 August 2018</time>
    <p>https://blog.octo.com/en/how-does-it-work-kubernetes-episode-1-kubernetes-general-architecture/<br />
https://blog.octo.com/en/how-does-it-work-kubernetes-episode-2-kubernetes-networking/<br />
https://blog.octo.com/en/how-does-it-work-kubernetes-episode-3-infrastructure-as-code-the-tools-of-the-trade/<br />
https://blog.octo.com/en/how-does-it-work-kubernetes-episode-4-how-to-ansible-your-coreos-and-etcd/<br />
https://blog.octo.com/en/how-does-it-work-kubernetes-episode-5-master-and-worker-at-last/</p>

  </article>

<article>
    <h2>
      <a href="/2018/08/26/docker-difference-run-cmd-and-etrypoint/">
        Docker - difference RUN, CMD and ETRYPOINT
      </a>
    </h2>
    <time datetime="2018-08-26">26 August 2018</time>
    <p>1. CMD vs ENTRYPOINT<br />
The ENTRYPOINT specifies a command that will always be executed when the container starts. The CMD specifies arguments that will be fed to the ENTRYPOINT. But without ENTRYPOINT, CMD can execute the command as well.</p>
<p>2. RUN vs CMD<br />
RUN - command triggers while we build the docker image.<br />
CMD - command triggers while we launch the created docker image.</p>
<p>More details.<br />
http://goinbigdata.com/docker-run-vs-cmd-vs-entrypoint/</p>

  </article>

<article>
    <h2>
      <a href="/2018/08/23/java-loading-an-entire-cassandra-table-in-parallel/">
        Java - Loading an entire Cassandra table in parallel
      </a>
    </h2>
    <time datetime="2018-08-23">23 August 2018</time>
    <p>Sometimes, it is required to load all rows in the Cassandra table but it is very slow if loading is performed by a single thread.<br />
Let's say we have the following table in Cassandra<br />
[code lang="java"]<br />
CREATE TABLE users (<br />
  userid text PRIMARY KEY,<br />
  first_name text,<br />
  last_name text,<br />
  emails set&lt;text&gt;,<br />
  top_scores list&lt;int&gt;,<br />
  todo map&lt;timestamp, text&gt;<br />
);<br />
[/code]</p>
<p>If we load the entire table with the following CQL syntax in a single thread, it can take several hours if number of rows is 10 million.<br />
[code lang="java"]<br />
select * from users;<br />
[/code]</p>
<p>Fortunately, there is a way to load an entire table in parallel. Astyanax has a class called AllRowsReader which is showing how to load entire table in parallel.<br />
The basic idea of this code is to use token() keyword on selecting data. Since Cassandra is using hashing mechanism on distributing data in multiple hosts. If we know the token range, Cassandra is allow to load data in parallel.<br />
For example, the below CQL syntax will load users rows between 0 and 10000 but this token value will be determined by the configured current partitioner in Cassandra.<br />
[code lang="java"]<br />
select * from users where token(userid) &gt;= 0 and token(userid) &lt;= 10000;<br />
[/code]</p>
<p>The below code is summarizing this idea.<br />
[code lang="java"]<br />
public class TokenRange<br />
{<br />
    private final BigInteger beginToken;<br />
    private final BigInteger endToken;</p>
<p>    public TokenRange(BigInteger beginToken, BigInteger endToken)<br />
    {<br />
        this.beginToken = beginToken;<br />
        this.endToken = endToken;<br />
    }</p>
<p>    public BigInteger getBeginToken()<br />
    {<br />
        return beginToken;<br />
    }</p>
<p>    public BigInteger getEndToken()<br />
    {<br />
        return endToken;<br />
    }<br />
}<br />
[/code]</p>
<p>[code lang="java"]<br />
public interface TokenPartitioner<br />
{<br />
    List&lt;TokenRange&gt; splitTokenRange(int count);<br />
}<br />
[/code]</p>
<p>[code lang="java"]<br />
public class MurmurPartitioner implements TokenPartitioner<br />
{<br />
    private static final BigInteger MIN = new BigInteger(Long.toString(Long.MIN_VALUE));<br />
    private static final BigInteger MAX = new BigInteger(Long.toString(Long.MAX_VALUE));</p>
<p>    @Override<br />
    public List&lt;TokenRange&gt; splitTokenRange(int count)<br />
    {<br />
        List&lt;TokenRange&gt; tokens = new ArrayList&lt;&gt;();<br />
        List&lt;BigInteger&gt; splits = splitRange(MIN, MAX, count);<br />
        Iterator&lt;BigInteger&gt; iter = splits.iterator();<br />
        BigInteger current = iter.next();<br />
        while (iter.hasNext())<br />
        {<br />
            BigInteger next = iter.next();<br />
            tokens.add(new TokenRange(current, next));<br />
            current = next;<br />
        }<br />
        return tokens;<br />
    }</p>
<p>    public static List&lt;BigInteger&gt; splitRange(BigInteger first, BigInteger last, int count)<br />
    {<br />
        List&lt;BigInteger&gt; tokens = new ArrayList&lt;&gt;();<br />
        tokens.add(first);<br />
        BigInteger delta = (last.subtract(first).divide(BigInteger.valueOf((long) count)));<br />
        BigInteger current = first;<br />
        for (int i = 0; i &lt; count - 1; i++)<br />
        {<br />
            current = current.add(delta);<br />
            tokens.add(current);<br />
        }<br />
        tokens.add(last);<br />
        return tokens;<br />
    }<br />
}<br />
[/code]</p>
<p>[code lang="java"]<br />
public class AllRowReader&lt;T&gt;<br />
{<br />
    private static final Logger log = LoggerFactory.getLogger(AllRowCqlReader.class);</p>
<p>    private final Cluster cluster;<br />
    private final Session session;<br />
    private final static int DEFAULT_PAGE_SIZE = 100;<br />
    private final String tableName;<br />
    private final List&lt;String&gt; partitionKeyNames;<br />
    private final String realm;<br />
    private final Class&lt;T&gt; klass;<br />
    private int pageSize;<br />
    private int concurrencyLevel;</p>
<p>    private final Map&lt;String, TokenPartitioner&gt; partitionerMap = ImmutableMap.of(<br />
            &quot;org.apache.cassandra.dht.Murmur3Partitioner&quot;, new MurmurPartitioner(),<br />
            &quot;org.apache.cassandra.dht.RandomPartitioner&quot;, new RandomPartitioner()<br />
    );</p>
<p>    public static class Builder&lt;T&gt;<br />
    {<br />
        private final Cluster cluster;<br />
        private final Session session;<br />
        private final String tableName;<br />
        private final List&lt;String&gt; partitionKeyNames;<br />
        private final String realm;<br />
        private final Class&lt;T&gt; klass;<br />
        private int pageSize = DEFAULT_PAGE_SIZE;<br />
        private int concurrencyLevel = 4;</p>
<p>        public Builder(Cluster cluster,<br />
                       Session session,<br />
                       String tableName,<br />
                       List&lt;String&gt; partitionKeyNames,<br />
                       String realm,<br />
                       Class&lt;T&gt; klass)<br />
        {<br />
            this.cluster = cluster;<br />
            this.Session = session;<br />
            this.tableName = tableName;<br />
            this.partitionKeyNames = partitionKeyNames;<br />
            this.realm = realm;<br />
            this.klass = klass;<br />
        }</p>
<p>        public Builder&lt;T&gt; withPageSize(int pageSize)<br />
        {<br />
            this.pageSize = pageSize;<br />
            return this;<br />
        }</p>
<p>        public Builder&lt;T&gt; withConcurrencyLevel(int level)<br />
        {<br />
            this.concurrencyLevel = level;<br />
            return this;<br />
        }</p>
<p>        public AllRowReader&lt;T&gt; build()<br />
        {<br />
            return new AllRowCqlReader&lt;&gt;(cluster,<br />
                    session,<br />
                    tableName,<br />
                    partitionKeyNames,<br />
                    realm,<br />
                    klass,<br />
                    pageSize,<br />
                    concurrencyLevel);<br />
        }<br />
    }</p>
<p>    private AllRowCqlReader(Cluster cluster,<br />
                            Session session,<br />
                            String tableName,<br />
                            List&lt;String&gt; partitionKeyNames,<br />
                            String realm,<br />
                            Class&lt;T&gt; klass,<br />
                            int pageSize,<br />
                            int concurrencyLevel)<br />
    {<br />
        this.cluster = cluster;<br />
        this.session = session;<br />
        this.tableName = tableName;<br />
        this.partitionKeyNames = partitionKeyNames;<br />
        this.realm = realm;<br />
        this.klass = klass;<br />
        this.pageSize = pageSize;<br />
        this.concurrencyLevel = concurrencyLevel;<br />
    }</p>
<p>    public void executeWithCallback(RequestContext ctx,<br />
                                    Function&lt;List&lt;T&gt;, Boolean&gt; callback)<br />
    {<br />
        TokenPartitioner partitioner = findTokenPartitioner(ctx, realm);<br />
        List&lt;TokenRange&gt; tokens = partitioner.splitTokenRange(concurrencyLevel);</p>
<p>        List&lt;Callable&lt;Boolean&gt;&gt; tasks = new ArrayList&lt;&gt;(concurrencyLevel);<br />
        for (TokenRange token : tokens)<br />
        {<br />
            tasks.add(createLoadTaskInRange(ctx, token, callback));<br />
        }</p>
<p>        try<br />
        {<br />
            ExecutorService localExecutor = Executors.newFixedThreadPool(concurrencyLevel,<br />
                    new ThreadFactoryBuilder().setDaemon(true)<br />
                            .setNameFormat(&quot;AllRowCqlReaderExecutor-%d&quot;)<br />
                            .build());</p>
<p>            try<br />
            {<br />
                List&lt;Future&lt;Boolean&gt;&gt; futures = localExecutor.invokeAll(tasks);<br />
                waitForTasksToFinish(futures);<br />
            }<br />
            finally<br />
            {<br />
                localExecutor.shutdownNow();<br />
            }<br />
        }<br />
        catch (Exception e)<br />
        {<br />
            log.error(&quot;failed to load a table {}&quot;, tableName, e);<br />
        }<br />
    }</p>
<p>    private void waitForTasksToFinish(List&lt;Future&lt;Boolean&gt;&gt; futures) throws Exception<br />
    {<br />
        for (Future&lt;Boolean&gt; future : futures)<br />
        {<br />
            future.get();<br />
        }<br />
    }</p>
<p>    private TokenPartitioner findTokenPartitioner(RequestContext ctx, String realm)<br />
    {<br />
        String partitioner = cluster.getMetadata().getPartitioner();<br />
        TokenPartitioner found = partitionerMap.get(partitioner);<br />
        if (found == null)<br />
        {<br />
            throw new IllegalArgumentException(&quot;Not supported partitioner: &quot; + partitioner);<br />
        }<br />
        return found;<br />
    }</p>
<p>    private Callable&lt;Boolean&gt; createLoadTaskInRange(RequestContext ctx,<br />
                                                    TokenRange token,<br />
                                                    Function&lt;List&lt;T&gt;, Boolean&gt; callback)<br />
    {<br />
        return () -&gt;<br />
        {<br />
            try<br />
            {<br />
                StringBuilder sb = new StringBuilder();<br />
                sb.append(&quot;token(&quot;);<br />
                sb.append(String.join(&quot;,&quot;, partitionKeyNames));<br />
                sb.append(&quot;)&quot;);<br />
                String tokenOfKey = sb.toString();</p>
<p>                BigInteger beginTokenB = token.getBeginToken();<br />
                BigInteger endTokenB = token.getEndToken();</p>
<p>                Statement statement = QueryBuilder.select()<br />
                        .all()<br />
                        .from(tableName)<br />
                        .where(QueryBuilder.gte(tokenOfKey, beginTokenB.longValue()))<br />
                        .and(QueryBuilder.lte(tokenOfKey, endTokenB.longValue()))<br />
                        .setFetchSize(pageSize);</p>
<p>                MappingManager mappingManager = new MappingManager(session);<br />
                ResultSet rs = session.execute(statement);<br />
                Result&lt;T&gt; mappedResultSet = mappingManager.mapper(klass).map(rs);</p>
<p>                List&lt;T&gt; rows = new ArrayList&lt;&gt;(pageSize);<br />
                while (mappedResultSet.iterator().hasNext())<br />
                {<br />
                    rows.add(mappedResultSet.iterator().next());<br />
                    if (rows.size() &gt;= pageSize)<br />
                    {<br />
                        callback.apply(rows);<br />
                        rows = new ArrayList&lt;&gt;(pageSize);<br />
                    }<br />
                }</p>
<p>                if (rows.size() &gt; 0)<br />
                {<br />
                    callback.apply(rows);<br />
                }</p>
<p>                return true;<br />
            }<br />
            catch (Exception e)<br />
            {<br />
                log.error(&quot;failed to load rows in range: {} - {}&quot;, token.getBeginToken().toString(), token.getEndToken().toString(), e);<br />
            }</p>
<p>            return false;<br />
        };<br />
    }<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2018/08/11/c-17-generative-programming-in-c-17/">
        C++ 17 - Generative Programming in C++ 17
      </a>
    </h2>
    <time datetime="2018-08-11">11 August 2018</time>
    <p>Interesting generative programming in C++ 17. I think that this explains why compile time reflection and declarative programming approach is required for clean and readable code in C++.</p>
<p>https://www.youtube.com/watch?v=1qGksJWsfow&amp;index=50&amp;list=PL_AKIMJc4roVSbTTfHReQTl1dc9ms0lWH</p>

  </article>

<article>
    <h2>
      <a href="/2018/07/19/high-scalable-application-characteristics/">
        High scalable application characteristics
      </a>
    </h2>
    <time datetime="2018-07-19">19 July 2018</time>
    <p>1. Stateless<br />
- HTTP request/respond structure.<br />
2. Idempotence<br />
- database snapshot, recovering data.<br />
3. Monoid<br />
- map/reduce, parallelizing operations.</p>

  </article>

<article>
    <h2>
      <a href="/2018/07/14/docker-nsenter-tool-to-access-the-docker-container/">
        Docker - nsenter tool to access the Docker container
      </a>
    </h2>
    <time datetime="2018-07-14">14 July 2018</time>
    <p>Installing nsenter in /usr/loca/bin directory<br />
[code lang="c"]<br />
$ sudo docker run -v /usr/local/bin:/target jpetazzo/nsenter<br />
[/code]</p>
<p>Get the process id of container<br />
[code lang="c"]<br />
PID=$(docker inspect --format  &lt;container&gt;)<br />
[/code]</p>
<p>Launching a shell inside the container<br />
[code lang="c"]<br />
$ sudo nsenter --target $PID --mount --uts --ipc --net --pid<br />
[/code]</p>
<p>Run a ls command inside the container<br />
[code lang="c"]<br />
$ sudo nsenter --target $PID --mount --uts --ipc --net --pid ls<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2018/07/14/c-c17-and-boost-library-documentation/">
        C++17 - C++17 feature and boost library documentation
      </a>
    </h2>
    <time datetime="2018-07-14">14 July 2018</time>
    <p>https://www.bfilipek.com/2017/01/cpp17features.html<br />
https://theboostcpplibraries.com/</p>

  </article>

<article>
    <h2>
      <a href="/2018/07/12/c-learning-stl-algorithm/">
        C++17 - Learning STL algorithm
      </a>
    </h2>
    <time datetime="2018-07-12">12 July 2018</time>
    <p>https://www.fluentcpp.com/2018/07/10/105-stl-algorithms-in-less-than-an-hour/<br />
http://www.fluentcpp.com/getTheMap/</p>

  </article>

<article>
    <h2>
      <a href="/2018/07/11/c-core-dump-linux-utility-tool-from-ms/">
        C++ - Core dump Linux utility tool from MS
      </a>
    </h2>
    <time datetime="2018-07-11">11 July 2018</time>
    <p>https://github.com/Microsoft/ProcDump-for-Linux</p>

  </article>

<article>
    <h2>
      <a href="/2018/07/10/cmake-adding-debug-information/">
        CMake - Adding debug information
      </a>
    </h2>
    <time datetime="2018-07-10">10 July 2018</time>
    <p><code><br />
-DCMAKE_C_FLAGS_DEBUG="-D_DEBUG" -DCMAKE_BUILD_TYPE=Debug<br />
</code></p>

  </article>

<article>
    <h2>
      <a href="/2018/06/29/cmake-cmake-example-with-external-projects-with-flatten-tree/">
        CMake - How to create C++ projects with modern style of CMake
      </a>
    </h2>
    <time datetime="2018-06-29">29 June 2018</time>
    <p>Resources for CMake<br />
https://github.com/onqtam/awesome-cmake</p>
<p>Modern CMake example with third-party library</p>
<p>https://github.com/nsclass/Optional</p>

  </article>

<article>
    <h2>
      <a href="/2018/06/24/rust-functional-programming-for-rust/">
        Rust - Functional Programming for Rust
      </a>
    </h2>
    <time datetime="2018-06-24">24 June 2018</time>
    <p>https://github.com/algermissen/rustz</p>

  </article>

<article>
    <h2>
      <a href="/2018/06/15/fp-another-valuable-article-about-functor/">
        FP - Another valuable article about Functor
      </a>
    </h2>
    <time datetime="2018-06-15">15 June 2018</time>
    <p>http://nikgrozev.com/2016/03/14/functional-programming-and-category-theory-part-1-categories-and-functors/<br />
http://nikgrozev.com/2016/04/11/functional-programming-and-category-theory-part-2-applicative-functors/</p>

  </article>

<article>
    <h2>
      <a href="/2018/06/07/rust-what-makes-rust-programming-language-special/">
        Rust - What makes Rust Programming language special?
      </a>
    </h2>
    <time datetime="2018-06-07">07 June 2018</time>
    <p>I think that the following features in Rust will make it special.</p>
<p>1. Package manager.<br />
2. Functional style programming.<br />
3. No exception.<br />
4. No garbage collector.<br />
5. Compile time error detection for multi-threading programming.</p>
<p>However, I think that the following features make hard to master Rust programming language.<br />
1. Ownership, borrower and move semantic. (but if somebody has a strong C++ programming experience, this is easy to catch up)<br />
2. Lifetime indicator.</p>

  </article>

<article>
    <h2>
      <a href="/2018/05/25/java-apache-httpclient-to-access-the-self-signed-certification-and-no-host-verification/">
        Java - Apache HttpClient to access the self signed certification and no host verification
      </a>
    </h2>
    <time datetime="2018-05-25">25 May 2018</time>
    <p>Below code comes from https://memorynotfound.com/ignore-certificate-errors-apache-httpclient/</p>
<p>[code lang="java"]<br />
package com.memorynotfound.httpclient;</p>
<p>import org.apache.http.client.methods.HttpGet;<br />
import org.apache.http.conn.ssl.*;<br />
import org.apache.http.impl.client.CloseableHttpClient;<br />
import org.apache.http.impl.client.HttpClients;<br />
import org.apache.http.ssl.SSLContextBuilder;<br />
import javax.net.ssl.*;<br />
import java.io.IOException;<br />
import java.security.KeyManagementException;<br />
import java.security.KeyStoreException;<br />
import java.security.NoSuchAlgorithmException;</p>
<p>/**<br />
 * This example demonstrates how to ignore certificate errors.<br />
 * These errors include self signed certificate errors and hostname verification errors.<br />
 */<br />
public class HttpClientAcceptSelfSignedCertificate {</p>
<p>    public static void main(String... args)  {</p>
<p>        try (CloseableHttpClient httpclient = createAcceptSelfSignedCertificateClient()) {<br />
            HttpGet httpget = new HttpGet(&quot;https://example.com&quot;);<br />
            System.out.println(&quot;Executing request &quot; + httpget.getRequestLine());</p>
<p>            httpclient.execute(httpget);<br />
            System.out.println(&quot;----------------------------------------&quot;);<br />
        } catch (NoSuchAlgorithmException | KeyStoreException | KeyManagementException | IOException e) {<br />
            throw new RuntimeException(e);<br />
        }<br />
    }</p>
<p>    private static CloseableHttpClient createAcceptSelfSignedCertificateClient()<br />
            throws KeyManagementException, NoSuchAlgorithmException, KeyStoreException {</p>
<p>        // use the TrustSelfSignedStrategy to allow Self Signed Certificates<br />
        SSLContext sslContext = SSLContextBuilder<br />
                .create()<br />
                .loadTrustMaterial(new TrustSelfSignedStrategy())<br />
                .build();</p>
<p>        // we can optionally disable hostname verification.<br />
        // if you don't want to further weaken the security, you don't have to include this.<br />
        HostnameVerifier allowAllHosts = new NoopHostnameVerifier();</p>
<p>        // create an SSL Socket Factory to use the SSLContext with the trust self signed certificate strategy<br />
        // and allow all hosts verifier.<br />
        SSLConnectionSocketFactory connectionFactory = new SSLConnectionSocketFactory(sslContext, allowAllHosts);</p>
<p>        // finally create the HttpClient using HttpClient factory methods and assign the ssl socket factory<br />
        return HttpClients<br />
                .custom()<br />
                .setSSLSocketFactory(connectionFactory)<br />
                .build();<br />
    }<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2018/05/13/java-aspect-based-to-measure-the-method-execution-time-with-annotation/">
        Java - Aspect based measuring the method execution time of function with annotation
      </a>
    </h2>
    <time datetime="2018-05-13">13 May 2018</time>
    <p>Annotation definition.<br />
[code lang="java"]<br />
@Target({ElementType.METHOD,<br />
         ElementType.CONSTRUCTOR})<br />
@Retention(RetentionPolicy.RUNTIME)<br />
public @interface MeasureMethodTime {<br />
}<br />
[/code]</p>
<p>Aspect advice implementation.<br />
[code lang="java"]<br />
@Aspect<br />
public class MeasureMethodLogger {<br />
    private static Logger LOGGER = LoggerFactory.getLogger(MeasureMethodLogger.class);</p>
<p>    @Around(&quot;execution(@com.acrocontext.api.utils.MeasureMethodTime * *(..)) &amp;&amp; @annotation(measureMethodTimeAnnotation)&quot;)<br />
    public Object logDuration(ProceedingJoinPoint joinPoint,<br />
                              MeasureMethodTime measureMethodTimeAnnotation)<br />
            throws Throwable {</p>
<p>        long start = System.currentTimeMillis();<br />
        Object result = joinPoint.proceed();<br />
        LOGGER.info(<br />
                String.format(&quot;[MEASURE]: %s in %d(msec)&quot;,<br />
                joinPoint.getSignature().getName(),<br />
                System.currentTimeMillis() - start));<br />
        return result;<br />
    }<br />
}<br />
[/code]</p>
<p>Example<br />
[code lang="java"]<br />
  @MeasureMethodTime<br />
  public int test(int value) {<br />
  }<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2018/05/06/spring-cglib-high-performance-code-generation-library/">
        Spring - CGLIB: High performance code generation library
      </a>
    </h2>
    <time datetime="2018-05-06">06 May 2018</time>
    <p>Spring is heavily using the CGLIB for it's framework implementation. CGLib is high performance code generation library. It is using to extend JAVA classes and implementation at runtime.</p>
<p>More details can be found in the below.<br />
https://github.com/cglib/cglib/wiki</p>

  </article>

<article>
    <h2>
      <a href="/2018/04/15/cache-false-sharing/">
        Cache - False sharing
      </a>
    </h2>
    <time datetime="2018-04-15">15 April 2018</time>
    <p>As modern CPU shared memory architecture, false sharing is the major performance bottleneck on multi-thread application.<br />
False sharing is caused by sharing the same cache line with multiple thread. In order to avoid this problem, it is important that local thread data should be away enough to data used by another thread.<br />
The best way to achieve this is not to spread out data used by a thread. If all data used by a thread is close enough, processor will try to load them on the same cache line which each thread can localize the memory access on their cache line.</p>

  </article>

<article>
    <h2>
      <a href="/2018/04/06/cassandra-evolvement-of-cassandra-column-oriented-row/">
        Cassandra - Evolvement of Cassandra column oriented row
      </a>
    </h2>
    <time datetime="2018-04-06">06 April 2018</time>
    <p>The following blog explain how Cassandra has been improved the column oriented row.</p>
<p>https://www.datastax.com/dev/blog/cql3-for-cassandra-experts</p>

  </article>

<article>
    <h2>
      <a href="/2018/03/29/java-spring-to-inject-multiple-service-instances-having-same-interface/">
        Java - Spring to inject multiple service instances having same interface
      </a>
    </h2>
    <time datetime="2018-03-29">29 March 2018</time>
    <p>Create service for multiple name providers<br />
[code lang="c"]<br />
interface NameProvider {<br />
    String name();<br />
}</p>
<p>@Service<br />
public class SomeName implement NameProvider {<br />
    public String name() { return &quot;SomeName&quot;; }<br />
}</p>
<p>@Service<br />
public class AnotherName implement NameProvider {<br />
    public String name() { return &quot;AnotherName&quot;; }<br />
}</p>
<p>[/code]</p>
<p>NameService class can inject multiple NameProviders with the following constructor injection.<br />
[code lang="c"]<br />
@Service<br />
public class NameService {<br />
    private List&lt;NameProvider&gt; nameProviders;</p>
<p>    NameService(List&lt;NameService&gt; nameProviders) {<br />
        this.nameProviders = nameProviders;<br />
    }<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2018/03/26/java-importance-of-final-fields-for-immutable-object/">
        Java - Importance of final fields for immutable object
      </a>
    </h2>
    <time datetime="2018-03-26">26 March 2018</time>
    <p>Java will guarantee that all thread will see correct values of final fields that were set by the constructor, regardless of how object is published.</p>

  </article>

<article>
    <h2>
      <a href="/2018/03/15/c17-simple-and-clear-view-of-c17-features/">
        C++17 - Simple and clear view of C++17 features
      </a>
    </h2>
    <time datetime="2018-03-15">15 March 2018</time>
    <p>https://github.com/tvaneerd/cpp17_in_TTs/blob/master/ALL_IN_ONE.md</p>

  </article>

<article>
    <h2>
      <a href="/2018/03/06/vc-visual-c-package-manager-for-windows/">
        VC++ - Visual C++ package manager for Windows
      </a>
    </h2>
    <time datetime="2018-03-06">06 March 2018</time>
    <p>https://github.com/Microsoft/vcpkg</p>

  </article>

<article>
    <h2>
      <a href="/2018/02/17/fp-gang-of-four-failed-me-when-i-have-to-design-a-software-with-multi-threaded-or-concurrent-aware-code/">
        FP - Designing multi threaded and concurrent enabled software with functional programming
      </a>
    </h2>
    <time datetime="2018-02-17">17 February 2018</time>
    <p>Modern CPU architecture has been enforcing me to create multi-threaded and concurrent enabled software.</p>
<p>I have been creating multi-thread software with Gang of four design principal but this design principal didn't show me the best way on creating high scalable software without losing the maintainability and performance.</p>
<p>Gang of four design pattern encourage me to hide details and abstract operations but this created often harder problems on dealing with concurrent processing. In order to make a correct software, I had to use the locking API to avoid the race condition and this degraded the performance of application. And hiding details make harder to understand logic. Eventually it decreased the maintainability of software.</p>
<p>But after understanding the functional programming concepts such as Monoid, Functor, Applicative Functor and Monads, it showed me another approach to solve this problem with minimizing of losing maintainability and performance.</p>
<p>Functional programming don't hide details of logic instead it encourage to write declarative code on describing logic. This approach improve the maintainability of software. And immutable data structure and Monoid allow to maximize the utilization of multiple cores without worrying about race condition and thread locking.</p>
<p>However, functional programming approach for concurrent application requires some basic infrastructure. The most visible one is to have a garbage collection environment. If it is mandatory to maintain the memory manually, there are some limitation on applying the functional programming approach but reference counting based memory management can help a lot for this case.</p>

  </article>

<article>
    <h2>
      <a href="/2018/02/17/fp-relationship-between-applicative-functor-and-monad/">
        FP - Relationship between Applicative Functor and Monad
      </a>
    </h2>
    <time datetime="2018-02-17">17 February 2018</time>
    <p>Applicative Functor has the following two properties.</p>
<p>Pure: create a functor from value.<br />
Apply: a function taking arguments which are a Functor having a function and a Pure. This function will return the Functor after applying the function inside the first Functor with a value from a Pure by unwrapping.</p>
<p>Example)<br />
[code lang="c"]</p>
<p>Optional&lt;int&gt; apply(Optional&lt;function&lt;int(std::string)&gt;&gt; f, Optional&lt;std::string&gt; v) {<br />
   if (f &amp; v) {<br />
      return Optional&lt;int&gt;(*f (*v));<br />
   }</p>
<p>   return Optional(nullptr);<br />
}</p>
<p>[/code]</p>
<p>Java example)<br />
[code lang="c"]</p>
<p>Optional&lt;Integer&gt; apply(Optional&lt;Function&lt;String, Integer&gt;&gt; f, Optional&lt;String&gt; v) {<br />
   return f.flatMap(a -&gt; v.map(a(v))<br />
}</p>
<p>[/code]</p>
<p>Monad is the Applicative Functor with joining to flat the returning Functor.<br />
So Monad is Applicative Functor with a join.<br />
Join: flattening the Functor</p>
<p>Join Example)<br />
[code lang="c"]<br />
Optional&lt;int&gt; join(Optional&lt;Optional&lt;int&gt;&gt; v) {<br />
   if (v) {<br />
      return *v;<br />
   }</p>
<p>   return Optional&lt;int&gt;(nullptr);<br />
}</p>
<p>[/code]</p>
<p>Monad C++ definition:<br />
[code lang="c"]<br />
template&lt;typename T, typename U&gt;<br />
Monad&lt;U&gt; bind(Monad&lt;T&gt; m, std::function&lt;Monad&lt;U&gt;(T)&gt; f) {<br />
   return join(apply(pure(f), m));<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2018/02/17/java-open-addressing-hash-implementation-in-java/">
        Java - Open addressing hash implementation in Java
      </a>
    </h2>
    <time datetime="2018-02-17">17 February 2018</time>
    <p>IdentityHashMap class</p>
<p>[code lang="c"]<br />
Map&lt;String,String&gt; iMap = new IdentityHashMap&lt;String,String&gt;();<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2018/02/10/java-navigablemap-for-headmap-tailmap-and-submap/">
        Java -  headMap, tailMap and subMap in NavigableMap
      </a>
    </h2>
    <time datetime="2018-02-10">10 February 2018</time>
    <p>NavigableMap collection on Java provide methods to return the view of Map on sorted order of key. The most common methods are headMap, tailMap and subMap.</p>
<p>headMap example.<br />
[code]<br />
        NavigableMap&lt;String, String&gt; navigableMap = new TreeMap&lt;&gt;();</p>
<p>        navigableMap.put(&quot;1&quot;, &quot;1&quot;);<br />
        navigableMap.put(&quot;2&quot;, &quot;2&quot;);<br />
        navigableMap.put(&quot;3&quot;, &quot;3&quot;);<br />
        navigableMap.put(&quot;4&quot;, &quot;4&quot;);</p>
<p>        SortedMap&lt;String, String&gt; resultViewMap = navigableMap.headMap(&quot;3&quot;);</p>
<p>        resultViewMap.entrySet().stream().forEach(entry -&gt;<br />
                System.out.println(String.format(&quot;key: %s, value: %s&quot;, entry.getKey(), entry.getValue())));<br />
[/code]</p>
<p>output<br />
[code]<br />
key: 1, value: 1<br />
key: 2, value: 2<br />
[/code]</p>
<p>If inclusive is true on calling headMap("3", true), it will be<br />
[code]<br />
key: 1, value: 1<br />
key: 2, value: 2<br />
key: 3, value: 3<br />
[/code]</p>
<p>tailMap example.<br />
[code]<br />
        NavigableMap&lt;String, String&gt; navigableMap = new TreeMap&lt;&gt;();</p>
<p>        navigableMap.put(&quot;1&quot;, &quot;1&quot;);<br />
        navigableMap.put(&quot;2&quot;, &quot;2&quot;);<br />
        navigableMap.put(&quot;3&quot;, &quot;3&quot;);<br />
        navigableMap.put(&quot;4&quot;, &quot;4&quot;);</p>
<p>        SortedMap&lt;String, String&gt; resultViewMap = navigableMap.tailMap(&quot;3&quot;);</p>
<p>        resultViewMap.entrySet().stream().forEach(entry -&gt;<br />
                System.out.println(String.format(&quot;key: %s, value: %s&quot;, entry.getKey(), entry.getValue())));<br />
[/code]</p>
<p>output<br />
[code]<br />
key: 3, value: 3<br />
key: 4, value: 4<br />
[/code]</p>
<p>By default, inclusive is true on calling tailMap("3", true).</p>
<p>subMap example<br />
[code]<br />
        NavigableMap&lt;String, String&gt; navigableMap = new TreeMap&lt;&gt;();</p>
<p>        navigableMap.put(&quot;1&quot;, &quot;1&quot;);<br />
        navigableMap.put(&quot;2&quot;, &quot;2&quot;);<br />
        navigableMap.put(&quot;3&quot;, &quot;3&quot;);<br />
        navigableMap.put(&quot;4&quot;, &quot;4&quot;);</p>
<p>        SortedMap&lt;String, String&gt; resultViewMap = navigableMap.subMap(&quot;2&quot;, &quot;4&quot;);</p>
<p>        resultViewMap.entrySet().stream().forEach(entry -&gt;<br />
                System.out.println(String.format(&quot;key: %s, value: %s&quot;, entry.getKey(), entry.getValue())));<br />
[/code]</p>
<p>output<br />
[code]<br />
key: 2, value: 2<br />
key: 3, value: 3<br />
[/code]</p>
<p>By default, inclusive is true for fromKey, and inclusive is false for toKey on calling subMap("2", true, "4", false)</p>
<p>There are more available methods in NavigableMap<br />
[code]<br />
descendingKeySet() and descendingMap()</p>
<p>ceilingKey(), floorKey(), higherKey() and lowerKey()</p>
<p>celingEntry(), floorEntry(), higherEntry(), lowerEntry()</p>
<p>pollFirstEntry() and pollLastEntry()<br />
[/code]  </p>

  </article>

<article>
    <h2>
      <a href="/2018/01/20/java-java-8-comparator-to-replace-guava-compound-comparing/">
        Java - Java 8 Comparator to replace Guava compound comparing
      </a>
    </h2>
    <time datetime="2018-01-20">20 January 2018</time>
    <p>Guava example<br />
[code lang="c"]<br />
Collection.sort(list,<br />
    Ordering.from((Comparator&lt;Item&gt;) Comparator.comparingInt(item -&gt; item.getId()))<br />
    .compound(Comparator.comparing(Item::getName)))<br />
[/code]</p>
<p>Java 8 example<br />
[code lang="c"]<br />
Comparator&lt;Item&gt; compoundComparator<br />
      = Comparator.comparingInt(Item::getId)<br />
        .thenComparing(Item::getName);</p>
<p>Collection.sort(list, compoundComparator)<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2018/01/20/java-guava-api-to-implement-compareto-with-considering-sorting-ordering/">
        Java - Guava API to implement compareTo with considering sorting ordering
      </a>
    </h2>
    <time datetime="2018-01-20">20 January 2018</time>
    <p>Example of a chained comparison statement.<br />
[code lang="c"]<br />
   public int compareTo(Foo that) {<br />
     return ComparisonChain.start()<br />
         .compare(this.aString, that.aString)<br />
         .compare(this.anInt, that.anInt)<br />
         .compare(this.anEnum, that.anEnum, Ordering.natural().nullsLast())<br />
         .result();<br />
   }<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2018/01/13/java-the-article-of-stream-api-under-the-hood/">
        Java - The article of Stream API under the hood
      </a>
    </h2>
    <time datetime="2018-01-13">13 January 2018</time>
    <p>The following article is explaining the under the hood Java 8 Stream API.</p>
<p>https://www.ibm.com/developerworks/library/j-java-streams-3-brian-goetz/index.html</p>

  </article>

<article>
    <h2>
      <a href="/2018/01/13/java-converting-cassandra-resultset-to-java-8-stream/">
        Java - Converting Cassandra ResultSet to Java 8 Stream
      </a>
    </h2>
    <time datetime="2018-01-13">13 January 2018</time>
    <p>[code lang="c"]<br />
Statement stmt = QueryBuilder().select().all().from('table');<br />
ResultSet rs = session.execute(stmt);</p>
<p>StreamSupport.stream(<br />
    Spliterators.spliteratorUnknownSize(<br />
                rs.iterator(), Spliterator.ORDERED), false)<br />
.forEach(row -&gt; {<br />
   ...<br />
});<br />
[/code]</p>
<p>As input stream is sorted by partition key and input order is important, the following example can be used.<br />
[code lang="c"]<br />
Statement stmt = QueryBuilder().select().all().from('table');<br />
ResultSet rs = session.execute(stmt);</p>
<p>StreamSupport.stream(<br />
    Spliterators.spliteratorUnknownSize(<br />
                rs.iterator(), Spliterator.ORDERED | Spliterator.SORTED), false)<br />
.forEach(row -&gt; {<br />
   ...<br />
});<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2018/01/01/angular-proxy-settings-to-avoid-cors/">
        Angular - Proxy settings to avoid CORS
      </a>
    </h2>
    <time datetime="2018-01-01">01 January 2018</time>
    <p>Create a proxy.config.json<br />
[code lang="c"]<br />
{<br />
  &quot;/api&quot;: {<br />
    &quot;target&quot;: &quot;http://localhost:8080&quot;,<br />
    &quot;secure&quot;: false<br />
  }<br />
}<br />
[/code]</p>
<p>run ng serve with a configuration file.<br />
[code lang="c"]<br />
ng serve --proxy-config proxy.config.json<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/12/29/java-spring-boot-2-0-webflux-configuration-for-static-resources/">
        Java - Spring Boot 2.0 WebFlux configuration for static resources
      </a>
    </h2>
    <time datetime="2017-12-29">29 December 2017</time>
    <p>[code lang="c"]<br />
    @Value(&quot;classpath:/static/index.html&quot;)<br />
    private Resource indexHtml;</p>
<p>    @Bean<br />
    RouterFunction&lt;?&gt; routerFunction() {<br />
        RouterFunction router = RouterFunctions.resources(&quot;/**&quot;, new ClassPathResource(&quot;static/&quot;))<br />
                // workaround solution for forwarding / to /index.html<br />
                .andRoute(GET(&quot;/&quot;), request -&gt; {<br />
                    return ServerResponse.ok().contentType(TEXT_HTML).syncBody(indexHtml);<br />
                });<br />
        return router;<br />
    }<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/12/17/java-read-csv-file-from-a-stream/">
        Java - Read CSV file from a stream
      </a>
    </h2>
    <time datetime="2017-12-17">17 December 2017</time>
    <p>[code lang="c"]<br />
try (final CSVReader reader = new CSVReader(new BufferedReader(new InputStreamReader(inputStream)))) {<br />
    String[] line = null;</p>
<p>    while ((line = reader.readNext()) != null) {</p>
<p>    }</p>
<p>} catch (Exception e) {<br />
...<br />
}</p>
<p>[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/12/05/java-bean-validation-2-0-jsr-380-with-spring-boot/">
        Java - Bean validation 2.0 (JSR-380) with Spring boot
      </a>
    </h2>
    <time datetime="2017-12-05">05 December 2017</time>
    <p>http://www.baeldung.com/javax-validation</p>
<p>http://andreinc.net/2017/10/02/writing-an-unified-validation-mechanism-for-rest-apis-using-spring-boot-and-jsr-380/</p>
<p>https://github.com/nomemory/java-bean-validation-extension</p>

  </article>

<article>
    <h2>
      <a href="/2017/12/02/java-forkjoinpool/">
        Java - ForkJoinPool
      </a>
    </h2>
    <time datetime="2017-12-02">02 December 2017</time>
    <p>Good explanation on ForkJoinPool in Java</p>
<p>http://www.baeldung.com/java-fork-join</p>

  </article>

<article>
    <h2>
      <a href="/2017/12/02/java-logging-components-and-explanation/">
        Java - logging components and explanation
      </a>
    </h2>
    <time datetime="2017-12-02">02 December 2017</time>
    <p>LOGGERS: loggers are responsible for capturing events and passing them to the appropriate appender.</p>
<p>APPENDERS: also known as handlers, appenders are responsible for recording log events to a destination. appenders use layouts to format events before sending them to an output.</p>
<p>LAYOUTS: also known as formatters, layouts are responsible for converting and formatting the data in a log event. layouts determine how the data looks when it appears in a log entry.</p>

  </article>

<article>
    <h2>
      <a href="/2017/11/14/java-rest-api-with-spring-security/">
        Java - REST API with Spring Security
      </a>
    </h2>
    <time datetime="2017-11-14">14 November 2017</time>
    <p>Securing REST API with Spring Security.</p>
<p>http://www.baeldung.com/securing-a-restful-web-service-with-spring-security</p>

  </article>

<article>
    <h2>
      <a href="/2017/11/12/java-recording-java-flight-recording-in-java-9/">
        Java - Recording Java Flight Recording in Java 9
      </a>
    </h2>
    <time datetime="2017-11-12">12 November 2017</time>
    <p>Command line to enable Java Flight Recording feature in Java9 to measure JVM performance.<br />
[code lang="c"]<br />
$ java -XX:+UnlockCommercialFeatures -XX:StartFlightRecording=filename=recording.jfr AppName<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/11/11/java-jdk9-tool-jdeps-to-inspect-any-illegal-usage/">
        Java - JDK9 tool jdeps and jdeprscan to inspect any illegal usage
      </a>
    </h2>
    <time datetime="2017-11-11">11 November 2017</time>
    <p>The following jdeps command will inspect any illegal usage in My.class and provide alternative way to fix problems.<br />
This tool exists in JDK9.</p>
<p>[code lang="c"]<br />
$ jdeps -jdkinternals My.class<br />
[/code]</p>
<p>Static analysis tool detect the usage of deprecated APIs.<br />
[code lang="c"]<br />
$ jdeprscan -cp My<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/10/27/java-guidance-of-using-wildcard-in-generic/">
        Java - Guidance of using wildcard in generic
      </a>
    </h2>
    <time datetime="2017-10-27">27 October 2017</time>
    <p>The basic guidance of using wildcard in Java generic</p>
<p>https://docs.oracle.com/javase/tutorial/java/generics/wildcardGuidelines.html</p>

  </article>

<article>
    <h2>
      <a href="/2017/10/20/c11-monoid-functor-applicative-functor-and-monad/">
        C++11 - Monoid, Functor, Applicative Functor and Monad
      </a>
    </h2>
    <time datetime="2017-10-20">20 October 2017</time>
    <p>How CPP express Monoid, Functor, Applicative Functor and Monad.</p>
<p>The below documentation shows a good explanation.<br />
https://github.com/boostcon/cppnow_presentations_2016/blob/master/00_tuesday/monoids_monads_and_applicative_functors_repeated_software_patterns.pdf</p>

  </article>

<article>
    <h2>
      <a href="/2017/10/09/python-http-send-a-json-object-and-decoding-example/">
        Python - HTTP send a JSON object and decoding example
      </a>
    </h2>
    <time datetime="2017-10-09">09 October 2017</time>
    <p>[code lang="c"]<br />
import http.client<br />
import ssl<br />
import json<br />
import base64<br />
from collections import namedtuple<br />
from optparse import OptionParser</p>
<p>def load_input_data(input_path):<br />
    with open(input_path) as inputFile:<br />
        return inputFile.read()</p>
<p>def string_to_base64(s):<br />
    return base64.b64encode(s.encode('utf-8')).decode('utf-8')</p>
<p>def create_json_data(s, protocol):<br />
    class CustomRequestData(object):<br />
        def __init__(self):<br />
            self.version = &quot;0.1&quot;<br />
            self.description = &quot;test&quot;<br />
            self.enableDebug = True<br />
            self.protocol = protocol<br />
            self.requestPayload = string_to_base64(s)</p>
<p>    request = CustomRequestData()<br />
    return json.dumps(request.__dict__)</p>
<p>def create_http_header():<br />
    password = string_to_base64(&quot;user:password&quot;)<br />
    headers = {<br />
        'content-type': &quot;application/json&quot;,<br />
        'authorization': &quot;Basic &quot; + password<br />
    }</p>
<p>    return headers</p>
<p>def base64_to_string(b):<br />
    return base64.b64decode(b).decode('utf-8')</p>
<p>def _json_object_hook(d):<br />
    return namedtuple('X', d.keys())(*d.values())</p>
<p>def json_to_obj(data):<br />
    return json.loads(data, object_hook=_json_object_hook)</p>
<p>def connect_https_server(host_name):<br />
    port_number = 9992<br />
    host_end_point_address = host_name + &quot;:&quot; + str(port_number)<br />
    return http.client.HTTPSConnection(host_end_point_address, timeout = 5, context = ssl._create_unverified_context())</p>
<p>def send_request_save_response(host_name, protocol, input_edifact_path, output_file_path):<br />
    json_data = create_json_data(load_input_data(input_edifact_path), protocol)<br />
    conn = connect_https_server(host_name)<br />
    conn.request(&quot;POST&quot;, &quot;/endpoint_data&quot;, json_data, create_http_header())</p>
<p>    res = conn.getresponse()<br />
    data = res.read()</p>
<p>    result = json_to_obj(data.decode('utf-8'))</p>
<p>    file = open(output_file_path, 'w')<br />
    file.write(base64_to_string(result.respond_pay_load))<br />
    file.close()</p>
<p>def main():<br />
    parser = OptionParser()<br />
    parser.add_option(&quot;-s&quot;, &quot;--server&quot;,<br />
                      dest=&quot;server_name&quot;,<br />
                      default=&quot;localhost&quot;,<br />
                      help=&quot;server name of service&quot;)<br />
    parser.add_option(&quot;-p&quot;, &quot;--protocol&quot;,<br />
                      dest=&quot;protocol_type&quot;,<br />
                      default=&quot;tcp&quot;,<br />
                      help=&quot;protocol type&quot;)</p>
<p>    parser.add_option(&quot;-i&quot;, &quot;--input_path&quot;,<br />
                      dest=&quot;input_path&quot;,<br />
                      default=&quot;~/input.txt&quot;,<br />
                      help=&quot;input file path&quot;)</p>
<p>    parser.add_option(&quot;-o&quot;, &quot;--output_path&quot;,<br />
                      dest=&quot;output_path&quot;,<br />
                      default=&quot;~/output.txt&quot;,<br />
                      help=&quot;output file path&quot;)</p>
<p>    (options, args) = parser.parse_args()<br />
    send_request_save_response(options.server_name,<br />
                               options.protocol_type,<br />
                               options.input_path,<br />
                               options.output_path)</p>
<p>if __name__ == &quot;__main__&quot;:<br />
    main()</p>
<p>[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/10/07/scala-tilde-arrow-explanation/">
        Scala - ~&gt; [Tilde arrow] explanation
      </a>
    </h2>
    <time datetime="2017-10-07">07 October 2017</time>
    <p>"~&gt;" is a place holder for type.<br />
Main reason to use "~&gt;" is to make readable on type A goes to type B. This is possible because Scala allow to express in in-fix notation for pre-fix expression.</p>
<p>[code lang="c"]<br />
trait Order[~&gt;[_,_]] {<br />
   def sort[A,B](f: A ~&gt; B): B<br />
}<br />
[/code]</p>
<p>is equivalent to</p>
<p>[code lang="c"]<br />
trait Order[M[_,_]] {<br />
   def sort[A,B](f: M[A, B]): B<br />
}<br />
[/code]</p>
<p>https://stackoverflow.com/questions/10085951/scala-tilde-greater-than-operator</p>

  </article>

<article>
    <h2>
      <a href="/2017/09/30/java-covariance-contravariance-and-invariance/">
        Java - Covariance, Contravariance and Invariance
      </a>
    </h2>
    <time datetime="2017-09-30">30 September 2017</time>
    <p>https://stackoverflow.com/questions/8481301/covariance-invariance-and-contravariance-explained-in-plain-english</p>

  </article>

<article>
    <h2>
      <a href="/2017/09/30/scala-higher-kinded-type/">
        Scala - Higher Kinded Type
      </a>
    </h2>
    <time datetime="2017-09-30">30 September 2017</time>
    <p>https://stackoverflow.com/questions/6246719/what-is-a-higher-kinded-type-in-scala</p>

  </article>

<article>
    <h2>
      <a href="/2017/09/30/scala-by-name-parameters/">
        Scala - By Name Parameters
      </a>
    </h2>
    <time datetime="2017-09-30">30 September 2017</time>
    <p>Syntax: =&gt; A</p>
<p>[code land="c"]<br />
def ifElse[A](test: Boolean, whenTrue: =&gt; A, whenFalse: =&gt; A): A = test match {<br />
   case true =&gt; whenTrue<br />
   case false =&gt; whenFalse<br />
}</p>
<p>ifElse(1 == 1, println(&quot;true&quot;), println(&quot;false&quot;))<br />
[/code]</p>
<p>By Name parameter will be evaluated when called</p>

  </article>

<article>
    <h2>
      <a href="/2017/09/23/scala-conversion-from-for-comprehension-to-map-flatmap/">
        Scala - conversion from for-comprehension to map, flatMap
      </a>
    </h2>
    <time datetime="2017-09-23">23 September 2017</time>
    <p>[code lang="c"]</p>
<p>def getProduct(id: String): Try[Product]<br />
def getPrice(product: Product): Try[Price]<br />
def calculateProductPrice(product: Product, price: Price): Try[Price]</p>
<p>for {<br />
  product &lt;- getProduct(&quot;1234&quot;)<br />
  price &lt;- getPrice(product)<br />
  calculatedPrice &lt;- calculateProductPrice(product, price)<br />
  if (calculatedPrice &gt; 1000)<br />
} yield (product, calculatedPrice)</p>
<p>getProduct(&quot;1234&quot;).flatMap{ product =&gt;<br />
  getPrice(product).flatMap{ price =&gt;<br />
    calculateProductPrice(product, price).filter { p =&gt; p &gt; 1000 }<br />
      .map{ p =&gt; (product, p) }<br />
  }<br />
}</p>
<p>[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/09/23/fp-expression-vs-statement/">
        FP - expression vs statement
      </a>
    </h2>
    <time datetime="2017-09-23">23 September 2017</time>
    <p>Expression: by combining value and function, it will generate the value with some possible side-effect<br />
Statement: standalone unit of execution without returning anything. Normally it has side effect.</p>
<p>More information:<br />
https://fsharpforfunandprofit.com/posts/expressions-vs-statements/</p>

  </article>

<article>
    <h2>
      <a href="/2017/09/22/cassandra-import-snapshot-tablescolumn-family/">
        Cassandra - import snapshot tables(column family)
      </a>
    </h2>
    <time datetime="2017-09-22">22 September 2017</time>
    <p>The following command will import a table(column family) to the destination Cassandra node.</p>
<p>[code lang="c"]<br />
$ sstableloader -d [destination IP address] -p [port number] [table directory(keyspace/table name)]</p>
<p>[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/09/22/shell-tmux-configuration-example/">
        SHELL - tmux configuration example
      </a>
    </h2>
    <time datetime="2017-09-22">22 September 2017</time>
    <p>[code lang="c"]<br />
# Make mouse useful in copy mode<br />
# setw -g mode-mouse on</p>
<p># Allow mouse to select which pane to use<br />
# set -g mouse-select-pane on</p>
<p>set -g terminal-overrides 'xterm*:smcup@:rmcup@'</p>
<p># Set ability to capture on start and restore on exit window data when running an application<br />
setw -g alternate-screen on</p>
<p># Lower escape timing from 500ms to 50ms for quicker response to scroll-buffer access.<br />
set -s escape-time 50</p>
<p>set-option -g history-limit 5000</p>
<p>[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/09/04/functional-programming-simple-explaining-of-keyword/">
        Functional Programming - Simple Explaining of Keyword
      </a>
    </h2>
    <time datetime="2017-09-04">04 September 2017</time>
    <p>1. Functor -&gt; Mappable<br />
2. Currying -&gt; Currying<br />
3. Applicative -&gt; Applicative<br />
4. Monad -&gt; Chainable<br />
5. Monoid -&gt; Aggregatable<br />
6. Catamorphism -&gt; Collapsable</p>

  </article>

<article>
    <h2>
      <a href="/2017/09/04/monad-definition-of-monad-with-monoid/">
        Monad - Definition of Monad with Monoid
      </a>
    </h2>
    <time datetime="2017-09-04">04 September 2017</time>
    <p>Monad is a binding function to connect two functions where are different types between returning value and input argument. So Monad will allow to compose two incompatible functions.</p>
<p>A monad is just a monoid in the category of endofunctors.</p>
<p>This is because Monad has the following properties<br />
1. Closure<br />
2. Associative<br />
3. Identity</p>

  </article>

<article>
    <h2>
      <a href="/2017/09/04/monoid-simple-definition-of-monoid/">
        Monoid - Simple definition of Monoid
      </a>
    </h2>
    <time datetime="2017-09-04">04 September 2017</time>
    <p>1. Closure: Two same type pair operation results a new result with same type.<br />
2. Associative: Doesn't matter or operation order wit a pair.<br />
3. Identity: There is an identity can always result the original value.</p>
<p>Integer plus:<br />
[code lang="c"]<br />
1 + 2 = 3<br />
(1 + 2) + 3 = 1 + (2 + 3)<br />
1 + 0 = 1<br />
0 + 1 = 1<br />
[/code]</p>
<p>String concatenation:<br />
[code lang="c"]<br />
&quot;1&quot; + &quot;2&quot; = &quot;12&quot;<br />
&quot;1&quot; + (&quot;2&quot; + &quot;3&quot;) = (&quot;1&quot; + &quot;2&quot;) + &quot;3&quot;<br />
&quot;&quot; + &quot;1&quot; = &quot;1&quot;<br />
&quot;1&quot; + &quot;&quot; = &quot;1&quot;<br />
[/code]</p>
<p>Importance of Monoids:<br />
Once it is identified that provided data is Monoid, it can be parallelized very easily.<br />
For instance, we can calculate the number of total sold items in a day from million items.</p>
<p>Map/Reduce<br />
[code lang="c"]<br />
List.reduce(+)<br />
[/code]</p>
<p>Log file aggregation:<br />
From a giant log file, we can aggregate useful data such as what is the average request on Monday, Tuesday, ..., Sunday because String is Monoid.<br />
It is important to know that Metric data should be Monoid.</p>

  </article>

<article>
    <h2>
      <a href="/2017/08/27/mid-night-commander-short-cuts/">
        Mid night commander short cuts
      </a>
    </h2>
    <time datetime="2017-08-27">27 August 2017</time>
    <p>MC commands<br />
----- Esc -----<br />
Quick change directory: Esc + c<br />
Quick change directory history: Esc + c and then Esc + h<br />
Quick change directory previous entry: Esc + c and then Esc + p<br />
Command line history: Esc + h<br />
Command line previous command: Esc + p<br />
View change: Esc + t (each time you do this shortcut a new directory view will appear)<br />
Print current working directory in command line: Esc + a<br />
Switch between background command line and MC: Ctrl + o<br />
Search/Go to directory in active panel: Esc + s / Ctrl + s then start typing directory name<br />
Open same working directory in the inactive panel: Esc + i<br />
Open parent working directory in the inactive panel: Esc + o<br />
Go to top of directory in active pane: Esc + v / Esc + g<br />
Go to bottom of directory in active pane: Esc + j / Ctrl + c<br />
Go to previous directory: Esc + y<br />
Search pop-up: Esc + ?<br />
----- Ctrl -----<br />
Refresh active panel: Ctrl + r<br />
Selecting files and directories: Ctrl + t<br />
Switch active  inactive panels: Ctrl + i<br />
Switch active  inactive panels content: Ctrl + u<br />
Execute command / Open a directory: Ctrl + j<br />
----- F -----<br />
F1: help<br />
F2: user menu<br />
F3: read file / open directory<br />
F4: edit file<br />
F5: copy file or direcotry<br />
F6: move file or directory<br />
F7: create directory<br />
F8: delete file / directory<br />
F9: open menu bar<br />
F10: exit MC</p>
<p>----- Utils -----</p>
<p>next-page, C-v<br />
      move the selection bar one page down.</p>
<p>prev-page, Alt-v<br />
      move the selection bar one page up.</p>
<p>Alt-o  If the currently selected file is a directory, load that directory on the other panel and moves the selection to the next file. If the currently selected  file  is<br />
      not a directory, load the parent directory on the other panel and moves the selection to the next file.</p>
<p>Alt-i  make  the current directory of the current panel also the current directory of the other panel.  Put the other panel to the listing mode if needed.  If the current<br />
      panel is panelized, the other panel doesn't become panelized.</p>
<p>C-PageUp, C-PageDown<br />
      only when supported by the terminal: change to ".." and to the currently selected directory respectively.</p>
<p>Alt-y  moves to the previous directory in the history, equivalent to clicking the  with the mouse.</p>
<p>Alt-Shift-h, Alt-H<br />
      displays the directory history, equivalent to depressing the 'v' with the mouse.</p>
<p>Alt-t  toggle  the current display listing to show the next display listing mode.  With this it is possible to quickly switch to brief listing, long listing, user defined<br />
      listing mode, and back to the default.</p>
<p>C-\ (control-backslash)<br />
      show the directory hotlist and change to the selected directory.<br />
Ctrl-x, H: Add a current directory in the hotlist.</p>
<p>Alt-g, Alt-r, Alt-j<br />
      used to select the top file in a panel, the middle file and the bottom one, respectively.</p>
<p>Alt-s(Ctrl-s) search a file name in the current panel</p>
<p>Alt-Shift-?: Find a file in the sub directories.</p>

  </article>

<article>
    <h2>
      <a href="/2017/08/13/monad-simple-example-definition/">
        Monad - simple example definition
      </a>
    </h2>
    <time datetime="2017-08-13">13 August 2017</time>
    <p>Combines the following concept.</p>
<p>1. Functor<br />
 - Type constructor.<br />
 - Value lifting.<br />
 - class Functor f where<br />
   fmap :: (a -&gt; b) -&gt; (f a -&gt; f b)<br />
2. Bind<br />
 - Create a functor then unwrap -&gt; for example, flatMap in optional in Java8.</p>

  </article>

<article>
    <h2>
      <a href="/2017/08/13/c-14-optional-map-in-java-8-for-functional-programmingmonad/">
        C++14: Optional.map in Java 8 for functional programming
      </a>
    </h2>
    <time datetime="2017-08-13">13 August 2017</time>
    <p>Pseudo C++ example implementation of map function of optional in Java8 for functional style programming.</p>
<p>[code lang="c"]<br />
#include &lt;type_traits&gt;</p>
<p>template &lt;class T&gt;<br />
class Optional {<br />
private:<br />
    T value;<br />
    bool hasValue;</p>
<p>public:<br />
    Optional(T value) : value(value), hasValue(true) {</p>
<p>    }</p>
<p>public:<br />
    T getValue() const {<br />
        return value;<br />
    }</p>
<p>public:<br />
    template&lt;class F&gt;<br />
    auto map(F&amp;&amp; f) -&gt; Optional&lt;std::decay_t&lt;decltype(f(value))&gt;&gt; {<br />
        if (hasValue) {<br />
            return f(value);<br />
        }</p>
<p>        return decltype(f(value))();<br />
    }</p>
<p>};<br />
[/code]</p>
<p>Exampe<br />
[code lang="c"]    Optional&lt;int&gt; value(1);</p>
<p>    auto floatValue = value.map([](int value) -&gt; float {<br />
        return value * 10.0f;<br />
    });</p>
<p>    std::cout &lt;&lt; &quot;floatValue: &quot; &lt;&lt; floatValue.getValue() &lt;&lt; &quot;\n&quot;;</p>
<p>    auto stringValue = floatValue.map([](float value) -&gt; std::string {<br />
        return std::to_string(value);<br />
    });</p>
<p>    std::cout &lt;&lt; &quot;stringValue: &quot; &lt;&lt; stringValue.getValue() &lt;&lt; &quot;\n&quot;;</p>
<p>    auto finalValue = stringValue.map([](std::string const&amp; value) -&gt; int {<br />
        return std::stoi(value);<br />
    }).map([](int value) -&gt; double {<br />
        return (double)value;<br />
    }).map([](double value) -&gt; std::string {<br />
        std::to_string(value);<br />
    });</p>
<p>    std::cout &lt;&lt; &quot;finalValue: &quot; &lt;&lt; stringValue.getValue() &lt;&lt; &quot;\n&quot;;</p>
<p>[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/08/08/java-guava-api-to-sort-items-in-collection-with-ordering-compound-example/">
        Java - Guava API to sort items in collection with Ordering compound example
      </a>
    </h2>
    <time datetime="2017-08-08">08 August 2017</time>
    <p>[code lang="c"]<br />
Collection.sort(list,<br />
	Ordering.from((Comparator&lt;Item&gt;) Comparator.comparingInt(item -&gt; item.getId()))<br />
	.compound(Comparator.comparing(Item::getName)))<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/08/03/c17-new-features-in-c17/">
        C++17 - new features in C++17
      </a>
    </h2>
    <time datetime="2017-08-03">03 August 2017</time>
    <p>
Nice article for C++17 features.</p>
<p>http://www.bfilipek.com/2017/07/cpp17-details-simplifications.html</p>

  </article>

<article>
    <h2>
      <a href="/2017/07/16/docker-best-practice-to-refresh-on-building-image/">
        Docker - Best practice to refresh on building image
      </a>
    </h2>
    <time datetime="2017-07-16">16 July 2017</time>
    <p>Adding the date in docker file so that user can update the data for every change.</p>
<p>[code lang="c"]<br />
FROM<br />
ENV REFRESHED_AT 2017-1-1<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/07/16/docker-dhcp-network-address-in-ubuntu/">
        Docker - Subnet address in Ubuntu
      </a>
    </h2>
    <time datetime="2017-07-16">16 July 2017</time>
    <p>[code lang="c"]<br />
$ sudo vi /etc/default/docker<br />
[/code]</p>
<p>modify the following section.<br />
DOCKER_OPTS="--bip 192.168.1.1/24"</p>

  </article>

<article>
    <h2>
      <a href="/2017/07/11/java-spring-boot-with-jax-rs/">
        Java - Spring boot with JAX-RS
      </a>
    </h2>
    <time datetime="2017-07-11">11 July 2017</time>
    <p>Enabling Spring boot to use JAX-RS</p>
<p>https://dzone.com/articles/using-jax-rs-with-spring-boot-instead-of-mvc</p>
<p>http://blog.codeleak.pl/2015/01/getting-started-with-jersey-and-spring.html</p>

  </article>

<article>
    <h2>
      <a href="/2017/07/04/java-9-useful-commands-to-inspect-module/">
        Java 9 - useful commands to inspect Module
      </a>
    </h2>
    <time datetime="2017-07-04">04 July 2017</time>
    <p>List modules<br />
[code lang="c"]<br />
$ java --list-modules<br />
$ java --list-modules java.base<br />
[/code]</p>
<p>Diagnostic module dependencies<br />
[code lang="c"]<br />
$ java -Xdiag:resolver -p mods [module name]/[class package path]<br />
$ jar --file [jar path] --print-module-descriptor<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/07/02/java-8-general-practice-using-optional/">
        Java 8 - general practice using Optional
      </a>
    </h2>
    <time datetime="2017-07-02">02 July 2017</time>
    <p>0. Never, ever use null for an Optional variable.<br />
1. Optional should be only used as a return value.<br />
   : never use it for a field in Class and a method parameter.<br />
     never use it in collections</p>
<p>2. Never try to call .get() method on an Optional.<br />
   : if it is a situation to get a value, ifPresent, map and orElse() family can solve this problem .</p>
<p>3. Remember Optional is not Serializable.</p>
<p>Note)<br />
Java 9 will introduce the following new method<br />
[code lang="c"]<br />
Optional.stream()<br />
Optional.ifPresentOrElse()<br />
Optional.or()<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/06/15/docker-useful-command/">
        Docker - useful command
      </a>
    </h2>
    <time datetime="2017-06-15">15 June 2017</time>
    <p>[code lang="c"]<br />
$ docker log &lt;container id&gt; // show logs<br />
$ docker port &lt;container id&gt; // show port mapping<br />
$ docker inspect &lt;container id&gt; // inspect container settings<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/06/14/java-task-polling-example-with-java-8/">
        Java - Task polling example with Java 8
      </a>
    </h2>
    <time datetime="2017-06-14">14 June 2017</time>
    <p>[code lang="c"]<br />
public void completionService(ExecutorService executor) {<br />
    CompletionService&lt;CustomTaskResult&gt; completionService =<br />
        new ExecutorCompletionService&lt;CustomTaskResult&gt;(executor);</p>
<p>    completionService.submit(() =&gt; {<br />
        // to something<br />
    });</p>
<p>    Future&lt;CustomTaskResult&gt; future = null<br />
    while ((future = completionService.poll()) != null) {</p>
<p>    	// do something</p>
<p>    }<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/06/09/angular-2-book/">
        Angular 2 book
      </a>
    </h2>
    <time datetime="2017-06-09">09 June 2017</time>
    <p>Angular 2 Development with TypeScript</p>
<p>https://www.manning.com/books/angular-2-development-with-typescript</p>

  </article>

<article>
    <h2>
      <a href="/2017/06/06/rake-useful-command-line-options/">
        Rake - useful command line options
      </a>
    </h2>
    <time datetime="2017-06-06">06 June 2017</time>
    <p>[code lang="c"]<br />
$ rake -P<br />
$ rake -T #display description<br />
$ rake -T buy #display contains &quot;buy&quot; in name<br />
$ rake -W buy #display path of task &quot;buy&quot;<br />
$ rake -D<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/06/06/python-rest-api-example-for-self-certificated-ssl-connection/">
        Python - REST API call example with a self certificated SSL connection
      </a>
    </h2>
    <time datetime="2017-06-06">06 June 2017</time>
    <p>[code lang="c"]<br />
import time<br />
import http.client<br />
import ssl<br />
import json</p>
<p>conn = http.client.HTTPSConnection(&quot;localhost:9990&quot;, timeout=5, context=ssl._create_unverified_context())</p>
<p>csvFileDat = &quot;&quot;<br />
with open(&quot;c:\\tmp\\test.csv&quot;) as inputFile:<br />
    csvFileDat = inputFile.read()</p>
<p>headers = {<br />
    'content-type': &quot;text/plain&quot;,<br />
    'authorization': &quot;Basic base64encoded&quot;<br />
}</p>
<p>sumTotal = 0</p>
<p>repeatCount = 100<br />
for idx in range(repeatCount):<br />
    start = time.time()</p>
<p>    conn.request(&quot;PUT&quot;, &quot;/rest/import&quot;, csvFileDat, headers)</p>
<p>    res = conn.getresponse()<br />
    data = res.read()</p>
<p>    end = time.time()<br />
    elapse = end - start<br />
    sumTotal += elapse</p>
<p>    result = json.loads(data.decode('utf-8'))</p>
<p>print(&quot;Total time: {}, Avg: {}&quot;.format(sumTotal, sumTotal / repeatCount))</p>
<p>[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/06/03/c-14-co-routine-with-boost-library/">
        C++ 14 - co-routine with boost library
      </a>
    </h2>
    <time datetime="2017-06-03">03 June 2017</time>
    <p>It is worth to read the following blog if interested in C++ co-routine support.</p>
<p>https://blogs.msdn.microsoft.com/vcblog/2017/05/19/using-c-coroutines-with-boost-c-libraries/</p>

  </article>

<article>
    <h2>
      <a href="/2017/05/30/linux-useful-git-booklinux-inside/">
        Linux - Useful Git book(Linux inside)
      </a>
    </h2>
    <time datetime="2017-05-30">30 May 2017</time>
    <p>https://www.gitbook.com/book/0xax/linux-insides/details</p>

  </article>

<article>
    <h2>
      <a href="/2017/05/08/java-java-application-monitoring-tools/">
        Java - Java application monitoring tools
      </a>
    </h2>
    <time datetime="2017-05-08">08 May 2017</time>
    <p>jcmd: Prints basic class, thread, and VM information for a Java process<br />
Example)<br />
[code lang="c"]<br />
% jcmd &lt;process_id&gt; VM.uptime<br />
% jcmd &lt;process_id&gt; VM.system_properties<br />
% jcmd &lt;process_id&gt; VM.version<br />
% jcmd &lt;process_id&gt; VM.command_line<br />
% jcmd &lt;process_id&gt; VM.flags [-all]<br />
% jcmd &lt;process_id&gt; Thread.print<br />
% jcmd &lt;process_id&gt; GC.run // force to run full GC<br />
% jcmd &lt;process_id&gt; GC.heap_dump /path/to/heap_dump.hprof // heap dump</p>
<p>[/code]</p>
<p>jconsole: Provides a graphical view of JVM activities, including thread usage, class usage, and GC activities<br />
jhat: Reads and helps analyze memory heap dumps. This is a postprocessing utility<br />
jmap: Provides heap dumps and other information about JVM memory usage<br />
jinfo: Provides visibility into the system properties of the JVM, and allows some system properties to be set dynamically<br />
[code lang="c"]<br />
% jinfo -flags &lt;process_id&gt;<br />
% jinfo -flag PrintGCDetails &lt;process_id&gt;<br />
[/code]</p>
<p>jstack: Dumps the stacks of a Java process</p>
<p>jstat: Provides information about GC and class-loading activities<br />
[code lang="c"]<br />
% jstat -compiler &lt;process_id&gt;<br />
% jstat -printcompilation &lt;process_id&gt; &lt;duration(ms)&gt;<br />
[/code]</p>
<p>jvisualvm: A GUI tool to monitor a JVM, profile a running application, and analyze JVM heap dumps </p>
<p>jmap:<br />
[code lang="c"]<br />
% jmap -clstats : print out information about class loaders(Java 8)<br />
% jmap -permstat : print out information about class loaders(Java 7)<br />
% jmap -dump:live,file=/path/to/heap_dump.hprof &lt;process_id&gt; // heap dump<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/05/08/linux-useful-commands-to-inspect-performance-utilization/">
        Linux - useful commands to inspect performance utilization
      </a>
    </h2>
    <time datetime="2017-05-08">08 May 2017</time>
    <p>Memory utilization<br />
[code lang="C"]<br />
vmstat 1<br />
[/cpde]</p>
<p>Disk utilization<br />
[code lang=&quot;C&quot;]<br />
iostat -xm 5<br />
[/code]</p>
<p>Network utilization tool<br />
[code lang="C"]<br />
nicstat<br />
[/code]</p>
<p>Network connection status<br />
[code lang="C"]<br />
netstat<br />
[/code]</p>
<p>Note, Windows has the following equivalent command for above purpose<br />
[code lang="C"]<br />
typeperf<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/04/29/java-recommended-gc-log-options-for-java-8-and-java-9/">
        Java - Recommended GC log options for Java 8 and Java 9
      </a>
    </h2>
    <time datetime="2017-04-29">29 April 2017</time>
    <p>Java 8<br />
-XX:+PrintGCDetails<br />
-XX:+PrintReferenceGC<br />
-XX:+PrintTenuringDistribution<br />
-Xloggc:<br />
-XX:+PrintGCTimeStamps</p>
<p>Java 9<br />
-Xlog:gc*<br />
     ,gc+ref=debug<br />
     ,gc+age=trace<br />
     :file=<br />
     :tags,uptime</p>
<p>Video:<br />
https://www.infoq.com/presentations/java-9-gc?utm_source=presentations_about_GarbageCollection&amp;utm_medium=link&amp;utm_campaign=GarbageCollection</p>

  </article>

<article>
    <h2>
      <a href="/2017/04/29/java-garbage-collectors/">
        Java - Garbage collectors
      </a>
    </h2>
    <time datetime="2017-04-29">29 April 2017</time>
    <p>1. Serial<br />
-XX:+UseSerialGC JVM</p>
<p>2. Parallel<br />
default</p>
<p>3. CMS(Current Markup Sweep)<br />
-XX:+USeParNewGC</p>
<p>4. G1<br />
–XX:+UseG1GC</p>
<p>Note: Java8 and G1 collector can optimize the string intern with the following option<br />
-XX:+UseStringDeduplicationJVM</p>
<p>More information regarding G1:<br />
https://www.infoq.com/articles/G1-One-Garbage-Collector-To-Rule-Them-All</p>

  </article>

<article>
    <h2>
      <a href="/2017/04/11/java-zoneddatetime-formatter-for-iso-8601/">
        Java - ZonedDateTime formatter for ISO-8601
      </a>
    </h2>
    <time datetime="2017-04-11">11 April 2017</time>
    <p>Parse example<br />
[code lnag="c"]<br />
DateTimeFormatterBuilder builder = new DateTimeFormatterBuilder();<br />
DateTimeFormatter formatter = builder<br />
        .parseCaseInsensitive()<br />
        .append(DateTimeFormatter.ISO_LOCAL_DATE_TIME)<br />
        .appendOffsetId()<br />
        .toFormatter();</p>
<p>ZonedDateTime.parse(&quot;2015-08-18T00:00+01:00&quot;, formatter);<br />
[/code]</p>
<p>toString example<br />
[code lang="c"]<br />
DateTimeFormatterBuilder builder = new DateTimeFormatterBuilder();<br />
DateTimeFormatter formatter = builder<br />
        .parseCaseInsensitive()<br />
        .append(DateTimeFormatter.ISO_LOCAL_DATE_TIME)<br />
        .appendOffsetId()<br />
        .toFormatter();</p>
<p>ZonedDateTime zoneTime = new ZonedDatTime();<br />
String date = zoneTime.format(formatter);<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/04/06/java-heap-dump-utilities/">
        Java - heap dump utilities
      </a>
    </h2>
    <time datetime="2017-04-06">06 April 2017</time>
    <p>Heap histogram<br />
[code lang="c"]<br />
jmap -histo [pid]<br />
[/code]</p>
<p>Heap usage<br />
[code lang="c"]<br />
jmap -heap [pid]<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/03/13/java-an-example-code-to-extract-mime-type-from-base64-string-of-an-image/">
        Java - an example code to extract mime type from base64 string of an image
      </a>
    </h2>
    <time datetime="2017-03-13">13 March 2017</time>
    <p>[code lang="c"]</p>
<p>    private boolean isMatch(byte[] pattern, byte[] data) {<br />
        if (pattern.length &lt;= data.length) {<br />
            for (int idx = 0; idx &lt; pattern.length; ++idx) {<br />
                if (pattern[idx] != data[idx])<br />
                    return false;<br />
            }<br />
            return true;<br />
        }</p>
<p>        return false;<br />
    }</p>
<p>    private String getImageType(byte[] data) {<br />
//        filetype    magic number(hex)<br />
//        jpg         FF D8 FF<br />
//        gif         47 49 46 38<br />
//        png         89 50 4E 47 0D 0A 1A 0A<br />
//        bmp         42 4D<br />
//        tiff(LE)    49 49 2A 00<br />
//        tiff(BE)    4D 4D 00 2A</p>
<p>        final byte[] pngPattern = new byte[] { (byte)0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A};<br />
        final byte[] jpgPattern = new byte[] { (byte)0xFF, (byte)0xD8, (byte)0xFF};<br />
        final byte[] gifPattern = new byte[] { 0x47, 0x49, 0x46, 0x38};<br />
        final byte[] bmpPattern = new byte[] { 0x42, 0x4D };<br />
        final byte[] tiffLEPattern = new byte[] { 0x49, 0x49, 0x2A, 0x00};<br />
        final byte[] tiffBEPattern = new byte[] { 0x4D, 0x4D, 0x00, 0x2A};<br />
        if (isMatch(pngPattern, data))<br />
            return &quot;image/png&quot;;</p>
<p>        if (isMatch(jpgPattern, data))<br />
            return &quot;image/jpg&quot;;</p>
<p>        if (isMatch(gifPattern, data))<br />
            return &quot;image/gif&quot;;</p>
<p>        if (isMatch(bmpPattern, data))<br />
            return &quot;image/bmp&quot;;</p>
<p>        if (isMatch(tiffLEPattern, data))<br />
            return &quot;image/tif&quot;;</p>
<p>        if (isMatch(tiffBEPattern, data))<br />
            return &quot;image/tif&quot;;</p>
<p>        return &quot;image/png&quot;;<br />
    }</p>
<p>String imageDataBytes = base64String.substring(base64String.indexOf(&quot;,&quot;) + 1);<br />
                        byte[] bytes = Base64.decodeBase64(imageDataBytes);<br />
                        String imageMimeType = getImageType(bytes);</p>
<p>[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/03/12/c-measuring-c-execution-time-library/">
        C++ - Measuring execution time library in function level
      </a>
    </h2>
    <time datetime="2017-03-12">12 March 2017</time>
    <p>Interesting tool on measuring the execution time of C++ application in function level.</p>
<p>https://github.com/namhyung/uftrace</p>

  </article>

<article>
    <h2>
      <a href="/2017/02/26/cassandra-resuming-pagination/">
        Cassandra - Resuming pagination
      </a>
    </h2>
    <time datetime="2017-02-26">26 February 2017</time>
    <p>Cassandra provides the page state information and it can be reused to get next iteration.</p>
<p>[code lang="c"]<br />
Statement stmt = QueryBuilder<br />
                    .select()<br />
                    .all()<br />
                    .from(&quot;users&quot;)<br />
                    .where(eq(&quot;email&quot;, emailUpper));</p>
<p>ResultSet resultSet = getSession().execute(stmt);<br />
PagingState pagingState = resultSet.getExecutionInfo().getPagingState();<br />
[/code]</p>
<p>Then it can be serialized in below way<br />
[code lang="c"]<br />
String savedStringState = pagingState.toString();<br />
byte[] savedBytesState = pagingState.toBytes();<br />
[/code]</p>
<p>It can be reconstructed and resume the query as shown following example.<br />
[code lang="c"]<br />
PagingState pagingState = PagingState.fromString(string);</p>
<p>Statement stmt = QueryBuilder<br />
                    .select()<br />
                    .all()<br />
                    .from(&quot;users&quot;)<br />
                    .where(eq(&quot;email&quot;, emailUpper));</p>
<p>PagingState pagingState = resultSet.getExecutionInfo().getPagingState();</p>
<p>// restore state from the saved string<br />
PagingState pagingState = PagingState.fromString(savedStringState);<br />
stmt.setPagingState(pagingState);<br />
ResultSet resultSet = getSession().execute(stmt);<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/02/24/gradle-java-project-setup-with-gradle/">
        Gradle - Java project setup with Gradle
      </a>
    </h2>
    <time datetime="2017-02-24">24 February 2017</time>
    <p>https://rominirani.com/announcing-gradle-tutorial-series-5fd134223bf8#.kzn6qpx5i</p>

  </article>

<article>
    <h2>
      <a href="/2017/02/23/jvm-cucumber-setting-up-example/">
        JVM-Cucumber: Setting up example
      </a>
    </h2>
    <time datetime="2017-02-23">23 February 2017</time>
    <p>http://qza.github.io/tutorial/development/2015/10/17/bdd-in-java-with-junit-spring-and-cucumber-jvm/</p>
<p>https://github.com/qza/bdd-cucumber-jvm-spring</p>

  </article>

<article>
    <h2>
      <a href="/2017/02/18/grunt-proxy-setup-to-avoid-cors/">
        Grunt - proxy setup to avoid CORS
      </a>
    </h2>
    <time datetime="2017-02-18">18 February 2017</time>
    <p>http://www.hierax.org/2014/01/grunt-proxy-setup-for-yeoman.html</p>

  </article>

<article>
    <h2>
      <a href="/2017/02/15/functional-programming-referential-transparency/">
        Functional Programming - Referential transparency
      </a>
    </h2>
    <time datetime="2017-02-15">15 February 2017</time>
    <p>an expression can be replaced with its result</p>

  </article>

<article>
    <h2>
      <a href="/2017/02/10/c-transforming-c-asynchronous-function-to-c-future/">
        C++ - Transforming C asynchronous function to C++ future
      </a>
    </h2>
    <time datetime="2017-02-10">10 February 2017</time>
    <p>C API definition to read data from a file in asynchronous way.<br />
[code lang="c"]<br />
void async_read_completed_callback(void* pUserData, char cont* pBuffer, int size);<br />
void async_read_data(char const* pFilePath, void(*callback)(void* pUserData, char cont* pBuffer, int size));<br />
[/code]</p>
<p>C++ implementation by using future<br />
[code lang="c"]</p>
<p>void read_data_callback_wrapper(void* pUserData, char const* pBuffer, int size) {<br />
    std::promise&lt;std::vector&lt;char&gt;&gt; promiseVar = std::promise&lt;std::vector&lt;char&gt;&gt; (reinterpret_cast&lt;std::promise&lt;std::vector&lt;char&gt;&gt;*&gt;(user_data));<br />
    std::vector&lt;char&gt; data;<br />
    for (int idx = 0; idx &lt; size; ++idx) {<br />
         data.push_back(pBuffer[idx]);<br />
    }<br />
    promiseVar.set_value(data);<br />
}</p>
<p>std::future&lt;std::vector&lt;char&gt;&gt; read_data_in_cpp(char const* pPath) {<br />
    std::unique_ptr&lt;std::promise&lt;std::vector&lt;char&gt;&gt;&gt; promiseVar =<br />
        std::make_unique&lt;std::promise&lt;std::vector&lt;char&gt;&gt;&gt;();</p>
<p>    std::future&lt;std::vector&lt;char&gt;&gt; futureRes = promiseVar-&gt;get_future();</p>
<p>    async_read_data(pPath, reinterpret_cast&lt;void*&gt;(promiseVar.get()), read_data_callback_wrapper);<br />
    promiseVar.release();<br />
    return futureRes;<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2017/02/04/c-functional-programming/">
        C++ - Functional programming
      </a>
    </h2>
    <time datetime="2017-02-04">04 February 2017</time>
    <p>Functional programming with C++</p>
<p>https://vittorioromeo.info/index/blog/cpp17_curry.html</p>

  </article>

<article>
    <h2>
      <a href="/2017/01/31/web-font-sizing-unit-rem/">
        Web - Font sizing unit rem
      </a>
    </h2>
    <time datetime="2017-01-31">31 January 2017</time>
    <p>It is worth to read about font size unit of rem other than pixel.<br />
https://snook.ca/archives/html_and_css/font-size-with-rem</p>

  </article>

<article>
    <h2>
      <a href="/2017/01/04/gulp-connect-proxy-example/">
        Gulp - connect proxy example
      </a>
    </h2>
    <time datetime="2017-01-04">04 January 2017</time>
    <p>It will avoid CORS problem during development.</p>
<p>[code lang="c"]<br />
var Proxy = require('gulp-connect-proxy');<br />
...<br />
// A local web server for dev convenience<br />
gulp.task(&quot;server&quot;, function() {<br />
	connect.server({<br />
	  root: &quot;./dist&quot;,<br />
	  port: 22532,<br />
          middleware: function (connect, opt) {<br />
	      opt.route = '/proxy';<br />
	      var proxy = new Proxy(opt);<br />
	      return [proxy];<br />
	  }<br />
	});<br />
});<br />
[/code]</p>
<p>Example of calling API<br />
[code lang="c"]<br />
return $http.get(</p>
<p>  'http://localhost:22532/proxy/external.host.com:8080/api/myservice/myid', </p>
<p>  { params: { metricSelector: &quot;hello2&quot;} }<br />
);<br />
[/code]</p>
<p>Gulp connect web site</p>
<p>https://www.npmjs.com/package/gulp-connect-proxy</p>

  </article>

<article>
    <h2>
      <a href="/2016/12/08/c-anonymous-namespace/">
        C++ - Anonymous namespace
      </a>
    </h2>
    <time datetime="2016-12-08">08 December 2016</time>
    <p>The main reason of using anonymous namespace in C++ is to localize declaration in translation unit.<br />
The compiler will choose the unique name for unnamed namespace so that it can guarantee that there are no conflict on using same name declaration such as class or enum etc.</p>
<p>Normally, static keyword is used in C to avoid name clashing problem but unnamed namespace in C++ will make it a lot easier.</p>

  </article>

<article>
    <h2>
      <a href="/2016/11/30/spring-afterpropertiesset-needed-to-be-called/">
        Spring - afterPropertiesSet needed to be called
      </a>
    </h2>
    <time datetime="2016-11-30">30 November 2016</time>
    <p>The static initializer block is only executed when the class is loaded by the class loader. There is no instance of that class at that moment and you will only be able to access class level (static) variables at that point and not instance variables.</p>
<p>The non-static initializer block is when the object is constructed but before any properties are injected. The non-static initializer block is actually copied to to constructor.</p>
<p>The Java compiler copies initializer blocks into every constructor. Therefore, this approach can be used to share a block of code between multiple constructors.<br />
See also Static Initialization Blocks and http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html</p>
<p>The afterPropertiesSet or @PostConstruct annotated method is called after an instance of class is created and all the properties have been set. For instance if you would like to preload some data that can be done in this method as all the dependencies have been set.</p>
<p>If you only have mandatory dependencies you might be better of using constructor injection and instead of using InitializingBean or @PostConstruct put the initializing logic in the constructor. This will only work if all the dependencies are injected through the constructor, if you have optional dependencies set by set methods then you have no choice but to use @PostConstruct or InitializingBean.</p>

  </article>

<article>
    <h2>
      <a href="/2016/11/29/cassandra-allow-filtering-example/">
        Cassandra - Allow Filtering example
      </a>
    </h2>
    <time datetime="2016-11-29">29 November 2016</time>
    <p>[code lang="c"]<br />
create table User(<br />
    email text,<br />
    name text,<br />
    desc text,<br />
    user_id uuid<br />
    PRIMARY KEY((email), name, user_id)<br />
) WITH CLUSTERING ORDER BY (name DESC, user_id ASC);<br />
[/code]</p>
<p>Allow Filtering can only work with the clustering key.</p>
<p>[code lang="c"]<br />
select * from user where name = 'Test' allow filtering;<br />
[/code]</p>
<p>Some useful cassandra commands<br />
[code lang="c"]<br />
/&gt;list users limit 3;<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2016/11/26/cassandra-partition-key-clustering-key/">
        Cassandra - Partition Key, Clustering key
      </a>
    </h2>
    <time datetime="2016-11-26">26 November 2016</time>
    <p>Partition Key: It will be hashed and saved across nodes.<br />
Clustering Key: It will group in the same partition key.</p>
<p>PRIMARY KEY((partion key), clustering key)<br />
Example)<br />
create table User(<br />
    email text,<br />
    name text,<br />
    desc text,<br />
    user_id uuid<br />
    PRIMARY KEY((email), name, user_id)<br />
) WITH CLUSTERING ORDER BY (name DESC, user_id ASC);</p>
<p>Primary Key: email<br />
Clustering Key: name, user_id</p>
<p>Reason of adding a user_id is to ensure the uniqueness of primary key.</p>

  </article>

<article>
    <h2>
      <a href="/2016/11/22/spring-adding-a-bean-in-code/">
        Spring - adding a bean in code
      </a>
    </h2>
    <time datetime="2016-11-22">22 November 2016</time>
    <p>[code lang="c"]<br />
    AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();<br />
    Set&lt;int&gt; sets = new Set&lt;int&gt;();<br />
    ctx.getBeanFactory().registerSingleton(&quot;test&quot;, set);<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2016/11/22/cassandra-some-articles-about-cassandra-data-modelling/">
        Cassandra - some articles about Cassandra data modelling
      </a>
    </h2>
    <time datetime="2016-11-22">22 November 2016</time>
    <p>http://intellidzine.blogspot.co.uk/2013/11/cassandra-data-modelling-tables.html<br />
http://intellidzine.blogspot.com/2014/01/cassandra-data-modelling-primary-keys.html</p>

  </article>

<article>
    <h2>
      <a href="/2016/10/26/git-revert-to-specific-commit-point/">
        Git - revert to specific commit point
      </a>
    </h2>
    <time datetime="2016-10-26">26 October 2016</time>
    <p>[code lang="c"]<br />
git revert --no-commit 0766c053..HEAD<br />
git commit<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2016/10/25/yeoman-augularjs-with-gulp/">
        Yeoman - AugularJS with Gulp
      </a>
    </h2>
    <time datetime="2016-10-25">25 October 2016</time>
    <p>[code lang="c"]<br />
npm install -g generator-gulp-angular<br />
yo gulp-angular<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2016/10/21/yeoman-angular-generation-error-with-jit-grunt-plugin-for-the-karma-task-not-found/">
        Yeoman - Angular generation error with "jit-grunt: Plugin for the "karma" task not found"
      </a>
    </h2>
    <time datetime="2016-10-21">21 October 2016</time>
    <p>Please run the following commands, it will help<br />
[code lang="c"]<br />
npm install grunt-karma karma karma-phantomjs-launcher karma-jasmine jasmine-core phantomjs-prebuilt --save-dev<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2016/10/04/java-generating-a-self-signed-public-key/">
        Java - generating a self-signed public key
      </a>
    </h2>
    <time datetime="2016-10-04">04 October 2016</time>
    <p>[code lang="c"]<br />
1. Generate self-signed public key<br />
$JAVA_HOME/bin/keytool -genkey -alias test_alias --keyalg RSA -keystore test_key.jks<br />
-keysize 2048 -dname &quot;CN=Test, OU=PAV, O=PROS, L=HOU, ST=TX, C=US&quot; -keypass test_password<br />
-storepass test_password</p>
<p>2. Generate a certificate signature request with a self-signed public key<br />
$JAVA_HOME/bin/keytool -certreq -alias certalias -file test_cert_req.csr -keystore test_key.jks<br />
-storepass test_password</p>
<p>3. Importing a root certificate files<br />
$JAVA_HOME/bin/keytool -import -v -trustcacerts -alias ExternalCARoot -file Test_CARoot.crt<br />
-keystore test_key.jks -storepass test_password<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2016/09/26/git-diff-and-merge-tool-with-intellij-idea/">
        Git diff and merge tool with Intellij Idea
      </a>
    </h2>
    <time datetime="2016-09-26">26 September 2016</time>
    <p>Windows<br />
[code lang="c"]<br />
[merge]<br />
    tool = intellij<br />
[mergetool &quot;intellij&quot;]<br />
    cmd = cmd.exe //c &quot;\&quot;c:/Program Files (x86)/JetBrains/IntelliJ IDEA Community Edition 2016.2.4/bin/idea.bat\&quot; merge \&quot;$LOCAL\&quot; \&quot;$REMOTE\&quot; \&quot;$BASE\&quot; \&quot;$MERGED\&quot;&quot;<br />
    trustExitCode = true</p>
<p>[diff]<br />
    tool = intellij<br />
[difftool &quot;intellij&quot;]<br />
    cmd = cmd.exe //c &quot;\&quot;c:/Program Files (x86)/JetBrains/IntelliJ IDEA Community Edition 2016.2.4/bin/idea.bat\&quot; diff \&quot;$LOCAL\&quot; \&quot;$REMOTE\&quot;&quot;<br />
[/code]</p>
<p>Mac<br />
[code lang="c"]<br />
merge]<br />
    tool = intellij<br />
[mergetool &quot;intellij&quot;]<br />
    cmd = /Applications/IntelliJ\ IDEA.app/Contents/MacOS/idea merge $(cd $(dirname &quot;$LOCAL&quot;) &amp;&amp; pwd)/$(basename &quot;$LOCAL&quot;) $(cd $(dirname &quot;$REMOTE&quot;) &amp;&amp; pwd)/$(basename &quot;$REMOTE&quot;) $(cd $(dirname &quot;$BASE&quot;) &amp;&amp; pwd)/$(basename &quot;$BASE&quot;) $(cd $(dirname &quot;$MERGED&quot;) &amp;&amp; pwd)/$(basename &quot;$MERGED&quot;)<br />
    trustExitCode = true<br />
[diff]<br />
    tool = intellij<br />
[difftool &quot;intellij&quot;]<br />
    cmd = /Applications/IntelliJ\ IDEA.app/Contents/MacOS/idea diff $(cd $(dirname &quot;$LOCAL&quot;) &amp;&amp; pwd)/$(basename &quot;$LOCAL&quot;) $(cd $(dirname &quot;$REMOTE&quot;) &amp;&amp; pwd)/$(basename &quot;$REMOTE&quot;)<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2016/09/07/c-exception-handling/">
        C++ - Exception handling
      </a>
    </h2>
    <time datetime="2016-09-07">07 September 2016</time>
    <p>The following article provides a good way of using Exceptions in C++</p>
<p>http://www.acodersjourney.com/2016/08/top-15-c-exception-handling-mistakes-avoid/</p>

  </article>

<article>
    <h2>
      <a href="/2016/08/22/c-ef-lifetime-of-dbcontext/">
        C# - EF lifetime of DBContext
      </a>
    </h2>
    <time datetime="2016-08-22">22 August 2016</time>
    <p>The following article has a useful information on handling the lifetime of DBContext in EF.</p>
<p>http://mehdi.me/ambient-dbcontext-in-ef6/</p>

  </article>

<article>
    <h2>
      <a href="/2016/08/20/java-exceptions/">
        Java - exceptions
      </a>
    </h2>
    <time datetime="2016-08-20">20 August 2016</time>
    <p>Java has 3 different types of exceptions.</p>
<p>1. Checked exception<br />
- Use this exception for a case which can be recoverable.<br />
2. Runtime exception<br />
- Use this exception to indicate the programming error.<br />
3. Errors</p>

  </article>

<article>
    <h2>
      <a href="/2016/08/20/java-illegal-generic-array/">
        Java - illegal generic array
      </a>
    </h2>
    <time datetime="2016-08-20">20 August 2016</time>
    <p>The following code will have a compile error<br />
[code lang="c"]<br />
new List&lt;E&gt;[];<br />
[/code]</p>
<p>The reason is that it is not a typesafe. It will violate the generic type system in Java</p>

  </article>

<article>
    <h2>
      <a href="/2016/07/25/c11-explain-sfinae-with-example-of-enable_if/">
        C++11 - explain SFINAE with example of enable_if
      </a>
    </h2>
    <time datetime="2016-07-25">25 July 2016</time>
    <p>[code lang="c"]<br />
template &lt;boolB, typename T&gt;<br />
class enable_if {};</p>
<p>template &lt;typename T&gt;<br />
class enable_if&lt;true, T&gt; {typedef T type};</p>
<p>[/code]</p>
<p>Above code will be only generated by compiler only if the first boolean type is true, if not code generation will not happen due to the rule of SFINAE.</p>

  </article>

<article>
    <h2>
      <a href="/2016/07/18/c11-enum-class-with-underlying-type/">
        C++11- enum class with underlying type
      </a>
    </h2>
    <time datetime="2016-07-18">18 July 2016</time>
    <p>C++11 allows us to specify the underlying type for enum class as shown below. If specified value is not in the range of the underlying type, compiler can catch error as well.</p>
<p>[code lang="c"]<br />
enum class Color : unsigned char<br />
{<br />
    Red = 0x01,<br />
    Green = 0x02,<br />
    Blue = 0x04<br />
}<br />
[/code]</p>
<p>Getting underlying type from enum type<br />
[code lang="c"]<br />
std::underlying_type&lt;Color&gt;::type value;<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2016/06/12/git-submodule/">
        Git - submodule
      </a>
    </h2>
    <time datetime="2016-06-12">12 June 2016</time>
    <p>Sometimes, a project can depends on another project which is in different git repository. Git can provide a way to maintain this dependencies by a command called submodule.</p>
<p>https://git-scm.com/book/en/v2/Git-Tools-Submodules</p>

  </article>

<article>
    <h2>
      <a href="/2016/05/29/c-unit-test-framework-doctest/">
        C++ - Unit test framework "doctest"
      </a>
    </h2>
    <time datetime="2016-05-29">29 May 2016</time>
    <p>This C++ testing framework is very light and only requires a header file to include. Above all it will allow to have testing code in production code.</p>
<p>https://github.com/onqtam/doctest</p>

  </article>

<article>
    <h2>
      <a href="/2016/05/20/c-loop-optimization-with-sentinel/">
        C++ - loop optimization with Sentinel
      </a>
    </h2>
    <time datetime="2016-05-20">20 May 2016</time>
    <p>It is possible to make the loop faster by using an guarded value so it doesn't need to check the variable validation or extran comparing.</p>
<p>https://en.wikipedia.org/wiki/Sentinel_node</p>

  </article>

<article>
    <h2>
      <a href="/2016/05/06/java-unmarshalling-partial-xml-in-xml-schema/">
        Java - unmarshalling partial XML in XML schema
      </a>
    </h2>
    <time datetime="2016-05-06">06 May 2016</time>
    <p>[code lang="c"]</p>
<p>public class XmlPartialMarshaller&lt;T&gt; {<br />
    private static final Logger LOGGER = LoggerFactory.getLogger(XmlPartialMarshaller.class);<br />
    private DocumentBuilder documentBuilder;<br />
    private DocumentBuilderFactory documentBuilderFactory;<br />
    private Binder&lt;Node&gt; binderPartialXml;<br />
    private JAXBContext contextPartialXml;</p>
<p>    private Class partialSchemaClass;</p>
<p>    public XmlPartialMarshaller(Class&lt;T&gt; partialSchemaClass) {<br />
        this.partialSchemaClass = partialSchemaClass;</p>
<p>        try {<br />
            this.documentBuilderFactory = DocumentBuilderFactory.newInstance();<br />
            this.documentBuilder = documentBuilderFactory.newDocumentBuilder();</p>
<p>            this.contextPartialXml = JAXBContext.newInstance(partialSchemaClass);<br />
            this.binderPartialXml = contextPartialXml.createBinder();<br />
        } catch (Exception e) {<br />
            LOGGER.error(e.getMessage(), e);<br />
        }<br />
    }</p>
<p>    public T marshalPartialXml(String xml) {<br />
       try {<br />
            InputStream inputStream = null;<br />
            try {<br />
                inputStream = IOUtils.toInputStream(xml);<br />
                Document document = documentBuilder.parse(inputStream);<br />
                Node xmlNode = document.getDocumentElement();<br />
                JAXBElement&lt;T&gt; element = binderPartialXml.unmarshal(xmlNode,<br />
                        partialSchemaClass);</p>
<p>                return element.getValue();<br />
            } catch (Exception e) {<br />
                LOGGER.error(e.getMessage(), e);<br />
            } finally {<br />
                if (inputStream != null)<br />
                    inputStream.close();<br />
            }<br />
        } catch (Exception e) {<br />
            LOGGER.error(e.getMessage(), e);<br />
        }</p>
<p>        return null;<br />
    }<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2016/05/04/etc-copying-a-file-with-putty-scp-example-to-linux-machine/">
        Etc - copying a file with putty scp example to linux machine
      </a>
    </h2>
    <time datetime="2016-05-04">04 May 2016</time>
    <p>pscp.exe -i [ppk_path] [file_to_copy] root@[ip]:[dest_path]</p>
<p>ex)<br />
pscp.exe -i c:\test\id_rsa.ppk c:\temp\test.txt root@[fe80::217:88ff:fe20:4d1]:/tmp</p>

  </article>

<article>
    <h2>
      <a href="/2016/05/04/etc-screen-capturing-with-gif-animation/">
        Etc - Screen capturing with GIF animation
      </a>
    </h2>
    <time datetime="2016-05-04">04 May 2016</time>
    <p>Quiet amazing free software on capturing screen shot with GIF animation</p>
<p>http://screentogif.codeplex.com/</p>

  </article>

<article>
    <h2>
      <a href="/2016/04/26/java-example-of-specifying-multiple-constraints-in-generic/">
        Java - example of specifying multiple constraints in Generic
      </a>
    </h2>
    <time datetime="2016-04-26">26 April 2016</time>
    <p>[code lang="c"]<br />
public interface Operation {<br />
}</p>
<p>public class enum TestEnum implements Operation {<br />
}</p>
<p>public class Test {<br />
    private static &lt;T extends Enum&lt;T&gt; &amp; Operation&gt; void test(Class&lt;T&gt; opSet, double x, double y) {<br />
        for (Operation op : opSet.getEnumConstants())<br />
            System.out.printf(&quot;%f %s %f = %f%n&quot;,    x, op, y, op.apply(x, y));<br />
    }<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2016/04/12/c11-varidic-template-example/">
        C++11 - Variadic template example
      </a>
    </h2>
    <time datetime="2016-04-12">12 April 2016</time>
    <p>[code lang="c"]<br />
#include &lt;iostream&gt;<br />
#include &lt;sstream&gt;<br />
#include &lt;vector&gt;</p>
<p>std::vector&lt;std::string&gt; to_string()<br />
{<br />
	return{};<br />
}</p>
<p>template &lt;typename ARG1, typename ... ARGS&gt;<br />
std::vector&lt;std::string&gt; to_string(ARG1 arg, ARGS... args)<br />
{<br />
	std::vector&lt;std::string&gt; result;</p>
<p>	std::stringstream str;<br />
	str &lt;&lt; arg;</p>
<p>	result.push_back(str.str());</p>
<p>	auto others = to_string(args...);</p>
<p>	result.insert(result.end(), others.begin(), others.end());</p>
<p>	return result;<br />
}</p>
<p>int main()<br />
{<br />
	auto res = to_string(1, &quot;test&quot;);</p>
<p>	for (auto&amp; item : res) {<br />
		std::cout &lt;&lt; item &lt;&lt; std::endl;<br />
	}<br />
    return 0;<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2016/04/04/java-nested-class-and-static-class/">
        Java - nested class and static class
      </a>
    </h2>
    <time datetime="2016-04-04">04 April 2016</time>
    <p>Java allows us to define a class within another class. Such a class is called a nested class. The class which enclosed nested class is known as Outer class. In java, we can’t make Top level class static. Only nested classes can be static.</p>
<p>What are the differences between static and non-static nested classes?<br />
Following are major differences between static nested class and non-static nested class. Non-static nested class is also called Inner Class.</p>
<p>1) Nested static class doesn’t need reference of Outer class, but Non-static nested class or Inner class requires Outer class reference.</p>
<p>2) Inner class(or non-static nested class) can access both static and non-static members of Outer class. A static class cannot access non-static members of the Outer class. It can access only static members of Outer class.</p>
<p>3) An instance of Inner class cannot be created without an instance of outer class and an Inner class can reference data and methods defined in Outer class in which it nests, so we don’t need to pass reference of an object to the constructor of the Inner class. For this reason Inner classes can make program simple and concise.</p>

  </article>

<article>
    <h2>
      <a href="/2016/03/27/improving-responsiveness/">
        Improving responsiveness
      </a>
    </h2>
    <time datetime="2016-03-27">27 March 2016</time>
    <p>Normally in order to improve the responsiveness of application, there are two areas that should be considered in modern memory machine architecture.</p>
<p>1. reduce latency<br />
- concurrency(shared memory architecture, distribution memory architecture)<br />
- optimizing cache fault for a shared memory machine architecture.</p>
<p>2. improve performance<br />
 - using better algorithm(Big O method)</p>

  </article>

<article>
    <h2>
      <a href="/2016/03/22/c-simple-thread-example-of-a-string-message-processor/">
        C++ - Simple thread example of a string message processor
      </a>
    </h2>
    <time datetime="2016-03-22">22 March 2016</time>
    <p>[code lang="c"]<br />
class StringMessageProcessor<br />
{<br />
public:<br />
	StringMessageProcessor()<br />
	{<br />
		m_exit = false;<br />
		m_messageArrived = false;<br />
	}</p>
<p>	~StringMessageProcessor()<br />
	{<br />
		m_thread.join();<br />
	}</p>
<p>	void SetHandler(std::function&lt;void(std::string const&amp;)&gt; msgHandler)<br />
	{<br />
		std::unique_lock&lt;std::mutex&gt; lock(m_condvarMutex);<br />
		m_msgHandler = msgHandler;<br />
	}</p>
<p>	void Start()<br />
	{<br />
		boost::thread thread([this] {</p>
<p>			while (!m_exit)<br />
			{<br />
				std::unique_lock&lt;std::mutex&gt; lock(m_condvarMutex);<br />
				m_condvar.wait(lock, [this] { return m_exit || m_messageArrived;});</p>
<p>				if (!m_exit)<br />
				{<br />
                                     std::vector&lt;Item&gt; data;</p>
<p>                                     auto queueSize = m_msgQueue.size();<br />
                                     while (m_msgQueue.size() &gt; 0) {<br />
                                         data.push_back(m_msgQueue.front());<br />
                                         m_msgQueue.pop();<br />
                                     }</p>
<p>                                     lock.unlock();</p>
<p>                                     for (auto const&amp; msg: data) {<br />
                                         m_processor-&gt;processItem(msg, queueSize);<br />
                                     }<br />
				}<br />
			}<br />
		});</p>
<p>		m_thread.swap(thread);<br />
	}</p>
<p>	void Stop()<br />
	{<br />
		{<br />
			std::lock_guard&lt;std::mutex&gt; lk(m_condvarMutex);<br />
			m_exit = true;<br />
		}<br />
		m_condvar.notify_all();<br />
	}</p>
<p>	bool PushMessage(std::string const&amp; msg)<br />
	{<br />
		std::lock_guard&lt;std::mutex&gt; lk(m_condvarMutex);<br />
		m_msgQueue.push(msg);<br />
		m_messageArrived = true;<br />
		m_condvar.notify_one();<br />
		return true;<br />
	}</p>
<p>private:<br />
	boost::thread m_thread;<br />
	std::mutex m_condvarMutex;<br />
	std::condition_variable m_condvar;<br />
	bool m_exit;<br />
	bool m_messageArrived;<br />
	std::queue&lt;std::string&gt; m_msgQueue;<br />
	std::function&lt;void(std::string const&amp;)&gt; m_msgHandler;<br />
};</p>
<p>[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2016/03/19/http-free-certificate/">
        HTTP - Free HTTPS certificate
      </a>
    </h2>
    <time datetime="2016-03-19">19 March 2016</time>
    <p>You can get free 3 month certificate from the following URL.<br />
https://letsencrypt.org/</p>

  </article>

<article>
    <h2>
      <a href="/2016/02/25/c11-understanding-sfinae/">
        C++11 - Understanding SFINAE
      </a>
    </h2>
    <time datetime="2016-02-25">25 February 2016</time>
    <p>SFINAE(substution failure is not an error) is hard to understand at glance but following article explains the concept of SFINAE eaiser way with a clear example.</p>
<p>http://www.bfilipek.com/2016/02/notes-on-c-sfinae.html</p>

  </article>

<article>
    <h2>
      <a href="/2016/02/15/rxjava-execute-the-custom-operation-when-unsubscribing/">
        RxJava - execute the custom operation when unsubscribing
      </a>
    </h2>
    <time datetime="2016-02-15">15 February 2016</time>
    <p>The following example will show how to perform the custom operation when unsubscribing</p>
<p>[code lang="c"]<br />
Service service = new Service();<br />
Observable&lt;String&gt; ob = Observable.create(subscriber -&gt; {<br />
          subscriber.onNext(&quot;test&quot;);<br />
          service.register();</p>
<p>          subscriber.add(Subscriptions.create(() -&gt; {<br />
          // do custom operation<br />
          service.unregister();<br />
      }));<br />
    }<br />
);<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2016/02/12/rx-difference-hot-and-cold-observer/">
        Rx - Difference Hot and Cold observer
      </a>
    </h2>
    <time datetime="2016-02-12">12 February 2016</time>
    <p>Hot: If observerable start emitting items as soon as created, it is called "Hot"<br />
Cold: Observerable will start to emit items when it is subscribed. </p>

  </article>

<article>
    <h2>
      <a href="/2016/02/03/c-build-boost-library-with-mingw/">
        C++ - Build boost library with MinGW
      </a>
    </h2>
    <time datetime="2016-02-03">03 February 2016</time>
    <p>1. build bjam with boostrap.bat<br />
Example)<br />
bootstrap gcc</p>
<p>2. run the following command<br />
b2 toolset=gcc --build-type=complete architecture=x86 address-model=32   --prefix=h:\develop_lib\BOOST --libdir=h:\develop_lib\BOOST\lib\1_59\x86-mingw   install</p>
<p>3. for 64 bits, you should install MinGW 64bits then change address-model from 32 to 64.<br />
Example)<br />
b2 toolset=gcc --build-type=complete architecture=x86 address-model=64   --prefix=h:\develop_lib\BOOST --libdir=h:\develope_lib\BOOST\lib\1_59\x64-mingw   install</p>

  </article>

<article>
    <h2>
      <a href="/2016/01/05/yeoman-integration-with-maven-build/">
        Yeoman - integration with Maven build
      </a>
    </h2>
    <time datetime="2016-01-05">05 January 2016</time>
    <p>https://github.com/trecloux/yeoman-maven-plugin</p>

  </article>

<article>
    <h2>
      <a href="/2015/12/23/jose-how-to-encrypt-your-web-api/">
        JOSE - How to encrypt your web api
      </a>
    </h2>
    <time datetime="2015-12-23">23 December 2015</time>
    <p>General article<br />
https://jwt.io/introduction/</p>
<p>http://odino.org/securing-your-http-api-with-javascript-object-signing-and-encryption/</p>
<p>Open source<br />
https://bitbucket.org/b_c/jose4j/wiki/Home</p>

  </article>

<article>
    <h2>
      <a href="/2015/12/21/authentification-and-authorisation/">
        Authentification and authorisation
      </a>
    </h2>
    <time datetime="2015-12-21">21 December 2015</time>
    <p>http://www.axiomatics.com/blog/entry/authentication-vs-authorization-part-2-saml-and-oauth-2.html</p>

  </article>

<article>
    <h2>
      <a href="/2015/12/21/apachecxf-oauth-2-example/">
        ApacheCXF - oauth 2 example
      </a>
    </h2>
    <time datetime="2015-12-21">21 December 2015</time>
    <p>https://github.com/apache/cxf.git</p>
<p>https://github.com/Talend/tesb-rt-se/tree/master/examples/cxf/jaxrs-oauth2</p>

  </article>

<article>
    <h2>
      <a href="/2015/11/25/java-java-concurrency-in-practice/">
        Java - Java concurrency in practice
      </a>
    </h2>
    <time datetime="2015-11-25">25 November 2015</time>
    <p>Recommended book for Java concurrency</p>
<p>https://github.com/HackathonHackers/programming-ebooks/blob/master/Java/Java%20Concurrency%20in%20Practice.pdf</p>

  </article>

<article>
    <h2>
      <a href="/2015/11/14/java-rxjava/">
        Java - RxJava
      </a>
    </h2>
    <time datetime="2015-11-14">14 November 2015</time>
    <p>Recommended reading for RxJava</p>
<p>http://akarnokd.blogspot.com.au/2015/06/subjects-part-1.html</p>
<p>Another worth reading article about Rx</p>
<p>https://gist.github.com/staltz/868e7e9bc2a7b8c1f754</p>

  </article>

<article>
    <h2>
      <a href="/2015/11/11/java-predefined-funtional-interface/">
        Java - Predefined funtional interface
      </a>
    </h2>
    <time datetime="2015-11-11">11 November 2015</time>
    <p>1. Void return and zero paramter<br />
Use Runnable</p>
<p>[code lang="c"]<br />
void runTask(Runnable task) {<br />
  task.run();<br />
}</p>
<p>runTask(()-&gt; {<br />
   // do something<br />
});</p>
<p>[/code]</p>
<p>2. Return value and zero paramter<br />
Use Supply</p>
<p>[code lang="c"]<br />
public &lt;T&gt; T runTask(Supply&lt;T&gt; task) {<br />
  return task.get();<br />
}</p>
<p>Integer res = runTask&lt;Integer&gt;(()-&gt; {<br />
   Integer value;<br />
   // do something<br />
   return value;<br />
});<br />
[/code]</p>
<p>3. Return void and 1 parameter<br />
Use Consumer</p>
<p>[code lang="c"]<br />
public &lt;T&gt; void runTask(Consumer&lt;T&gt; task, T value) {<br />
  return task.accept(value);<br />
}</p>
<p>Integer value;<br />
runTask&lt;Integer&gt;((Integer x)-&gt; {<br />
   // do something<br />
}, value);</p>
<p>[/code]</p>
<p>4. Generic case<br />
Use Action0, Action1, Action2 ...</p>

  </article>

<article>
    <h2>
      <a href="/2015/11/09/c11-explanation-about-rvalue-reference-in-c11/">
        C++11 - Explanation about RValue reference in C++11
      </a>
    </h2>
    <time datetime="2015-11-09">09 November 2015</time>
    <p>http://thbecker.net/articles/rvalue_references/section_01.html</p>

  </article>

<article>
    <h2>
      <a href="/2015/11/09/c-sfina-examplesubstitution-failure-is-not-an-error/">
        C++ - SFINA example(Substitution Failure Is Not An error)
      </a>
    </h2>
    <time datetime="2015-11-09">09 November 2015</time>
    <p>How C++11 can help to make C++ meta programming easier</p>
<p>http://jguegant.github.io/blogs/tech/sfinae-introduction.html</p>

  </article>

<article>
    <h2>
      <a href="/2015/10/29/git-getting-started-git-flow/">
        Git - Getting started git-flow
      </a>
    </h2>
    <time datetime="2015-10-29">29 October 2015</time>
    <p>The following URL has a nice article about git flow</p>
<p>http://yakiloo.com/getting-started-git-flow/</p>

  </article>

<article>
    <h2>
      <a href="/2015/10/07/java-try-with-resources/">
        Java - Try with resources
      </a>
    </h2>
    <time datetime="2015-10-07">07 October 2015</time>
    <p>From Java7, it introduced the mechanism to release the resource automatically as C# does with using statement. In C#, you can use the using statement to release resource allocated by object which derives from IDisposable.</p>
<p>[code lang="c"]<br />
using (var socket = new Socket(...)) {</p>
<p>}<br />
[/code]</p>
<p>Java7 can achieve same result with the following syntax. However it cannot use for any object, it can only support the instance which implements java.lang.AutoCloseable as C# does.</p>
<p>[code lang="c"]<br />
try (<br />
    File file = new FileInputStream(...);<br />
    File output = new FileInputStream(...);<br />
) {<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2015/09/18/c-a-nice-example-measuring-funtion-execution-time-with-c11/">
        C++ - A nice example measuring funtion execution time with C++11
      </a>
    </h2>
    <time datetime="2015-09-18">18 September 2015</time>
    <p>[code lang="c"]</p>
<p>#include &lt;iostream&gt;<br />
#include &lt;chrono&gt;</p>
<p>template&lt;typename TimeT = std::chrono::milliseconds&gt;<br />
struct measure<br />
{<br />
    template&lt;typename F, typename ...Args&gt;<br />
    static typename TimeT::rep execution(F&amp;&amp; func, Args&amp;&amp;... args)<br />
    {<br />
        auto start = std::chrono::system_clock::now();<br />
        std::forward&lt;decltype(func)&gt;(func)(std::forward&lt;Args&gt;(args)...);<br />
        auto duration = std::chrono::duration_cast&lt; TimeT&gt;<br />
                            (std::chrono::system_clock::now() - start);<br />
        return duration.count();<br />
    }<br />
};</p>
<p>int main() {<br />
    std::cout &lt;&lt; measure&lt;&gt;::execution(functor(dummy)) &lt;&lt; std::endl;<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2015/09/17/java-initialize-web-app-with-springframework/">
        Java - Initializing the Web App with Springframework
      </a>
    </h2>
    <time datetime="2015-09-17">17 September 2015</time>
    <p>In order to initialize the Web application with Springframework, it is required to detect when context has been initialized. You can achieve it by defining a subclass with deriving ApplicationListener</p>
<p>[code lang="c"]<br />
public class ApplicationListenerBean implements<br />
		ApplicationListener&lt;ContextRefreshedEvent&gt; {<br />
	@Override<br />
	public void onApplicationEvent(ContextRefreshedEvent contextEvent) {<br />
             // add initialization code<br />
	}<br />
}<br />
[/code]</p>
<p>Then it is required to define this class in application context xml file as shown below example<br />
[code lang="c"]<br />
	&lt;bean id=&quot;applicationContextListener&quot; class=&quot;com.demo.app.ApplicationListenerBean&quot;&gt;<br />
	&lt;/bean&gt;<br />
[/code]</p>
<p>If you would like to capture the ApplicationContext in Springframework, you can achieve by subclassing ApplicationContextAware<br />
[code lang="c"]<br />
public class ApplicationContextProvider implements ApplicationContextAware {<br />
	private static ApplicationContext ctx = null;</p>
<p>	@Override<br />
	public void setApplicationContext(ApplicationContext ctx)<br />
			throws BeansException {<br />
		this.ctx = ctx;<br />
	}<br />
	public static ApplicationContext getApplicationContext()<br />
			throws BeansException {<br />
		return ctx;<br />
	}<br />
}</p>
<p>// in xml<br />
	&lt;bean id=&quot;applicationContextProvider&quot; class=&quot;com.demo.app.ApplicationContextProvider&quot;/&gt;<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2015/09/16/apachecxf-an-example-of-web-xml/">
        ApacheCXF - an example of web.xml
      </a>
    </h2>
    <time datetime="2015-09-16">16 September 2015</time>
    <p>[code lang="c"]<br />
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;<br />
&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;<br />
	xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;<br />
	xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;<br />
	id=&quot;WebApp_ID&quot; version=&quot;2.5&quot;&gt;</p>
<p>	&lt;context-param&gt;<br />
		&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;<br />
		&lt;param-value&gt;classpath:config/applicationContext.xml&lt;/param-value&gt;<br />
	&lt;/context-param&gt;</p>
<p>	&lt;display-name&gt;Application Name&lt;/display-name&gt;</p>
<p>	&lt;welcome-file-list&gt;<br />
		&lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;<br />
	&lt;/welcome-file-list&gt;</p>
<p>	&lt;servlet&gt;<br />
		&lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;<br />
		&lt;servlet-class&gt;org.apache.cxf.transport.servlet.CXFServlet&lt;/servlet-class&gt;<br />
	&lt;/servlet&gt;</p>
<p>	&lt;servlet-mapping&gt;<br />
		&lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;<br />
		&lt;url-pattern&gt;/services/*&lt;/url-pattern&gt;<br />
	&lt;/servlet-mapping&gt;</p>
<p>	&lt;listener&gt;<br />
		&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;<br />
	&lt;/listener&gt;</p>
<p>&lt;/web-app&gt;</p>
<p>[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2015/09/09/java-apachecxf-web-socket-example/">
        Java - ApacheCXF web socket example
      </a>
    </h2>
    <time datetime="2015-09-09">09 September 2015</time>
    <p>Here is the git hub url for an example of ApacheCXF with websocket.</p>
<p>https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples/jax_rs/websocket</p>
<p>Stack overflow</p>
<p>http://stackoverflow.com/questions/26021026/cxf-websocket-configurtion</p>

  </article>

<article>
    <h2>
      <a href="/2015/08/18/tomcat-setting-for-max-http-header-size/">
        Tomcat - setting for max HTTP header size
      </a>
    </h2>
    <time datetime="2015-08-18">18 August 2015</time>
    <p>you can specify the max HTTP header size for Tomcap by modifying the file in conf/server.xml as shown below.</p>
<p>This example set max HTTP header size 24KB(24576)<br />
[code lang="c"]<br />
    &lt;Connector connectionTimeout=&quot;20000&quot; port=&quot;9080&quot; protocol=&quot;HTTP/1.1&quot; redirectPort=&quot;9443&quot; maxHttpHeaderSize=&quot;24576&quot;/&gt;<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2015/08/17/java-loading-a-resource-file-in-unit-test-code/">
        Java - loading a resource file in unit test code
      </a>
    </h2>
    <time datetime="2015-08-17">17 August 2015</time>
    <p>[code lang="c"]<br />
    String xml = getResourceString(&quot;/test_files/TestProperties.xml&quot;);</p>
<p>    private String getResourceString(String resourcePath) {</p>
<p>        InputStream inputStream = null;<br />
        try {<br />
            URL url = getClass().getResource(resourcePath);<br />
            File file = new File(url.toURI());<br />
            boolean exist = file.exists();<br />
            org.junit.Assert.assertTrue(exist);</p>
<p>            inputStream = this.getClass().getResourceAsStream(resourcePath);<br />
            String xmlResult = IOUtils.toString(inputStream, &quot;UTF-8&quot;);</p>
<p>            return xmlResult;</p>
<p>        } catch (Exception e) {<br />
            logger.error(e.getMessage(), e);<br />
        } finally {<br />
            try {<br />
                if (inputStream != null)<br />
                    inputStream.close();<br />
            } catch (Exception ex) {<br />
                logger.error(ex.getMessage(), ex);<br />
            }<br />
        }</p>
<p>        return null;<br />
    }<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2015/08/12/maven-log4j-setting-for-maven-with-springframework/">
        Maven - Log4j setting for maven with Springframework
      </a>
    </h2>
    <time datetime="2015-08-12">12 August 2015</time>
    <p>In order to enable log4j settings in maven compilation, log4j.properties file should be in the test/resources directory.</p>
<p>Sample unit test class<br />
[code lang="c"]<br />
@RunWith(SpringJUnit4ClassRunner.class)<br />
@ContextConfiguration(locations = &quot;classpath*:config/test-applicationContext.xml&quot;)<br />
public class SimpleTestExampleTest extends AbstractJUnit4SpringContextTests {<br />
    @Before<br />
    public void setUp() throws Exception {<br />
        logger.debug(&quot;Executing before&quot;);<br />
    }<br />
}<br />
[/code]</p>
<p>Sample log4j.properties file<br />
[code lang="c"]<br />
log4j.rootLogger=ERROR, A1</p>
<p># A1 is set to be a ConsoleAppender.<br />
log4j.appender.A1=org.apache.log4j.ConsoleAppender</p>
<p># A1 uses PatternLayout.<br />
log4j.appender.A1.layout=org.apache.log4j.PatternLayout<br />
log4j.appender.A1.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n</p>
<p># An alternative logging format:<br />
# log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1} - %m%n<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2015/08/10/c-actor-framework-c/">
        C++ - Actor framework for C++
      </a>
    </h2>
    <time datetime="2015-08-10">10 August 2015</time>
    <p>Nice C++ implementation for Actor framework.<br />
https://github.com/actor-framework/actor-framework.git</p>
<p>Git branch for vs2015 is remotes/origin/topic/visual_studio.</p>
<p>CMake option that I found so far to compile with vs2015 are below.<br />
-DCAF_BUILD_STATIC_ONLY:BOOL=yes<br />
-DCAF_NO_BENCHMARKS:BOOL=yes<br />
-DCAF_NO_EXAMPLES:BOOL=no<br />
-DCAF_NO_MEM_MANAGEMENT:BOOL=yes<br />
-DCAF_NO_OPENCL:BOOL=yes<br />
-DCAF_NO_RIAC:BOOL=yes</p>
<p>More details can be found from the following link.<br />
https://github.com/actor-framework/actor-framework/issues/302</p>

  </article>

<article>
    <h2>
      <a href="/2015/08/05/com-generating-manifest-file-for-com-isolationregistry-free/">
        COM - Generating a manifest file for COM isolation(registry free)
      </a>
    </h2>
    <time datetime="2015-08-05">05 August 2015</time>
    <p>In order to load COM dll without searching from system registry key, application should include the manifest file in resource so that the application can create an instance of COM object from the specified file directly.</p>
<p>After including this manifest file in your compilation(actually, linking time), it will create the Manifest resouce in your executable application.</p>
<p>.NET COM dll example<br />
[code lang="c"]<br />
mt.exe -tlb:MyComNet.dll  -dll:MyComNet.dll -dependency -out:c:\temp\MyComNet.manifest<br />
[/code]</p>
<p>C++ COM dll example<br />
[code lang="c"]<br />
mt.exe -tlb:MyComCpp.dll  -dll:MyComCpp.dll -out:c:\temp\MyComCpp.manifest<br />
[/code]</p>
<p>If application depends on two dll(one from .NET and one from C++), you can merge the result in one manifest file. After merging, you can verify the result with the following command.</p>
<p>[code lang="c"]<br />
mt -manifest Merged.manifest -validate_manifest<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2015/07/28/windows-performance-count-select-process-with-process-id/">
        Windows Performance count - select process with process id
      </a>
    </h2>
    <time datetime="2015-07-28">28 July 2015</time>
    <p>If you have process having same name, it will be really difficult to collect performance counter. Here is a solution for this by modifying the registry key.</p>
<p>Click Start, click Run, type regedit, and then click OK.<br />
Locate and then click the following registry subkey:</p>
<p>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\PerfProc\Performance<br />
On the Edit menu, click New, and then click DWORD Value.<br />
Right-click New Value #1, click Rename, and then type ProcessNameFormat to name the new value.<br />
Right-click ProcessNameFormat, and then click Modify.<br />
In the Data value box, type one of the following values, and then click OK:</p>
<p>    1: Disables PID data. This value is the default value.<br />
    2: Enables PID data.</p>
<p>Exit Registry Editor. </p>

  </article>

<article>
    <h2>
      <a href="/2015/07/21/java-maven-build-plugin-configuration-to-create-a-jar-package/">
        Java - Maven build plugin configuration to create a jar package
      </a>
    </h2>
    <time datetime="2015-07-21">21 July 2015</time>
    <p>Make a package to be runnable including all dependent libs in a jar file</p>
<p>[code lang="c"]</p>
<p>    &lt;build&gt;<br />
        &lt;plugins&gt;<br />
            &lt;plugin&gt;<br />
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<br />
                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;<br />
                &lt;version&gt;2.6&lt;/version&gt;<br />
                &lt;executions&gt;<br />
                    &lt;execution&gt;<br />
                        &lt;phase&gt;package&lt;/phase&gt;<br />
                        &lt;goals&gt;<br />
                            &lt;goal&gt;single&lt;/goal&gt;<br />
                        &lt;/goals&gt;<br />
                    &lt;/execution&gt;<br />
                &lt;/executions&gt;</p>
<p>                &lt;configuration&gt;<br />
                    &lt;archive&gt;<br />
                        &lt;manifest&gt;<br />
                            &lt;mainClass&gt;com.app.demo.MainApp&lt;/mainClass&gt;<br />
                        &lt;/manifest&gt;<br />
                    &lt;/archive&gt;<br />
                    &lt;descriptorRefs&gt;<br />
                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;<br />
                    &lt;/descriptorRefs&gt;</p>
<p>                &lt;/configuration&gt;<br />
            &lt;/plugin&gt;<br />
        &lt;/plugins&gt;<br />
    &lt;/build&gt;</p>
<p>[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2015/07/10/c-boost-associative-containers-to-maixmize-the-performance-for-shared-memory-architecture-machine/">
        C++ - Boost associative containers to maixmize the performance for shared memory architecture machine
      </a>
    </h2>
    <time datetime="2015-07-10">10 July 2015</time>
    <p>Boost associative containers can increase the performance of your C++ applications for modern CPU architecture(shared memory architecutre) by minimizing cache misses.</p>
<p>flat_(multi)map/set associative containers<br />
http://www.boost.org/doc/libs/1_58_0/doc/html/container/non_standard_containers.html#container.non_standard_containers.flat_xxx</p>

  </article>

<article>
    <h2>
      <a href="/2015/07/02/java-iterate-all-class-path-with-spring-framework/">
        Java - iterate all classpath with spring framework
      </a>
    </h2>
    <time datetime="2015-07-02">02 July 2015</time>
    <p>The following code will iterate all available classpath in the application.</p>
<p>[code lang="c"]<br />
try {<br />
    Enumeration&lt;URL&gt; resources = ApplicationContextProvider.getApplicationContext().getClassLoader().getResources(&quot;&quot;);<br />
    while (resources.hasMoreElements()) {<br />
        URL url = resources.nextElement();<br />
        String path = url.getPath();<br />
    }<br />
} catch (Exception e) {</p>
<p>}<br />
[/code]</p>
<p>Iterate classpath for the jar application<br />
[code lang="c"]<br />
    private static void iterateClassPath() {<br />
        try {<br />
            Enumeration&lt;URL&gt; resources = MainApp.class.getClassLoader().getResources(&quot;&quot;);<br />
            while (resources.hasMoreElements()) {<br />
                URL url = resources.nextElement();<br />
                String path = url.getPath();<br />
                System.out.println(&quot;Classpath: &quot; + path);<br />
            }<br />
        } catch (Exception e) {<br />
            System.out.println(&quot;Failed to get class path: &quot; + e.getMessage());<br />
        }<br />
    }<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2015/07/01/maven-java-class-naming-convention-for-unit-testing/">
        Maven - Java class naming convention for unit testing
      </a>
    </h2>
    <time datetime="2015-07-01">01 July 2015</time>
    <p>Unit test Java classes should follow the following naming convention otherwise Maven can not find any unit testing class</p>
<p>    Test*<br />
    *Test<br />
    *TestCase</p>
<p>If you don't like to follow the above convention, you can configure Maven Surefire Plugin to use other patterns.</p>
<p>http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html</p>

  </article>

<article>
    <h2>
      <a href="/2015/06/29/firefox-generate-vs-project-for-firefox-project/">
        Firefox - generate VS project files for Firefox source code
      </a>
    </h2>
    <time datetime="2015-06-29">29 June 2015</time>
    <p>[code lang="c"]<br />
mach build-backend --backend=VisualStudio<br />
[/code]</p>
<p>It can be found from the following path.</p>
<p>[root source]\mozilla-central\obj-i686-pc-mingw32\msvc\mozilla.sln</p>

  </article>

<article>
    <h2>
      <a href="/2015/05/15/x64-visual-c-compiler-calling-convention-for-x64/">
        x64 - Visual C++ compiler calling convention for x64
      </a>
    </h2>
    <time datetime="2015-05-15">15 May 2015</time>
    <p>VC++ compiler is trying to utilize the 16 registers in x64 CPU which is 8bytes capacity. Due to this reason, first 4 parameters will be placed in registers but they should fit to 1, 2, 4, 8 bytes, if not it must be called by reference</p>
<p>For the details, please find the following link.</p>
<p>https://msdn.microsoft.com/en-us/library/ms235286.aspx</p>

  </article>

<article>
    <h2>
      <a href="/2015/04/29/tomat-install-as-a-tomcat-in-windows/">
        Tomat - install as a service for Windows
      </a>
    </h2>
    <time datetime="2015-04-29">29 April 2015</time>
    <p>1. run cmd.exe as an administrator<br />
2. go to the bin directory of Tomcat installation<br />
3. execute "service.bat install 'name of service'" by default it will be 'Tomcat'</p>
<p>For configuration of running service, you can find details from the following URL</p>
<p>http://tomcat.apache.org/tomcat-7.0-doc/windows-service-howto.html?_sm_au_=i0VNv0QZq0tnW2Rl</p>

  </article>

<article>
    <h2>
      <a href="/2015/04/14/log4j-setting-for-logging-everying-grobally/">
        Log4j - setting for logging everying grobally
      </a>
    </h2>
    <time datetime="2015-04-14">14 April 2015</time>
    <p>The following example show how to configure log4j configuration file(log4j.properties) to log all messages.<br />
Main point is that rootLogger has to be configured.</p>
<p>[code lang="c"]<br />
log4j.rootLogger=DEBUG, CONSOLE, R</p>
<p>log4j.appender.R=org.apache.log4j.RollingFileAppender<br />
log4j.appender.R.File=e:\\tmp\\test.log<br />
log4j.appender.R.MaxFileSize=7000KB<br />
log4j.appender.R.MaxBackupIndex=1<br />
log4j.appender.R.layout=org.apache.log4j.PatternLayout<br />
log4j.appender.R.layout.ConversionPattern=%p %t (%F:%L) - %m%n</p>
<p># CONSOLE is set to be a ConsoleAppender using a PatternLayout.<br />
log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender<br />
log4j.appender.CONSOLE.Threshold=DEBUG<br />
log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout<br />
log4j.appender.CONSOLE.layout.ConversionPattern=- %m%n</p>
<p>[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2015/04/13/java-spring-framework-adding-property-file-in-application/">
        Java - Spring framework - adding property file in application
      </a>
    </h2>
    <time datetime="2015-04-13">13 April 2015</time>
    <p>1. Add the following code in applicationContext-config.xml</p>
<p>[code lang="c"]<br />
&lt;bean id=&quot;myProperties&quot;<br />
      class=&quot;org.springframework.beans.factory.config.PropertiesFactoryBean&quot;&gt;<br />
  &lt;property name=&quot;locations&quot;&gt;<br />
    &lt;list&gt;<br />
      &lt;value&gt;classpath*:my.properties&lt;/value&gt;<br />
    &lt;/list&gt;<br />
  &lt;/property&gt;<br />
&lt;/bean&gt;<br />
[/code]</p>
<p>2. get an instance of myPropertes in code</p>
<p>[code lang="c"]<br />
java.util.Properties properties = (java.util.Properties)ApplicationContextProvider.getApplicationContext().getBean(&quot;myProperties&quot;)<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2015/02/27/c-simple-example-implementing-concurrent-queue/">
        C# - Simple example implementing concurrent queue
      </a>
    </h2>
    <time datetime="2015-02-27">27 February 2015</time>
    <p>[code lang="c"]<br />
public class ActionQueueItem<br />
{<br />
    public ActionQueueItem(Action operation, string name, int priority)<br />
    {<br />
        Operation = operation;<br />
        Delay = 500; // 500 milliseconds<br />
        Name = name;<br />
        Priority = priority;<br />
    }</p>
<p>    public ActionQueueItem(Action operation, string name, int delay, int priority)<br />
    {<br />
        Operation = operation;<br />
        Name = name;<br />
        Delay = delay;<br />
        Priority = priority;<br />
    }</p>
<p>    public Action Operation { get; private set; }<br />
    public int Delay { get; set; }<br />
    public string Name { get; set; }<br />
    public int Priority { get; set; }<br />
}</p>
<p>public class ActionDelayQueue<br />
{<br />
    ManualResetEvent m_stopEvent = new ManualResetEvent(false);<br />
    ManualResetEvent m_enqueuEvent = new ManualResetEvent(false);<br />
    Thread m_processTask;</p>
<p>    List&lt;ActionQueueItem&gt; m_queue = new List&lt;ActionQueueItem&gt;();</p>
<p>    public ActionDelayQueue()<br />
    {</p>
<p>    }</p>
<p>    public bool Start()<br />
    {<br />
        Stop();</p>
<p>        m_stopEvent.Reset();<br />
        m_processTask = new Thread(Process);<br />
        m_processTask.Start();<br />
        return true;<br />
    }</p>
<p>    public bool Stop()<br />
    {<br />
        if (m_processTask != null)<br />
        {<br />
            m_stopEvent.Set();<br />
            if (!m_stopEvent.WaitOne(1000))<br />
                m_processTask.Abort();</p>
<p>            m_processTask = null;<br />
            return true;<br />
        }</p>
<p>        return false;<br />
    }</p>
<p>    public void Enqueue(ActionQueueItem item)<br />
    {<br />
        lock (m_queue)<br />
        {<br />
            if (item.Priority &gt;= 5)<br />
            {<br />
                m_queue.Insert(0, item);<br />
            }<br />
            else<br />
                m_queue.Add(item);</p>
<p>            m_enqueuEvent.Set();<br />
        }<br />
    }</p>
<p>    private void Process()<br />
    {<br />
        try<br />
        {<br />
            WaitHandle[] list = new WaitHandle[] { m_stopEvent, m_enqueuEvent };<br />
            while (true)<br />
            {<br />
                var res = WaitHandle.WaitAny(list);<br />
                if (0 == res)<br />
                    break;<br />
                else if (1 == res)<br />
                {<br />
                    ActionQueueItem action = null;<br />
                    lock (m_queue)<br />
                    {<br />
                        if (m_queue.Count &gt; 0)<br />
                        {<br />
                            var currentTime = DateTime.Now;<br />
                            action = m_queue[0];<br />
                            m_queue.RemoveAt(0);</p>
<p>                            if (m_queue.Count &lt;= 0)<br />
                                m_enqueuEvent.Reset();<br />
                        }<br />
                    }</p>
<p>                    if (action != null)<br />
                    {<br />
                        Thread.Sleep(action.Delay);<br />
                        action.Operation();<br />
                    }<br />
                }<br />
            }<br />
        }<br />
        catch (Exception e)<br />
        {<br />
            Trace.WriteLine(e.Message);<br />
        }<br />
    }<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2015/02/17/proxy-settings-for-bower-activator-and-nodejs-on-windows/">
        Proxy Settings for Bower, Activator and Nodejs on Windows
      </a>
    </h2>
    <time datetime="2015-02-17">17 February 2015</time>
    <p>1. Bower<br />
- create a file .bowerrc in C:\Users\userId directory.<br />
- content example<br />
[code lang="c"]<br />
{<br />
	&quot;proxy&quot;:&quot;http://user:pass@host:portId&quot;,<br />
	&quot;https-proxy&quot;:&quot;http://user:pass@host:portId&quot;<br />
}<br />
[/code]</p>
<p>2. Activator<br />
- create a file c:\Users\userId\.activator\activatorconfig.txt<br />
- conent example<br />
[code lang="c"]<br />
# This are the proxy settings we use for activator<br />
-Dhttp.proxyHost=proxy-host<br />
-Dhttp.proxyPort=port<br />
# Here we configure the hosts which should not go through the proxy.  You should include your private network, if applicable.<br />
-Dhttp.nonProxyHosts=&quot;localhost|127.0.0.1&quot;<br />
# These are commented out, but if you need to use authentication for your proxy, please fill these out.<br />
-Dhttp.proxyUser=username<br />
-Dhttp.proxyPassword=pass<br />
[/code]</p>
<p>3. Nodejs<br />
- create a file c:\Users\userId\.npmrc<br />
- context example<br />
[code lang="c"]<br />
proxy=http://userId:pass@host:portNumber<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2015/02/12/java-apache-cxf-return-response-codehttp-status-code/">
        Java - Apache CXF: return response code(HTTP status code)
      </a>
    </h2>
    <time datetime="2015-02-12">12 February 2015</time>
    <p>[code lang="c"]<br />
import javax.ws.rs.core.Response;</p>
<p>    Entity entity = service.getById(uuid);<br />
    if(entity == null) {<br />
        return Response.status(Response.Status.NOT_FOUND).entity(&quot;Entity not found for UUID: &quot; + uuid).build();<br />
    }<br />
    String json = //convert entity to json<br />
    return Response.ok(json, MediaType.APPLICATION_JSON).build();</p>
<p>[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2015/02/10/maven-release-plugin/">
        Maven Release plugin
      </a>
    </h2>
    <time datetime="2015-02-10">10 February 2015</time>
    <p>Useful commands<br />
[code lang="c"]<br />
	1. Prepare<br />
	mvn release:prepare</p>
<p>	2. Perform release<br />
	mvn release:perform</p>
<p>	3. Update develop version number<br />
	mvn release:update-versions -DdevelopmentVersion={version}</p>
<p>	4. Update version from released source.<br />
	mvn versions:set -DnewVersion=1.0.CR-SNAPSHOT.</p>
<p>	5. Batch release (non interactive)<br />
	mvn -B release:prepare<br />
[/code]</p>
<p>POM configuration</p>
<p>[code lang="c"]<br />
&lt;scm&gt;<br />
   &lt;developerConnection&gt;<br />
       scm:svn:http://xxx/trunk<br />
   &lt;/developerConnection&gt;<br />
&lt;/scm&gt;<br />
&lt;distributionManagement&gt;<br />
   &lt;repository&gt;<br />
       &lt;id&gt;ReleaseUniqueId&lt;/id&gt;<br />
       &lt;name&gt;UniqueReposityName&lt;/name&gt;<br />
       &lt;url&gt;file://///computer/directory/maven_release&lt;/url&gt;<br />
    &lt;/repository&gt;<br />
&lt;/distributionManagement&gt;</p>
<p>&lt;build&gt;<br />
   &lt;pluginManagement&gt;<br />
       &lt;plugins&gt;<br />
           &lt;plugin&gt;<br />
		&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<br />
		&lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;<br />
		&lt;version&gt;2.5.1&lt;/version&gt;<br />
		&lt;configuration&gt;<br />
                   &lt;commitByProject&gt;false&lt;/commitByProject&gt;<br />
                   &lt;scmCommentPrefix&gt;see #ticket &lt;/scmCommentPrefix&gt;<br />
                   &lt;autoVersionSubmodules&gt;true&lt;/autoVersionSubmodules&gt;<br />
                   &lt;username&gt;user&lt;/username&gt;<br />
                   &lt;password&gt;pass&lt;/password&gt;<br />
                   &lt;tagBase&gt;<br />
                       http://xxx/tags<br />
                   &lt;/tagBase&gt;<br />
                 &lt;/configuration&gt;<br />
             &lt;/plugin&gt;<br />
         &lt;/plugins&gt;<br />
    &lt;/pluginManagement&gt;<br />
&lt;/build&gt;<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2015/01/16/java-log4j-fixed-file-size-setting-example/">
        Java - Log4j fixed file size setting example
      </a>
    </h2>
    <time datetime="2015-01-16">16 January 2015</time>
    <p>[code lang="c"]<br />
log4j.rootLogger=INFO, loggerId<br />
log4j.appender.loggerId=org.apache.log4j.rolling.RollingFileAppender<br />
log4j.appender.loggerId.rollingPolicy=org.apache.log4j.rolling.FixedWindowRollingPolicy<br />
log4j.appender.loggerId.rollingPolicy.maxIndex=5<br />
log4j.appender.loggerId.triggeringPolicy=org.apache.log4j.rolling.SizeBasedTriggeringPolicy<br />
log4j.appender.loggerId.triggeringPolicy.MaxFileSize=10000000<br />
log4j.appender.loggerId.rollingPolicy.FileNamePattern=app-%i.log.zip<br />
log4j.appender.loggerId.rollingPolicy.ActiveFileName=app.log<br />
log4j.appender.loggerId.layout=org.apache.log4j.PatternLayout<br />
log4j.appender.loggerId.layout.ConversionPattern=%d [%t] %-5p (%F:%L) - %m%n<br />
 [/code]</p>

  </article>

<article>
    <h2>
      <a href="/2015/01/13/apache-cxf-inject-messagecontext-in-implementing-class/">
        Apache CXF - getting ServletContext in code
      </a>
    </h2>
    <time datetime="2015-01-13">13 January 2015</time>
    <p>It is common to get a Servlet context on implementing WEB API. Apache CXF has a little different approach to get this instance. The following code show how to get ServletContext instance for RS.</p>
<p>[code lang="c"]</p>
<p>public interface IServiceInterface {<br />
    void SampleFunction();<br />
}</p>
<p>public class ImplementClass implement IServiceInterface {<br />
    @Context<br />
    private org.apache.cxf.jaxrs.ext.MessageContext messgeContext;</p>
<p>    public void SampleFunction() {<br />
        ServletContext servletContext = messgeContext.getServletContext();<br />
    }<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2015/01/08/java-create-a-java-application-with-maven/">
        Java - create a Java application with Maven
      </a>
    </h2>
    <time datetime="2015-01-08">08 January 2015</time>
    <p>With the following command you can create an application directory quickly</p>
<p>[code lang="c"]<br />
mvn archetype:generate -DgroupId=com.demo.app -DartifactId=appDemo<br />
 -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2015/01/07/c11-move-constructor-requires-noexcept/">
        C++11- Move constructor requires "noexcept"
      </a>
    </h2>
    <time datetime="2015-01-07">07 January 2015</time>
    <p>If a class having move constructor needs to be in the container class, it should have "noexcept" qualification. If move constructor may throw exceptions, it will try to use copy constructor instead of move constructor.</p>
<p>[code lang="c"]<br />
class Manager<br />
{<br />
   ...<br />
   Manager(Manager&amp;&amp; other) noexcept;<br />
   ...<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2014/12/08/java-a-generic-java-class-instantiation-example/">
        Java - a generic Java class instantiation example
      </a>
    </h2>
    <time datetime="2014-12-08">08 December 2014</time>
    <p>[code lang="c"]<br />
public class CommandFactory {<br />
    public static &lt;T extends Command&lt;R&gt;, R extends CommandResult&gt; T createCommand(Class&lt;T&gt; classObject, Object... params) {<br />
        try {<br />
            T newInstance = classObject.newInstance();<br />
            if (newInstance.initialize(params)) {<br />
                return newInstance;<br />
            }<br />
        } catch (Exception e) {</p>
<p>        }<br />
        assert false;<br />
        return null;<br />
    }<br />
}</p>
<p>public class TestCommandResult extends CommandResult {<br />
}</p>
<p>public class TestCommand extends Command&lt;TestCommandResult&gt; {<br />
    private int index;<br />
    public TestCommand() {<br />
    }</p>
<p>    public bool initialize(int idx) {<br />
        this.index = idx;<br />
    }<br />
}</p>
<p>TestCommand testCmd = CommandFactory.&lt;TestCommand, TestCommandResult&gt;createCommand(TestCommand.class, 1);</p>
<p>[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2014/11/05/tomcat-logging-all-http-traffic-with-logback/">
        Tomcat - logging all HTTP traffic with Logback
      </a>
    </h2>
    <time datetime="2014-11-05">05 November 2014</time>
    <p>1. Install logback in a tomcat\lib folder<br />
   logback-access-1.1.2.jar<br />
   logback-core-1.1.2.jar</p>
<p>2. Create a logback-access.xml in a tomcat\conf foler<br />
Example)<br />
[code]<br />
&lt;configuration&gt;<br />
  &lt;appender name=&quot;cgFileRoller&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;<br />
    &lt;file&gt;c:/logs/logback.log&lt;/file&gt;<br />
    &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;<br />
      &lt;fileNamePattern&gt;cg-logback.%d{yyyy-MM-dd}.log.zip&lt;/fileNamePattern&gt;<br />
    &lt;/rollingPolicy&gt;</p>
<p>    &lt;encoder&gt;<br />
      &lt;pattern&gt;%fullRequest%n%n%fullResponse&lt;/pattern&gt;<br />
    &lt;/encoder&gt;<br />
  &lt;/appender&gt;</p>
<p>  &lt;appender-ref ref=&quot;cgFileRoller&quot; /&gt;<br />
&lt;/configuration&gt;<br />
[/code]</p>
<p>3. Modify server.xml in a tomcat/conf folder<br />
Example)<br />
[code]<br />
      &lt;Host appBase=&quot;webapps&quot; autoDeploy=&quot;true&quot; name=&quot;localhost&quot; unpackWARs=&quot;true&quot;&gt;</p>
<p>        &lt;!-- SingleSignOn valve, share authentication between web applications<br />
             Documentation at: /docs/config/valve.html --&gt;<br />
        &lt;!--<br />
        &lt;Valve className=&quot;org.apache.catalina.authenticator.SingleSignOn&quot; /&gt;<br />
        --&gt;</p>
<p>        &lt;!-- Access log processes all example.<br />
             Documentation at: /docs/config/valve.html<br />
             Note: The pattern used is equivalent to using pattern=&quot;common&quot; --&gt;<br />
        &lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs&quot; pattern=&quot;%h %l %u %t &amp;quot;%r&amp;quot; %s %b&quot; prefix=&quot;localhost_access_log.&quot; suffix=&quot;.txt&quot;/&gt;<br />
        &lt;Valve className=&quot;ch.qos.logback.access.tomcat.LogbackValve&quot;/&gt;</p>
<p>&lt;/Host&gt;<br />
[/code]</p>
<p>4. Modify web.xml to register filer<br />
Example)<br />
[code]<br />
&lt;filter&gt;<br />
  &lt;filter-name&gt;TeeFilter&lt;/filter-name&gt;<br />
  &lt;filter-class&gt;ch.qos.logback.access.servlet.TeeFilter&lt;/filter-class&gt;<br />
&lt;/filter&gt;</p>
<p>&lt;filter-mapping&gt;<br />
  &lt;filter-name&gt;TeeFilter&lt;/filter-name&gt;<br />
  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;<br />
&lt;/filter-mapping&gt;<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2014/10/23/tomcat-context-in-server-xml/">
        Tomcat - Context in server.xml
      </a>
    </h2>
    <time datetime="2014-10-23">23 October 2014</time>
    <p>When Eclipse deploy web application in the existing Tomcat server, it will create Context element in server.xml.<br />
The details of Context element in Tomcat is<br />
The Context element represents a web application, which is run within a particular virtual host. Each web application is based on a Web Application Archive (WAR) file, or a corresponding directory containing the corresponding unpacked contents, as described in the Servlet Specification (version 2.2 or later). For more information about web application archives, you can download the Servlet Specification, and review the Tomcat Application Developer's Guide.</p>
<p>You can find more details from the following URL.<br />
http://tomcat.apache.org/tomcat-5.5-doc/config/context.html</p>

  </article>

<article>
    <h2>
      <a href="/2014/10/21/java-detecting-duplicate-class-define-with-maven/">
        Java - detecting duplicate class define with maven
      </a>
    </h2>
    <time datetime="2014-10-21">21 October 2014</time>
    <p>mvn dependency:analyze -DcheckDuplicateClasses</p>
<p>blog for details<br />
http://pettermahlen.com/2010/08/05/finding-duplicate-class-definitions-using-maven/</p>

  </article>

<article>
    <h2>
      <a href="/2014/10/17/web-soapui-is-a-nice-tool-to-test-web-api/">
        Web - SoapUI is a nice tool to test Web API
      </a>
    </h2>
    <time datetime="2014-10-17">17 October 2014</time>
    <p>http://www.soapui.org/</p>

  </article>

<article>
    <h2>
      <a href="/2014/10/13/java-message-library-event-subscribe-unsubscribe/">
        Java - Message bus library (event subscribe / unsubscribe)
      </a>
    </h2>
    <time datetime="2014-10-13">13 October 2014</time>
    <p>com.google.common.eventbus is a quiet useful library if you would like to create a quick and simple solution for message bus.</p>
<p>You can find more details from the following link<br />
http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/eventbus/package-summary.html</p>

  </article>

<article>
    <h2>
      <a href="/2014/07/14/c-log4net-configuration-example/">
        C# - Log4Net configuration example
      </a>
    </h2>
    <time datetime="2014-07-14">14 July 2014</time>
    <p>[code lang="c"]<br />
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;<br />
&lt;configuration&gt;<br />
  &lt;configSections&gt;<br />
    &lt;!-- Level 1 --&gt;<br />
    &lt;section name=&quot;log4net&quot;<br />
      type=&quot;log4net.Config.Log4NetConfigurationSectionHandler, log4net&quot;/&gt;<br />
    &lt;!-- Level 2 --&gt;<br />
  &lt;/configSections&gt;</p>
<p>  &lt;log4net&gt;<br />
    &lt;appender name=&quot;RollingFileAppender&quot; type=&quot;log4net.Appender.RollingFileAppender&quot;&gt;<br />
      &lt;file value=&quot;App_DebugLog.txt&quot;/&gt;<br />
      &lt;appendToFile value=&quot;true&quot;/&gt;<br />
      &lt;rollingStyle value=&quot;Size&quot;/&gt;<br />
      &lt;maxSizeRollBackups value=&quot;5&quot;/&gt;<br />
      &lt;maximumFileSize value=&quot;10MB&quot;/&gt;<br />
      &lt;staticLogFileName value=&quot;true&quot;/&gt;<br />
      &lt;filter type=&quot;log4net.Filter.LevelRangeFilter&quot;&gt;<br />
        &lt;levelMin value=&quot;INFO&quot;/&gt;<br />
        &lt;levelMax value=&quot;FATAL&quot;/&gt;<br />
      &lt;/filter&gt;<br />
      &lt;layout type=&quot;log4net.Layout.PatternLayout&quot;&gt;<br />
        &lt;conversionPattern value=&quot;[%date{ISO8601}] [%thread] %level - %message, %exception%newline&quot;/&gt;<br />
      &lt;/layout&gt;<br />
    &lt;/appender&gt;</p>
<p>    &lt;appender name=&quot;ConsoleAppender&quot; type=&quot;log4net.Appender.ConsoleAppender&quot;&gt;<br />
      &lt;layout type=&quot;log4net.Layout.PatternLayout&quot;&gt;<br />
        &lt;conversionPattern value=&quot;[%date{ISO8601}] [%thread] %level - %message, %exception%newline%newline&quot;/&gt;<br />
      &lt;/layout&gt;<br />
      &lt;filter type=&quot;log4net.Filter.LevelRangeFilter&quot;&gt;<br />
        &lt;levelMin value=&quot;INFO&quot;/&gt;<br />
        &lt;levelMax value=&quot;FATAL&quot;/&gt;<br />
      &lt;/filter&gt;<br />
    &lt;/appender&gt;<br />
    &lt;root&gt;<br />
      &lt;level value=&quot;ALL&quot;/&gt;<br />
      &lt;appender-ref ref=&quot;RollingFileAppender&quot;/&gt;<br />
      &lt;appender-ref ref=&quot;ConsoleAppender&quot;/&gt;<br />
    &lt;/root&gt;</p>
<p>  &lt;/log4net&gt;</p>
<p>&lt;/configuration&gt;<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2014/06/24/c-wcf-ninject-ioc/">
        C# WCF - Ninject Ioc
      </a>
    </h2>
    <time datetime="2014-06-24">24 June 2014</time>
    <p>In order to use Ioc to instantiate a WCF service class, Ioc should provide implementation of following two interfaces.<br />
IInstanceProvider<br />
IServiceBehavior</p>
<p>Implement IServiceBehavior<br />
[code lang="c"]<br />
    public class NinjectBehaviorAttribute : Attribute, IServiceBehavior<br />
    {<br />
        public void AddBindingParameters(ServiceDescription serviceDescription,<br />
            ServiceHostBase serviceHostBase, Collection&lt;ServiceEndpoint&gt; endpoints,<br />
            BindingParameterCollection bindingParameters)<br />
        {<br />
        }</p>
<p>        public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)<br />
        {<br />
            Type serviceType = serviceDescription.ServiceType;<br />
            IInstanceProvider instanceProvider = new NinjectInstanceProvider(NinjectServiceLocator.Kernel, serviceType);</p>
<p>            foreach (ChannelDispatcher dispatcher in serviceHostBase.ChannelDispatchers)<br />
            {<br />
                foreach (EndpointDispatcher endpointDispatcher in dispatcher.Endpoints)<br />
                {<br />
                    DispatchRuntime dispatchRuntime = endpointDispatcher.DispatchRuntime;<br />
                    dispatchRuntime.InstanceProvider = instanceProvider;<br />
                }<br />
            }<br />
        }</p>
<p>        public void Validate(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)<br />
        {<br />
        }<br />
    }<br />
[/code]</p>
<p>Implement IInstanceProvider<br />
[code lang="c"]<br />
    public class NinjectInstanceProvider : IInstanceProvider<br />
    {<br />
        private Type serviceType;<br />
        private IKernel kernel;</p>
<p>        public NinjectInstanceProvider(IKernel kernel, Type serviceType)<br />
        {<br />
            this.kernel = kernel;<br />
            this.serviceType = serviceType;<br />
        }</p>
<p>        public object GetInstance(InstanceContext instanceContext)<br />
        {<br />
            return this.GetInstance(instanceContext, null);<br />
        }</p>
<p>        public object GetInstance(InstanceContext instanceContext, Message message)<br />
        {<br />
            return kernel.Get(this.serviceType);<br />
        }</p>
<p>        public void ReleaseInstance(InstanceContext instanceContext, object instance)<br />
        {<br />
        }<br />
    }<br />
[/code]</p>
<p>Example class<br />
[code lang="c"]<br />
[ServiceContract]<br />
public interface IExample<br />
{<br />
    void Test();<br />
}</p>
<p>[NinjectBehavior]<br />
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]<br />
public Example : IExample<br />
{<br />
    ITest _testIntf;<br />
    IMathTest _mathTestIntf;</p>
<p>    public Example(ITest testIntf, IMathTest mathTestIntf)<br />
    {<br />
        _testIntf = testIntf;<br />
        _mathTestIntf = mathTestIntf;<br />
    }</p>
<p>    public void Test()<br />
    {<br />
    }<br />
}</p>
<p>[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2014/06/16/design-principles-that-you-should-not-forget-on-software-design/">
        Design principles that you should not forget on software design
      </a>
    </h2>
    <time datetime="2014-06-16">16 June 2014</time>
    <p>1. The Single Responsibility Principle<br />
2. The Open Closed Principle<br />
3. The Liskov Substitution Principle<br />
4. The Interface Segregation Principle<br />
5. The Dependency Inversion Principle</p>

  </article>

<article>
    <h2>
      <a href="/2014/06/11/c11-pointer-casts/">
        C++11 - Pointer casts
      </a>
    </h2>
    <time datetime="2014-06-11">11 June 2014</time>
    <p>C++11 introduced a new way to cast shared_ptr as shown below.</p>
<p>std::dynamic_pointer_cast<br />
std::static_pointer_cast<br />
std::const_pointer_cast</p>

  </article>

<article>
    <h2>
      <a href="/2014/06/10/c11-coroutine/">
        C++11 - coroutine
      </a>
    </h2>
    <time datetime="2014-06-10">10 June 2014</time>
    <p>The following article is showing a nice example how C++11 can support coroutine feature. C# has already supported this feature from C# 2.0.</p>
<p>http://paoloseverini.wordpress.com/2014/06/09/generator-functions-in-c/</p>
<p>What is a coroutine? You can find details from the following Wikipedia.<br />
http://en.wikipedia.org/wiki/Coroutine</p>

  </article>

<article>
    <h2>
      <a href="/2014/05/12/c11-good-to-know-algorithm/">
        C++11- good to know algorithm
      </a>
    </h2>
    <time datetime="2014-05-12">12 May 2014</time>
    <p>The following algorithm will make your code clean and faster<br />
[code lang="c"]<br />
1. std::all_of<br />
bool res = std::all_of(std::begin(container), std::end(container), [](int value) { return value &gt; 0; });</p>
<p>2. std::any_of<br />
bool res = std::any_of(std::begin(container), std::end(container), [](int value) { return value &gt; 0; });</p>
<p>3. std::none_of<br />
bool res = std::none_of(std::begin(container), std::end(container), [](int value) { return value &gt; 0; });</p>
<p>4. std::is_sorted<br />
bool res = std::is_sorted(std::begin(container), std::end(container), [](int first, int second) { return first &lt; second; });</p>
<p>5. std::is_sorted_until<br />
auto last = std::is_sorted_until(std::begin(container), std::end(container), [](int first, int second) { return first &lt; second; });</p>
<p>6. std::is_partitioned<br />
bool res = std::is_partitioned(std::begin(container), std::end(container), [](int value) { return value &gt; 10; });</p>
<p>7. std::is_permutation<br />
bool res = std::is_permutation(std::begin(container), std::end(container), std::begin(container2);</p>
<p>8. std::minmax_element<br />
std::vector&lt;int&gt;::iterator min, max;<br />
std::tie(min, max) = std::minmax_element(std::begin(container), std::end(container));</p>
<p>[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2014/05/08/c11-shared-memory-architecturemodern-cpu-performance/">
        C++11 - Shared memory architecture(Modern CPU) performance
      </a>
    </h2>
    <time datetime="2014-05-08">08 May 2014</time>
    <p> Main bottle neck of modern CPU(shared memory architecture) is always related to accessing memory because memory is the slowest part in modern computer architecture. In order to solve this problem, modern CPU are using smart cache mechanism by introducing L1,L2,L3 caches. So if your code can minimize the cache misses, you can achieve the best performance. Also you might need to understand how cache mechanism works in modern cpu. The simplest solution is that if you can allocate data in continuous way, you can easily achieve the goal.</p>
<p>You can find one of good example of this from the following article.</p>
<p>http://bannalia.blogspot.ca/2014/05/fast-polymorphic-collections.html</p>

  </article>

<article>
    <h2>
      <a href="/2014/04/16/c11-standard-way-to-convert-number-to-string-via-versus/">
        C++11 - Standard way to convert number to string
      </a>
    </h2>
    <time datetime="2014-04-16">16 April 2014</time>
    <p>[code lang="c"]<br />
include&lt;string&gt;<br />
using std;</p>
<p>    std::to_string<br />
    std::to_wstring</p>
<p>    stoi: converts a string to a signed integer<br />
    stol: converts a string to a signed long<br />
    stoll: converts a string to a signed long long<br />
    stoul: converts a string to an unsigned long<br />
    stoull: converts a string to an unsigned long long<br />
    stof: converts a string to a float<br />
    stod: converts a string to a double<br />
    stold: converts a string to a long double<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2014/04/14/c-changing-log4net-logging-path-at-runtime/">
        C# - Changing log4Net logging path at runtime
      </a>
    </h2>
    <time datetime="2014-04-14">14 April 2014</time>
    <p>[code lang="c"]<br />
        private static void InitLoggingPath()<br />
        {<br />
            string progDataPath = Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData);<br />
            string dataPath = progDataPath + Resource.DATA_FILES_PATH;<br />
            if (!Directory.Exists(dataPath))<br />
                Directory.CreateDirectory(dataPath);</p>
<p>            if (Directory.Exists(dataPath))<br />
            {<br />
                string configPath = Path.Combine(dataPath, &quot;Test.txt&quot;);</p>
<p>                ILoggerRepository repository = LogManager.GetRepository();<br />
                IAppender[] appenders = repository.GetAppenders();<br />
                var rollingAppender = appenders.Where(p =&gt; p is RollingFileAppender).ToList();<br />
                foreach (IAppender appender in rollingAppender)<br />
                {<br />
                    RollingFileAppender fileAppender = appender as RollingFileAppender;<br />
                    fileAppender.File = configPath;<br />
                    fileAppender.ActivateOptions();<br />
                }<br />
            }<br />
        }<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2014/04/02/xcode-static-library/">
        XCode - Static library
      </a>
    </h2>
    <time datetime="2014-04-02">02 April 2014</time>
    <p>The following link contains useful information about make a static library for XCode project.</p>
<p>http://www.blog.montgomerie.net/easy-xcode-static-library-subprojects-and-submodules</p>

  </article>

<article>
    <h2>
      <a href="/2014/03/31/c-simple-dynamic-2d-array-example/">
        C++ - Simple Dynamic 2D array example
      </a>
    </h2>
    <time datetime="2014-03-31">31 March 2014</time>
    <p>[code lang="c"]<br />
#include &lt;vector&gt;<br />
#include &lt;iostream&gt;</p>
<p>template &lt;typename T&gt;<br />
class Dynamic2DArray<br />
{<br />
	std::vector&lt;std::vector&lt;T&gt;&gt; m_data;</p>
<p>public:<br />
	Dynamic2DArray(int rowCount, int colCount)<br />
	{<br />
		m_data.resize(rowCount);<br />
		for (auto&amp; item : m_data)<br />
		{<br />
			item.resize(colCount);<br />
		}<br />
	}</p>
<p>	int RowCount() const<br />
	{<br />
		return (int)m_data.size();<br />
	}</p>
<p>	int ColCount() const<br />
	{<br />
		if (m_data.size() &gt; 0)<br />
		{<br />
			return (int)m_data[0].size();<br />
		}</p>
<p>		return 0;<br />
	}</p>
<p>	std::vector&lt;T&gt;&amp; operator[](int rowIdx)<br />
	{<br />
		if (rowIdx &gt;= 0 &amp;&amp; rowIdx &lt; (int)m_data.size())<br />
			return m_data[rowIdx];</p>
<p>		throw std::runtime_error(&quot;out of index&quot;);<br />
	}</p>
<p>	void RemoveLastRow()<br />
	{<br />
		if (m_data.empty() == false)<br />
			m_data.erase(m_data.end() - 1);<br />
	}</p>
<p>	void RemoveLastColumn()<br />
	{<br />
		for (auto&amp; item : m_data)<br />
		{<br />
			if (item.empty() == false)<br />
				item.erase(item.end() - 1);<br />
		}<br />
	}</p>
<p>	void PrintData()<br />
	{<br />
		int colCount = ColCount();</p>
<p>		for (int row = 0; row &lt; (int)m_data.size(); ++row)<br />
		{<br />
			for (int col = 0; col &lt; colCount; ++col)<br />
			{<br />
				std::cout &lt;&lt; m_data[row][col] &lt;&lt; &quot; &quot;;<br />
			}</p>
<p>			std::cout &lt;&lt; std::endl;<br />
		}<br />
	}<br />
};<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2014/03/20/git-nice-article-about-git-workflow/">
        Git - useful article about Git workflow
      </a>
    </h2>
    <time datetime="2014-03-20">20 March 2014</time>
    <p>The following link has a useful information about managing git branches.</p>
<p>https://www.atlassian.com/git/workflows#!workflow-gitflow</p>

  </article>

<article>
    <h2>
      <a href="/2014/03/17/c-windows-8-app-using-cavas-to-draw-outside-of-grid-control/">
        C# - Windows 8 App, using canvas to draw outside of Grid control
      </a>
    </h2>
    <time datetime="2014-03-17">17 March 2014</time>
    <p>Canvas size is always child driven so it will give infinite size for children. Also HorizontalAlignment and VerticalAlignment settings have no effect on a child of a Canvas. However even Canvas size is to zero, it does not affect to draw children.<br />
By using this feature we can allow TextBloc to be displayed outside of Grid as shown the below example.</p>
<p>[code lang="html"]<br />
&lt;Grid Width=&quot;200&quot; Height=&quot;100&quot;&gt;<br />
    &lt;Canvas&gt;<br />
        &lt;TextBlock Text=&quot;Text in a Small Grid&quot; FontSize=&quot;144&quot; /&gt;<br />
    &lt;/Canvas&gt;<br />
&lt;/Grid&gt;<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2014/03/14/c-windows-8-app-creating-custom-control-with-xaml/">
        C# - Windows 8 App, creating custom control with Xaml
      </a>
    </h2>
    <time datetime="2014-03-14">14 March 2014</time>
    <p>The following URL shows how to create custom control with Xaml.</p>
<p>http://blogs.msdn.com/b/mim/archive/2013/03/19/create-a-custom-user-control-using-xaml-and-c-for-windows-8.aspx</p>
<p>Another<br />
http://blogs.msdn.com/b/windowsappdev/archive/2012/10/15/building-a-custom-control-using-xaml-and-c.aspx</p>

  </article>

<article>
    <h2>
      <a href="/2014/03/09/c-how-raisepropertychanged-works-in-mvvm-light/">
        C# - How RaisePropertyChanged works in MVVM light
      </a>
    </h2>
    <time datetime="2014-03-09">09 March 2014</time>
    <p>MVVM light provides an easy way of the strong typed RaisePropertyChanged with lambda. The following code shows how this can find the correct string for member of ViewModel.</p>
<p>[code lang="c"]<br />
public void RaisePropertyChanged&lt;T&gt;(Expression&lt;Func&lt;T&gt;&gt; property)<br />
{<br />
    PropertyChanged(this, new PropertyChangedEventArgs(property.GetMemberInfo().Name);<br />
}<br />
[/code]</p>
<p>so you can use the following code safely.<br />
[code lang="c"]<br />
public class ViewModel : ViewModelBase<br />
{<br />
    private string _name;</p>
<p>    public string ProductName;<br />
    { get { return _name; }<br />
    {<br />
      set<br />
      {<br />
          _name = value;<br />
          RasePropertyChanged(() =&gt; ProductName);<br />
      }<br />
    }<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2014/03/06/c11-default-member-initialization/">
        C++11 - default member initialization
      </a>
    </h2>
    <time datetime="2014-03-06">06 March 2014</time>
    <p>You can initialize the member variable as shown the following in C++11. It will save a lot of typing when you have many constructors.</p>
<p>[code lang="c"]<br />
enum class BuildingType<br />
{<br />
    None,<br />
    Resident,<br />
    Commercial,<br />
};</p>
<p>class Building<br />
{<br />
    BuildingType m_type { BuildingType::None };<br />
    std::string m_address { &quot;None&quot; };<br />
    int m_roomCount { 0 };<br />
    std::string m_name;</p>
<p>    Building(std::string name)<br />
     : m_name(std::move(name))<br />
    {<br />
    }<br />
};</p>
<p>[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2014/03/05/c-mvvm-light/">
        C# - MVVM light
      </a>
    </h2>
    <time datetime="2014-03-05">05 March 2014</time>
    <p>I think that MVVM light is the essential tool for XAML based framework such as WPF, Silverlight, Windows 8, WindowPhone 8</p>
<p>http://www.galasoft.ch/mvvm/doc/</p>

  </article>

<article>
    <h2>
      <a href="/2014/02/13/c-11-exception-safe-guidline-from-jon-kalb/">
        C++ 11 - Exception safe guidline from Jon Kalb
      </a>
    </h2>
    <time datetime="2014-02-13">13 February 2014</time>
    <ul>
<li>Throw by value. Catch by reference</li>
<li>No dynamic exception specifications. Use noexcept.</li>
<li>Destructors that throw are evil.</li>
<li>Use RAII. (Every responsibility is an object. One per.)</li>
<li>All cleanup code called from a destructor</li>
<li>Support swapperator (With No-Throw Guarantee)</li>
<li>Draw “Critical Lines” for the Strong Guarantee</li>
<li>Know where to catch (Switch/Strategy/Some Success)</li>
<li>Prefer exceptions to error codes.</li>
</ul>
<p>Where we should use "try, catch"</p>
<p>• Anywhere that we support the No-Throw Guarantee<br />
   • Destructors &amp; Cleanup<br />
   • Swapperator &amp; Moves<br />
• C-API<br />
• OS Callbacks<br />
• UI Reporting<br />
• Converting to other exception types<br />
• Threads</p>
<p>And extra places<br />
•Switch<br />
•Strategy<br />
•Some Success</p>

  </article>

<article>
    <h2>
      <a href="/2014/02/13/the-most-important-design-guideline/">
        The most important design guideline
      </a>
    </h2>
    <time datetime="2014-02-13">13 February 2014</time>
    <p>Scott Myer's word for design software.</p>
<h3>All interface should be easy to use correctly and hard to use incorrectly.</h3>

  </article>

<article>
    <h2>
      <a href="/2014/02/10/c11-stdrethrow_if_nested/">
        C++11 - std::rethrow_if_nested
      </a>
    </h2>
    <time datetime="2014-02-10">10 February 2014</time>
    <p>std::throw_with_nested will create a class inherited from std::std::nested_exception and user exception then it will get current exception and user exception in it then throw.<br />
Ex)<br />
std::throw_with_nested(MyException());</p>

  </article>

<article>
    <h2>
      <a href="/2014/02/07/c-print-a-file-name-and-line-number-when-an-exception-was-thrown/">
        C# - print a file name and line number when an exception was thrown
      </a>
    </h2>
    <time datetime="2014-02-07">07 February 2014</time>
    <p>[code lang="c"]<br />
    public static class ExceptionUtils<br />
    {<br />
        public static void PrintException(Exception e)<br />
        {<br />
            var frame = new StackTrace(e, true).GetFrame(0);<br />
            if (frame != null)<br />
            {<br />
                var str = string.Format(&quot;File: {0}({1}){2}{3}&quot;, frame.GetFileName(), frame.GetFileLineNumber(), Environment.NewLine, e.Message);<br />
                Trace.WriteLine(str);<br />
            }<br />
            else<br />
                Trace.WriteLine(e.Message);<br />
        }<br />
    }<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2014/02/06/c-rx-framework-to-create-observable-from-eventhandler/">
        C# - Rx framework to create Observable from EventHandler
      </a>
    </h2>
    <time datetime="2014-02-06">06 February 2014</time>
    <p>The following code shows how to create IObserable object from EventHandler delegator.</p>
<p>[code lang="c"]<br />
public CustomEventArg : EventArg<br />
{<br />
    public int Value { get; set; }<br />
}</p>
<p>public class CustomOtherClass<br />
{<br />
    public event EventHandler&lt;CustomEventArg&gt; OnCustEvent;<br />
}</p>
<p>public class Test<br />
{<br />
    private IObservable&lt;CustomEventArg&gt; m_obEvent;</p>
<p>    private CustomOtherClass m_other = new CustomOtherClass();</p>
<p>    public IObservable&lt;CustomEventArg&gt; ObserverCustomEvent { get { return m_obEvent; } }</p>
<p>    Test()<br />
    {<br />
        m_obEvent = Obserable.FromEvent&lt;EventHandler&lt;CustomEventArg&gt;, CustomEventArg&gt;(h =&gt;<br />
            {<br />
                EventHandler&lt;CustomEventArg&gt; handler = (sender, e) =&gt;<br />
                {<br />
                     h(e);<br />
                }<br />
                return handler;<br />
            },<br />
            f =&gt; m_other.OnCustomEvent += f,<br />
            f =&gt; m_other.OnCustomEvent -= f);<br />
    }<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2014/01/30/c-hash-combine-example-for-hash-function-in-unordered_map/">
        C++ - Hash combine example for hash function in unordered_map
      </a>
    </h2>
    <time datetime="2014-01-30">30 January 2014</time>
    <p>[code lang="c"]<br />
template &lt;class T&gt;<br />
inline void hash_combine(std::size_t &amp; seed, const T &amp; v)<br />
{<br />
  std::hash&lt;T&gt; hasher;<br />
  seed ^= hasher(v) + 0x9e3779b9 + (seed &lt;&lt; 6) + (seed &gt;&gt; 2);<br />
}<br />
[/code]</p>
<p>[code lang="c"]<br />
class Item<br />
{<br />
public:<br />
    std::string name;<br />
    int age;<br />
    int code;</p>
<p>    Item(std::string n, int age, int code)<br />
	: name(std::move(n)), age(age), code(code)<br />
    {<br />
    }</p>
<p>    bool operator == (Item const&amp; item) const<br />
    {<br />
	return name == item.name &amp;&amp;<br />
		age == item.age &amp;&amp;<br />
		code == item.code;<br />
    }<br />
};</p>
<p>struct ItemHasher<br />
{<br />
    std::size_t operator()(Item const&amp; item) const<br />
    {<br />
	std::size_t seed = 0;<br />
	hash_combine(seed, item.name);<br />
	hash_combine(seed, item.age);<br />
	hash_combine(seed, item.code);<br />
	return seed;<br />
    }<br />
};</p>
<p>std::unordered_map&lt;Item, std::string, ItemHasher&gt; testHash;<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2014/01/27/c11-transporting-c-exceptions-between-threads/">
        C++11 - transporting C++ exceptions between threads
      </a>
    </h2>
    <time datetime="2014-01-27">27 January 2014</time>
    <p>C++11 introduced std::exception_ptr. The main purpose of this class is to allow to tranport C++ exceptions to different threads.</p>
<p>in 2012 C++ and Beyond Seminar, Andrei showed the Expected type for function return value. Internally this class is utilizing std::exception_ptr to transport exceptions.</p>
<p>You can find some examples for Windows from the following links.<br />
http://msdn.microsoft.com/en-us/library/dd293602.aspx</p>

  </article>

<article>
    <h2>
      <a href="/2014/01/25/algorithm-master-method-to-find-time-complexity-for-recursive-calls/">
        Algorithm - Master method to find time complexity for recursive calls
      </a>
    </h2>
    <time datetime="2014-01-25">25 January 2014</time>
    <p><a href="http://acrocontext.files.wordpress.com/2014/01/master-method.png"><img src="http://acrocontext.files.wordpress.com/2014/01/master-method.png?w=300" alt="master-method" width="300" height="160" class="alignnone size-medium wp-image-427" /></a></p>

  </article>

<article>
    <h2>
      <a href="/2014/01/22/c-an-article-about-exception-safe-code-with-c/">
        C++ - About exception safe code with C++
      </a>
    </h2>
    <time datetime="2014-01-22">22 January 2014</time>
    <p>The following URL is talking about writing exception safe code for C++.</p>
<p>http://exceptionsafecode.com/</p>

  </article>

<article>
    <h2>
      <a href="/2014/01/15/net-clrmd-crash-dump-and-inspection-api/">
        .NET - CLRMD crash dump and inspection API
      </a>
    </h2>
    <time datetime="2014-01-15">15 January 2014</time>
    <p>Microsoft announced the new API for inspection of dump file which is called CLRMD</p>
<p>http://blogs.msdn.com/b/dougste/archive/2013/05/04/clrmd-net-crash-dump-and-live-process-inspection.aspx</p>

  </article>

<article>
    <h2>
      <a href="/2014/01/13/c11-quiz-about-c11/">
        C++11 - Quiz about C++11
      </a>
    </h2>
    <time datetime="2014-01-13">13 January 2014</time>
    <p>It is a good to try to test your C++ knowledge.</p>
<p>http://cppquiz.org/</p>

  </article>

<article>
    <h2>
      <a href="/2014/01/08/asp-net-web-api-2-article/">
        ASP.NET - Web API 2 article
      </a>
    </h2>
    <time datetime="2014-01-08">08 January 2014</time>
    <p>The following link explains about Web API2 with OWIN protocol</p>
<p>http://blogs.msdn.com/b/webdev/archive/2013/09/20/understanding-security-features-in-spa-template.aspx</p>

  </article>

<article>
    <h2>
      <a href="/2014/01/07/boostrap3-input-file-example/">
        Boostrap3 - input file example
      </a>
    </h2>
    <time datetime="2014-01-07">07 January 2014</time>
    <p>The following URL shows a good example how to make a nice looking file input button with Boostrap 3<br />
http://www.abeautifulsite.net/blog/2013/08/whipping-file-inputs-into-shape-with-bootstrap-3/</p>

  </article>

<article>
    <h2>
      <a href="/2013/12/26/angularjs-service-for-using-asp-net-web-api2/">
        AngularJS service code with ASP .NET WEB API2
      </a>
    </h2>
    <time datetime="2013-12-26">26 December 2013</time>
    <p>The following AngularJS service code shows how to login with bearer token authentication of ASP.NET WEB API2 to access exported restful APIs.</p>
<p>[code lang="c"]<br />
'use strict';<br />
app.factory('authService', function ($http, $q) {</p>
<p>    var service = {};</p>
<p>    service.loginToken = {};</p>
<p>    service.getAccessToken = function () {<br />
        return loginToken.access_token;<br />
    };</p>
<p>    service.login = function (userName, password) {<br />
        var deferred = $q.defer();</p>
<p>        var loginData = {<br />
            grant_type: &quot;password&quot;,<br />
            username: userName,<br />
            password: password<br />
        };</p>
<p>        $http({<br />
                method: 'POST',<br />
                url: '/Token',<br />
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },<br />
                data: $.param(loginData)<br />
            })<br />
            .success(function (response) {<br />
                service.loginToken = response;<br />
                deferred.resolve(response);<br />
            })<br />
            .error(function (response) {<br />
                deferred.reject(response);<br />
            });</p>
<p>        return deferred.promise;<br />
    };</p>
<p>    service.logout = function () {<br />
        var deferred = $q.defer();</p>
<p>        $http({<br />
            method: 'POST',<br />
            url: '/api/Account/Logout',<br />
            headers: { 'Authorization': 'Bearer ' + this.loginToken.access_token },<br />
        })<br />
            .success(function (response) {<br />
                service.loginToken = [];<br />
                deferred.resolve(response);<br />
            })<br />
            .error(function (response) {<br />
                deferred.reject(response);<br />
            });</p>
<p>        return deferred.promise;<br />
    };</p>
<p>    return service;<br />
});<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2013/12/23/asp-net-spa-with-angularjs/">
        ASP.NET - SPA with AngularJS
      </a>
    </h2>
    <time datetime="2013-12-23">23 December 2013</time>
    <p>The following url shows an example of SAP with AngularJS for ASP.NET<br />
http://www.codeproject.com/Articles/657139/A-Book-Store-Application-Using-AngularJS-and-Asp-N</p>
<p>Another good resource for SPA.<br />
http://www.johnpapa.net/spa/</p>
<p>AngularJS template for VS.<br />
http://sidewaffle.com/</p>

  </article>

<article>
    <h2>
      <a href="/2013/12/11/angularjs-with-typescript-example/">
        AngularJS with TypeScript example
      </a>
    </h2>
    <time datetime="2013-12-11">11 December 2013</time>
    <p>The following links shows a good example using AngularJS with TypeScript.</p>
<p>http://www.software-architects.com/devblog/2013/10/17/AngularJS-with-TypeScript-and-Windows-Azure-Mobile-Services</p>

  </article>

<article>
    <h2>
      <a href="/2013/12/09/asp-net-individual-account-in-web-api/">
        ASP .NET - Individual account in WEB API
      </a>
    </h2>
    <time datetime="2013-12-09">09 December 2013</time>
    <p>From MVC5, Microsoft changed a lot on identification mechanism. Web API will also use the updated framework which is based on OWIN.<br />
The following article will show how to use this mechanism for WEB API.</p>
<p>http://www.asp.net/web-api/overview/security/individual-accounts-in-web-api</p>

  </article>

<article>
    <h2>
      <a href="/2013/11/22/c-continuous-task-example/">
        C# - Continuous task example
      </a>
    </h2>
    <time datetime="2013-11-22">22 November 2013</time>
    <p>[code lang="c"]<br />
    public interface IContinueTask<br />
    {<br />
        string TaskName { get; }<br />
        TimeSpan Interval { get; }<br />
        IObservable&lt;TimeSpan&gt; ObservableIntervalChange { get; }<br />
        void Action();<br />
    }</p>
<p>    public class ContinuousTaskItem<br />
    {<br />
        private CancellationTokenSource m_cancelTokenSource = new CancellationTokenSource();<br />
        private IContinueTask m_task;</p>
<p>        public ContinuousTaskItem(IContinueTask task)<br />
        {<br />
            m_task = task;<br />
        }</p>
<p>        public bool Cancel()<br />
        {<br />
            m_cancelTokenSource.Cancel();<br />
            return true;<br />
        }</p>
<p>        public Task Create()<br />
        {<br />
            return Task.Factory.StartNew(<br />
                () =&gt;<br />
                {<br />
                    while (true)<br />
                    {<br />
                        if (m_cancelTokenSource.Token.WaitHandle.WaitOne(m_task.Interval))<br />
                            break;</p>
<p>                        m_task.Action();<br />
                    }<br />
                }, m_cancelTokenSource.Token, TaskCreationOptions.LongRunning, TaskScheduler.Default);<br />
        }<br />
    }</p>
<p>    public class ContinuousTaskManager<br />
    {<br />
        private Dictionary&lt;string, ContinuousTaskItem&gt; m_taskList = new Dictionary&lt;string, ContinuousTaskItem&gt;();</p>
<p>        public ContinuousTaskManager()<br />
        {</p>
<p>        }</p>
<p>        public bool AddContinueTask(IContinueTask task)<br />
        {<br />
            lock (m_taskList)<br />
            {<br />
                if (m_taskList.Keys.FirstOrDefault(x =&gt; x == task.TaskName) == null)<br />
                {<br />
                    var ob = task.ObservableIntervalChange.Subscribe(<br />
                            interval =&gt;<br />
                            {<br />
                                lock (m_taskList)<br />
                                {<br />
                                    // delete task<br />
                                    ContinuousTaskItem taskItem = null;<br />
                                    if (m_taskList.TryGetValue(task.TaskName, out taskItem))<br />
                                    {<br />
                                        taskItem.Cancel();<br />
                                        m_taskList.Remove(task.TaskName);</p>
<p>                                        // create again<br />
                                        var newTask = new ContinuousTaskItem(task);<br />
                                        m_taskList.Add(task.TaskName, newTask);<br />
                                        newTask.Create();<br />
                                    }<br />
                                }<br />
                            }<br />
                        );<br />
                    var item = new ContinuousTaskItem(task);<br />
                    m_taskList.Add(task.TaskName, item);<br />
                    item.Create();</p>
<p>                    return true;<br />
                }<br />
                return false;<br />
            }<br />
        }</p>
<p>        public bool RemoveTask(string taskName)<br />
        {<br />
            lock (m_taskList)<br />
            {<br />
                // delete task<br />
                ContinuousTaskItem taskItem = null;<br />
                if (m_taskList.TryGetValue(taskName, out taskItem))<br />
                {<br />
                    taskItem.Cancel();<br />
                    m_taskList.Remove(taskName);<br />
                    return true;<br />
                }<br />
            }<br />
            return false;<br />
        }</p>
<p>        public void Clear()<br />
        {<br />
            lock (m_taskList)<br />
            {<br />
                foreach (var task in m_taskList.Values)<br />
                {<br />
                    task.Cancel();<br />
                }</p>
<p>                m_taskList.Clear();<br />
            }<br />
        }<br />
    }<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2013/11/05/c11-caution-on-using-lambda-inside-lambda/">
        C++11 - Caution on using lambda inside lambda.
      </a>
    </h2>
    <time datetime="2013-11-05">05 November 2013</time>
    <p>When you create a lambda and if the lambda create another lambda in asynchronous way by using thread, you need to be very careful on capturing values. If you capture all variables(including local variables) by references, you will likely make a mistake by using accidentally local variables inside another lambda. If you are lucky application will crash, if not application will corrupt heap in randomly.</p>
<p>You can find similar information from the link(http://stackoverflow.com/questions/6216232/c-nested-lambda-bug-in-vs2010-with-lambda-parameter-capture).</p>
<p>[code lang="c"]<br />
void Func()<br />
{<br />
   FireCall(pEvent, idx + 1, [data](_IEvent* pCall)-&gt;HRESULT<br />
   {<br />
      return pCall-&gt;OnEvent(data);<br />
   });<br />
}</p>
<p>bool FireCall(_IEvent* pEvent, DWORD idx, boost::function&lt;HRESULT(_IEvent*)&gt; func)<br />
{<br />
   IStream* pStream = NULL;<br />
   HRESULT hRes = CoMarshalInterThreadInterfaceInStream(IID__Event, pEvent, &amp;pStream);<br />
   pEvent-&gt;Release();</p>
<p>   // create another lambda, it should pass variable by value.<br />
   m_threadPool.Schedule([idx, pStream]()<br />
   {<br />
       _IEvent* pCallEvent = NULL;<br />
       auto res = CoGetInterfaceAndReleaseStream(pStream, IID, (void**)&amp;pCallEvent);<br />
       if (SUCCEEDED(res))<br />
          func(pCallEvent);<br />
   });<br />
}<br />
[/code]</p>

  </article>

<article>
    <h2>
      <a href="/2013/10/13/windbg-command-types/">
        Windbg - command types
      </a>
    </h2>
    <time datetime="2013-10-13">13 October 2013</time>
    <h3>Windbg has the following command types</h3>
<ul>
<li>Native commands: it starts without any prefix</li>
<ul>
<li>vertaget, k, ~, s, lm, lmv m *clr*</li>
</ul>
<li>Meta commands(.): it starts with '.'</li>
<ul>
<li>.load, .chain, .prefer_dml 1(available .NET4)</li>
<li>.exr -1 =&gt; dd poi(addr) =&gt; !pe
</li>
<li>Print all exceptions: .foreach (ex {!dumpheap -type Exception -short}){.echo "********************************";!pe ${ex} }</li>
</ul>
<li>Extension commands(!): it starts with '!'</li>
<ul>
<li>!help, !peb</li>
<li>List exceptions in dump file: !dumpheap -type Exception
</li>
</ul>
</ul>
<h3>Loading the right version of sos.dll</h3>
<p>The following command will ensure that the debugger to load the extension "sos.dll" from the same place that clr.dll was loaded. That ensures that you get the right version of SOS (it should be the one that matches the clr you are using)<br />
Notes: SOS stands for Son of Strike from (Drill Into .NET Framework Internals to See How the CLR Creates Runtime Objects: http://msdn.microsoft.com/en-us/magazine/cc163791.aspx#S5)</p>
<ul>
<li>.NET4</li>
<p>[code lang="c"]<br />
.loadby sos.dll clr<br />
[/code]</p>
<li>.NET2</li>
<p>[code lang="c"]<br />
.loadby sos.dll mscoworks<br />
[/code]
&lt;/ul&gt;
<h3>Channel9 MSDN show</h3>
<p>http://channel9.msdn.com/Shows/Defrag-Tools/Defrag-Tools-14-WinDbg-SOS</p>
<h3>More examples</h3>
<ul>
    version<br />
    vertarget<br />
    |<br />
    ||<br />
    .sympath<br />
    .srcpath<br />
    .exepath<br />
    .extpath<br />
    .chain<br />
    !analyze -v<br />
    .bugcheck<br />
    !error<br />
    ~<br />
    ~NNs<br />
    ~~[TID]s<br />
    ~*k<br />
    ~*r<br />
    !process 0 17<br />
    !threads<br />
    !findstack<br />
    !uniqstack<br />
    !peb<br />
    !teb<br />
    k=<br />
    dps<br />
    dpu<br />
    dpa<br />
    dpp<br />
    .reload /f<br />
    .reload /user<br />
    !gle<br />
    !tls<br />
    !address -summary<br />
    !address<br />
    !vprot<br />
    !mapped_file<br />
    ~*kv<br />
    ~<br />
    ~~[TID]s<br />
    !cs<br />
    !locks<br />
    dv<br />
    dt<br />
    !sos.dumpstack<br />
    !sos.dumpstackobjects / !sos.dso<br />
    !sos.dumpobj / !sos.do<br />
    !sos.printexception / !sos.pe<br />
    .frame<br />
    .f+<br />
    .f-<br />
    .load<br />
    .unload<br />
    .loadby<br />
    .chain<br />
    lm / lmm / lmvm<br />
    .extmatch<br />
    .prefer_dml 1<br />
    .lines<br />
    .ecxr<br />
    .cls
</ul>

  &lt;/article&gt;

  <article>
    <h2>
      <a href="/2013/10/11/modbus-coils-discret-inputs-etc/">
        Modbus - Coils, Discret Inputs etc
      </a>
    </h2>
    <time datetime="2013-10-11">11 October 2013</time>
    <p>discrete inputs: read-only Boolean<br />
coils: read-write Boolean<br />
input registers: read-only integer(16 bits)<br />
holding registers: read-write integer(16 bits)</p>

  </article>

  <article>
    <h2>
      <a href="/2013/10/10/c-wcf-certification-configuration-for-wcf/">
        C# WCF - certification configuration for WCF
      </a>
    </h2>
    <time datetime="2013-10-10">10 October 2013</time>
    <p>Server side configuration<br />
[code lang="c"]<br />
static Binding CreateBinding()<br />
{<br />
    int maxReceivedSize = Constants.MAX_PACKET_LENGTH;</p>
<p>    NetTcpBinding clientManBinding = new NetTcpBinding(SecurityMode.Message, false);</p>
<p>    clientManBinding.TransferMode = TransferMode.Buffered;<br />
    clientManBinding.MaxBufferSize = maxReceivedSize;<br />
    clientManBinding.MaxReceivedMessageSize = maxReceivedSize;<br />
    clientManBinding.ReaderQuotas.MaxStringContentLength = maxReceivedSize;<br />
    clientManBinding.ReaderQuotas.MaxBytesPerRead = maxReceivedSize;<br />
    clientManBinding.ReaderQuotas.MaxArrayLength = maxReceivedSize;<br />
    clientManBinding.ReaderQuotas.MaxDepth = 1024;<br />
    clientManBinding.MaxBufferPoolSize = maxReceivedSize;</p>
<p>    clientManBinding.Security.Message.ClientCredentialType = MessageCredentialType.Certificate;</p>
<p>    TimeSpan ClockSkew = TimeSpan.MaxValue;<br />
    CustomBinding custBinding = new CustomBinding(clientManBinding);<br />
    SymmetricSecurityBindingElement security = custBinding.Elements.Find&lt;SymmetricSecurityBindingElement&gt;();<br />
    security.LocalClientSettings.MaxClockSkew = ClockSkew;<br />
    security.LocalServiceSettings.MaxClockSkew = ClockSkew;<br />
    security.LocalServiceSettings.DetectReplays = false;<br />
    security.LocalClientSettings.DetectReplays = false;</p>
<p>    SecureConversationSecurityTokenParameters secureTokenParams = (SecureConversationSecurityTokenParameters)security.ProtectionTokenParameters;<br />
    // From the collection, get the bootstrap element.<br />
    SecurityBindingElement bootstrap = secureTokenParams.BootstrapSecurityBindingElement;<br />
    // Set the MaxClockSkew on the bootstrap element.<br />
    bootstrap.LocalClientSettings.MaxClockSkew = ClockSkew;<br />
    bootstrap.LocalServiceSettings.MaxClockSkew = ClockSkew;<br />
    bootstrap.LocalServiceSettings.DetectReplays = false;<br />
    bootstrap.LocalClientSettings.DetectReplays = false;</p>
<p>    return custBinding;<br />
}</p>
<p>public WcfServiceHost(Uri address, Binding binding, X509Certificate2 serverCert, X509Certificate2 clientCert)<br />
{<br />
    m_serviceHost = new ServiceHost(typeof(Host), address);<br />
    m_serviceHost.Credentials.ServiceCertificate.Certificate = serverCert;<br />
    m_serviceHost.Credentials.ClientCertificate.Authentication.CertificateValidationMode = System.ServiceModel.Security.X509CertificateValidationMode.None;<br />
    m_serviceHost.Credentials.ClientCertificate.Authentication.RevocationMode = X509RevocationMode.NoCheck;<br />
    m_serviceHost.Credentials.ClientCertificate.Certificate = clientCert;<br />
}</p>
<p>[/code]</p>
<p>Client side configuration<br />
[code lang="c"]<br />
// create TCP binding<br />
protected static NetTcpBinding CreateDefaultSecureNetTCPBinding()<br />
{<br />
    SecurityMode security = SecurityMode.Message;<br />
    int maxStringContentLength = Constants.MAX_PACKET_LENGTH;</p>
<p>    NetTcpBinding tcpIpBinding = new NetTcpBinding();<br />
    tcpIpBinding.Security.Mode = security;<br />
    if (security == SecurityMode.Message)<br />
    {<br />
        tcpIpBinding.Security.Message.ClientCredentialType = MessageCredentialType.Certificate;<br />
    }<br />
    tcpIpBinding.ReaderQuotas.MaxArrayLength = maxStringContentLength;<br />
    tcpIpBinding.ReaderQuotas.MaxBytesPerRead = maxStringContentLength;<br />
    tcpIpBinding.ReaderQuotas.MaxStringContentLength = maxStringContentLength;<br />
    tcpIpBinding.ReaderQuotas.MaxDepth = 100;<br />
    tcpIpBinding.MaxReceivedMessageSize = maxStringContentLength;<br />
    tcpIpBinding.MaxBufferSize = maxStringContentLength;</p>
<p>    return tcpIpBinding;<br />
}</p>
<p>// create endpoint address with created TCP binding and certification<br />
public static EndpointAddress GetSecureEndPointAddress(Uri uri, X509Certificate2 cert)<br />
{<br />
    EndpointAddress endpointAddress = new EndpointAddress(uri, EndpointIdentity.CreateX509CertificateIdentity(cert));<br />
    return endpointAddress;<br />
}</p>
<p>// create proxy(ClientBase&lt;I&gt;) based on created binding and certificated address<br />
protected virtual Proxy CreateProxy(Binding binding, EndpointAddress addr, X509Certificate2 cert)<br />
{<br />
    var proxy = new Proxy(binding, addr);<br />
    proxy.ClientCredentials.ClientCertificate.Certificate = cert;<br />
    proxy.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = System.ServiceModel.Security.X509CertificateValidationMode.None;<br />
    return proxy;<br />
}</p>
<p>// open proxy<br />
protected void Open(Binding binding, EndpointAddress endpointAddr, X509Certificate2 cert)<br />
{<br />
    m_proxy = CreateProxy(BootstrapBinding(binding), endpointAddr, cert);<br />
    m_proxy.Open();<br />
}<br />
[/code]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/10/10/c-wcf-creating-self-certification-files-in-windows/">
        Certification - Creating self certification files in Windows
      </a>
    </h2>
    <time datetime="2013-10-10">10 October 2013</time>
    <p>[code lang="c"]<br />
// create certification for authority<br />
makecert -r -pe -n &quot;CN=Tunnel Project Authority&quot; -ss CA -sr CurrentUser -a sha1 -sky signature -cy authority -sv SampleAuthority.pvk SampleAuthority.cer</p>
<p>// based on above certification of authority, it will generate another certification.<br />
makecert -pe -n &quot;CN=tunnel.project.client&quot; -a sha1 -sky Exchange -eku 1.3.6.1.5.5.7.3.1 -ic SampleAuthority.cer -iv SampleAuthority.pvk -sp &quot;Microsoft RSA SChannel Cryptographic Provider&quot; -sy 12 -sv SampleAuthorityClient.pvk SampleAuthorityClient.cer</p>
<p>// create pfx<br />
pvk2pfx -pvk SampleAuthorityClient.pvk -spc SampleAuthorityClient.cer -pfx SampleAuthorityClient.pfx -po password</p>
<p>// based on above certification of authority, it will generate another certification.<br />
makecert -pe -n &quot;CN=tunnel.project.server&quot; -a sha1 -sky Exchange -eku 1.3.6.1.5.5.7.3.1 -ic SampleAuthority.cer -iv SampleAuthority.pvk -sp &quot;Microsoft RSA SChannel Cryptographic Provider&quot; -sy 12 -sv SampleAuthorityServer.pvk SampleAuthorityServer.cer</p>
<p>// create pfx<br />
pvk2pfx -pvk SampleAuthorityServer.pvk -spc SampleAuthorityServer.cer -pfx SampleAuthorityServer.pfx -po password</p>
<p>[/code]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/09/23/windows-disabling-bstr-cache/">
        Windows - disabling BSTR cache
      </a>
    </h2>
    <time datetime="2013-09-23">23 September 2013</time>
    <p>When checking memory usage it might need to disable BSTR cache to avoid misleading information.</p>
<p>Add the following environmental variable to disable BSTR cache.<br />
[code lang="c"]<br />
set OANOCACHE=1<br />
[/code]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/09/23/performance-windows-application-heap-usage/">
        Performance - Windows application heap usage
      </a>
    </h2>
    <time datetime="2013-09-23">23 September 2013</time>
    <p>The following script will show how to profile the heap memory usage of Windows application with Windows Performance Toolkits<br />
[code lang="c"]<br />
@echo off</p>
<p>xperf -on PROC_THREAD+LOADER+VIRT_ALLOC -stackwalk VirtualAlloc+VirtualFree -BufferSize 1024 -MinBuffers 512 -MaxBuffers 512 -stackwalk VirtualAlloc<br />
xperf -start HeapSession -heap -Pids %1 -BufferSize 1024 -MinBuffers 512 -MaxBuffers 512 -stackwalk HeapAlloc+HeapRealloc</p>
<p>echo.<br />
echo Performance Trace started.<br />
echo.<br />
echo When done with profile actions, </p>
<p>pause </p>
<p>echo Generating the report. </p>
<p>xperf -stop HeapSession -stop -d heapUsage.etl</p>
<p>echo.<br />
start xperfview heapUsage.etl</p>
<p>[/code]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/09/06/c-wpf-inotifypropertychanged-vs-dependencyobject/">
        C# WPF - INotifyPropertyChanged vs DependencyObject
      </a>
    </h2>
    <time datetime="2013-09-06">06 September 2013</time>
    <p>In WPF for binding model data to UI you can choose DependencyObject or INotifyPropertyChanged with POCO.</p>
<p>I normally selected INotifyPropertyChanged with POCO because of code readability and easy to understand.<br />
Now I have found a useful article about this topic. You can see the details from the following link.</p>
<p>http://kentb.blogspot.com.au/2009/03/view-models-pocos-versus.html</p>
<p>One important thing is that DependencyObject has a relationship with thread affinity. I think that this is big weakness of DependencyObject even though it can bring a little bit of performance benefits.</p>

  </article>

  <article>
    <h2>
      <a href="/2013/09/05/c-wcf-message-traces/">
        C# WCF - communication tracing
      </a>
    </h2>
    <time datetime="2013-09-05">05 September 2013</time>
    <p>In order to diagnostic WCF communication, you can log all WCF activities by using tracing mechanism in .NET application.<br />
You can add the following section in your [app].config file.<br />
After you collected the all trace message you can use a tool called "SvcTraceViewer.exe" to analyse data. This tool can be found the installed SDK tools directory(such as C:\Program Files\Microsoft SDKs\Windows\v6.0\Bin).</p>
<p>[code lang="c"]<br />
&lt;system.diagnostics&gt;<br />
    &lt;trace autoflush=&quot;true&quot; /&gt;<br />
    &lt;sources&gt;<br />
            &lt;source name=&quot;System.ServiceModel&quot;<br />
                    switchValue=&quot;Information, ActivityTracing&quot;<br />
                    propagateActivity=&quot;true&quot;&gt;<br />
            &lt;listeners&gt;<br />
               &lt;add name=&quot;sdt&quot;<br />
                   type=&quot;System.Diagnostics.XmlWriterTraceListener&quot;<br />
                   initializeData= &quot;Application.e2e&quot; /&gt;<br />
            &lt;/listeners&gt;<br />
         &lt;/source&gt;<br />
    &lt;/sources&gt;<br />
&lt;/system.diagnostics&gt;<br />
[/code]</p>
<p>You can get more details from the following link.<br />
http://msdn.microsoft.com/en-us/library/ms732023.aspx</p>

  </article>

  <article>
    <h2>
      <a href="/2013/09/02/c-wpf-mouse-over-animation-with-opacity/">
        C# WPF - mouse over animation with opacity
      </a>
    </h2>
    <time datetime="2013-09-02">02 September 2013</time>
    <p>Resource XML.<br />
[code lang="c"]<br />
&lt;Windows.Resources&gt;<br />
        &lt;Style x:Key=&quot;FadeOutButton&quot; TargetType=&quot;{x:Type Button}&quot;&gt;<br />
            &lt;Setter Property=&quot;Template&quot;&gt;<br />
                &lt;Setter.Value&gt;<br />
                    &lt;ControlTemplate TargetType=&quot;Button&quot;&gt;<br />
                        &lt;Border Background=&quot;Transparent&quot;&gt;<br />
                            &lt;ContentPresenter/&gt;<br />
                        &lt;/Border&gt;<br />
                    &lt;/ControlTemplate&gt;<br />
                &lt;/Setter.Value&gt;<br />
            &lt;/Setter&gt;<br />
            &lt;Style.Triggers&gt;<br />
                &lt;EventTrigger RoutedEvent=&quot;Control.MouseEnter&quot;&gt;<br />
                    &lt;BeginStoryboard&gt;<br />
                        &lt;Storyboard &gt;<br />
                            &lt;DoubleAnimation Duration=&quot;0:0:0.2&quot; To=&quot;1&quot; Storyboard.TargetProperty=&quot;Opacity&quot;/&gt;<br />
                        &lt;/Storyboard&gt;<br />
                    &lt;/BeginStoryboard&gt;<br />
                &lt;/EventTrigger&gt;<br />
                &lt;EventTrigger RoutedEvent=&quot;Control.MouseLeave&quot;&gt;<br />
                    &lt;BeginStoryboard&gt;<br />
                        &lt;Storyboard &gt;<br />
                            &lt;DoubleAnimation Duration=&quot;0:0:0.2&quot; To=&quot;0.4&quot; Storyboard.TargetProperty=&quot;Opacity&quot;/&gt;<br />
                        &lt;/Storyboard&gt;<br />
                    &lt;/BeginStoryboard&gt;<br />
                &lt;/EventTrigger&gt;<br />
            &lt;/Style.Triggers&gt;<br />
        &lt;/Style&gt;<br />
&lt;/Windows.Resources&gt;<br />
[/code]</p>
<p>Button XML.<br />
[code lang="c"]<br />
    &lt;Button Style=&quot;{StaticResource FadeOutButton}&quot;<br />
                   Name=&quot;Test&quot;<br />
                   Opacity=&quot;0.4&quot;&gt;<br />
                        &lt;Image Stretch=&quot;None&quot; Source=&quot;{StaticResource LoginImage}&quot; FocusVisualStyle=&quot;{x:Null}&quot; /&gt;<br />
    &lt;/Button&gt;<br />
[/code]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/09/02/c-wpf-customizing-start-up-fuction-in-wpf/">
        C# WPF - customizing start up fuction in WPF
      </a>
    </h2>
    <time datetime="2013-09-02">02 September 2013</time>
    <p>When you create a WPF application with visual studio, you will always find app.xaml and app.xaml.cs file.<br />
In app.xaml file, you can find the StartupUri attribute in Application tag. The StartupUri will indicate where the application starts. However sometimes you want to do some initialization before starting up the application then you need to modify the start up point with the following changes. As it shows you can specify the function name on start up point.</p>
<p>[code lang="c"]<br />
&lt;Application x:Class=&quot;WpfTutorialSamples.App&quot;<br />
             xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;<br />
             xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;<br />
                         Startup=&quot;Application_Startup&quot;&gt;<br />
    &lt;Application.Resources&gt;&lt;/Application.Resources&gt;<br />
&lt;/Application&gt;<br />
[/code]</p>
<p>After modifying the xaml, your application class should include the "Application_Startup" function as shown the below code.<br />
[code lang="c"]<br />
        public partial class App : Application<br />
        {</p>
<p>                private void Application_Startup(object sender, StartupEventArgs e)<br />
                {<br />
                        // Create the startup window<br />
                        MainWindow wnd = new MainWindow();<br />
                        // Do stuff here, e.g. to the window<br />
                        wnd.Title = &quot;Something else&quot;;<br />
                        // Show the window<br />
                        wnd.Show();<br />
                }<br />
        }<br />
[/code]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/08/27/c11-inherited-constructors/">
        C++11 - Inherited constructors
      </a>
    </h2>
    <time datetime="2013-08-27">27 August 2013</time>
    <p>Now C++11 allow that derived class can inherit the constructors of base class as the following.</p>
<p>[code lang="c"]<br />
class A<br />
{<br />
public:<br />
    A(int a) {}<br />
    A(std::string const&amp; str) {}<br />
    A(double a, int f) {}<br />
};</p>
<p>class B : public A<br />
{<br />
    using base::A;<br />
};<br />
[/code]</p>
<p>However, you need to be careful when if B has any member variable, they will be initialized with random values unless you initialize specifically.</p>

  </article>

  <article>
    <h2>
      <a href="/2013/08/15/c-simple-udp-listener-in-asynchronous-way/">
        C# - Simple UDP listener in asynchronous way
      </a>
    </h2>
    <time datetime="2013-08-15">15 August 2013</time>
    <p>[code lang="c"]<br />
private Socket udpSock;<br />
private byte[] buffer;<br />
public void Starter(){<br />
    //Setup the socket and message buffer<br />
    udpSock = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);<br />
    udpSock.Bind(new IPEndPoint(IPAddress.Any, 12345));<br />
    buffer = new byte[1024];</p>
<p>    //Start listening for a new message.<br />
    EndPoint newClientEP = new IPEndPoint(IPAddress.Any, 0);<br />
    udpSock.BeginReceiveFrom(buffer, 0, buffer.Length, SocketFlags.None, ref newClientEP, DoReceiveFrom, udpSock);<br />
}</p>
<p>private void DoReceiveFrom(IAsyncResult iar){<br />
    try{<br />
        //Get the received message.<br />
        Socket recvSock = (Socket)iar.AsyncState;<br />
        EndPoint clientEP = new IPEndPoint(IPAddress.Any, 0);<br />
        int msgLen = recvSock.EndReceiveFrom(iar, ref clientEP);<br />
        byte[] localMsg = new byte[msgLen];<br />
        Array.Copy(buffer, localMsg, msgLen);</p>
<p>        //Start listening for a new message.<br />
        EndPoint newClientEP = new IPEndPoint(IPAddress.Any, 0);<br />
        udpSock.BeginReceiveFrom(buffer, 0, buffer.Length, SocketFlags.None, ref newClientEP, DoReceiveFrom, udpSock);</p>
<p>        //Handle the received message<br />
        Console.WriteLine(&quot;Recieved {0} bytes from {1}:{2}&quot;,<br />
                          msgLen,<br />
                          ((IPEndPoint)clientEP).Address,<br />
                          ((IPEndPoint)clientEP).Port);<br />
        //Do other, more interesting, things with the received message.<br />
    } catch (ObjectDisposedException){<br />
        //expected termination exception on a closed socket.<br />
        // ...I'm open to suggestions on a better way of doing this.<br />
    }<br />
}<br />
[/code]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/08/09/c-performance-measure-util-classes/">
        C# Performance measurement helper classes
      </a>
    </h2>
    <time datetime="2013-08-09">09 August 2013</time>
    <p>[code lang="c"]<br />
    public class PerformanceHelperClass<br />
    {<br />
        [DllImport(&quot;Kernel32.dll&quot;)]<br />
        public static extern void QueryPerformanceCounter(ref long ticks);<br />
        [DllImport(&quot;Kernel32.dll&quot;)]<br />
        public static extern void QueryPerformanceFrequency(ref long freq);<br />
        public static long GetCurrentTick()<br />
        {<br />
            long value = 0;<br />
            QueryPerformanceCounter(ref value);<br />
            return value;<br />
        }</p>
<p>        public static long GetPerformanceFrequency()<br />
        {<br />
            long value = 0;<br />
            QueryPerformanceFrequency(ref value);<br />
            return value;<br />
        }<br />
    }</p>
<p>    public class PerformanceCouterable<br />
    {<br />
        protected long m_tickCreated;<br />
        protected double m_frequency;</p>
<p>        public PerformanceCouterable()<br />
        {<br />
            ResetStartPerformanceTick();<br />
        }</p>
<p>        protected void ResetStartPerformanceTick()<br />
        {<br />
            m_frequency = ((double)PerformanceHelperClass.GetPerformanceFrequency()) / 1000.0;<br />
            m_tickCreated = PerformanceHelperClass.GetCurrentTick();<br />
        }</p>
<p>        protected long GetPerformanceElapsedTick()<br />
        {<br />
            return PerformanceHelperClass.GetCurrentTick() - m_tickCreated;<br />
        }</p>
<p>        protected double GetElapsedTime()<br />
        {<br />
            var elapsed = PerformanceHelperClass.GetCurrentTick() - m_tickCreated;<br />
            return (double)elapsed / m_frequency;<br />
        }<br />
    }</p>
<p>    public class MesaureScope : PerformanceCouterable, IDisposable<br />
    {<br />
        private string m_scopeName = string.Empty;<br />
        public MesaureScope(string name)<br />
        {<br />
            m_scopeName = name;<br />
            Trace.WriteLine(string.Format(&quot;[MEASURE TIME - BEGIN] {0}&quot;, m_scopeName));<br />
        }</p>
<p>        public void Dispose()<br />
        {<br />
            Trace.WriteLine(string.Format(&quot;[MEASURE TIME - END  ] {0} - {1}(ms)&quot;, m_scopeName, GetElapsedTime()));<br />
        }<br />
    }<br />
[/code]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/08/06/c-performance-measuring-utility-classes/">
        C++ Performance measuring utility classes
      </a>
    </h2>
    <time datetime="2013-08-06">06 August 2013</time>
    <p>[code land="c"]<br />
#ifdef _DEBUG<br />
#define ENABLED_MEASURE_PERFORMANCE<br />
#endif<br />
#define ENABLED_MEASURE_PERFORMANCE</p>
<p>#ifdef ENABLED_MEASURE_PERFORMANCE<br />
class MeasureTime<br />
{<br />
public:<br />
	MeasureTime()<br />
	{<br />
		memset(&amp;m_startTick, 0, sizeof(m_startTick));<br />
	}</p>
<p>	~MeasureTime()<br />
	{<br />
	}</p>
<p>	void Start(std::wstring const&amp; name)<br />
	{<br />
		wchar_t strFormat[512];</p>
<p>		swprintf_s(strFormat, 512, L&quot;[MEASURE TIME - BEGIN] %s\n&quot;, name.c_str());<br />
		OutputDebugString(strFormat);</p>
<p>		m_name = name;<br />
		QueryPerformanceFrequency(&amp;m_startTick);<br />
		m_frequency = ((double)m_startTick.QuadPart) / 1000.0;<br />
		QueryPerformanceCounter(&amp;m_startTick);<br />
	}</p>
<p>	void Stop()<br />
	{<br />
		LARGE_INTEGER curTick;<br />
		QueryPerformanceCounter(&amp;curTick);</p>
<p>		auto delay = curTick.QuadPart - m_startTick.QuadPart;<br />
		auto elapsed = (double)delay / m_frequency;<br />
		wchar_t strFormat[512];</p>
<p>		swprintf_s(strFormat, 512, L&quot;[MEASURE TIME - END  ] %s - %lf(ms)\n&quot;, m_name.c_str(), elapsed);<br />
		OutputDebugString(strFormat);<br />
	}</p>
<p>private:<br />
	LARGE_INTEGER m_startTick;<br />
	double m_frequency;<br />
	std::wstring m_name;<br />
};</p>
<p>class MeasureTimeScope<br />
{<br />
public:<br />
	MeasureTimeScope(std::wstring const&amp; name)<br />
	{<br />
		m_measure.Start(name);<br />
	}</p>
<p>	MeasureTimeScope(wchar_t const* name)<br />
	{<br />
		m_measure.Start(name);<br />
	}</p>
<p>	~MeasureTimeScope()<br />
	{<br />
		m_measure.Stop();<br />
	}</p>
<p>private:<br />
	MeasureTime m_measure;<br />
};</p>
<p>#define MEASURE_TIME_SCOPE(X) MeasureTimeScope measure(L#X)<br />
#else<br />
#define MEASURE_TIME_SCOPE(X)<br />
#endif</p>
<p>[/code]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/07/29/performance-analysis-for-windows-channel9/">
        Performance Analysis for Windows - channel9
      </a>
    </h2>
    <time datetime="2013-07-29">29 July 2013</time>
    <p>The following URL contains the useful information about using xperf for analysis of Windows application and OS.<br />
http://channel9.msdn.com/Shows/Defrag-Tools/RSS</p>
<p>1. For example the following script shows how to get sampling CPU usage<br />
[code lang="c"]<br />
@echo off<br />
echo Press a key when ready to start...<br />
pause<br />
echo .<br />
echo ...Capturing... </p>
<p>xperf -on PROC_THREAD+LOADER+PROFILE+INTERRUPT+DPC -stackwalk Profile -BufferSize 1024 -MinBuffers 256 -MaxBuffers 256 -MaxFile 256 -FileMode Circular</p>
<p>echo Press a key when you want to stop...<br />
pause </p>
<p>echo .<br />
echo ...Stopping...<br />
xperf -stop -d cpu.etl<br />
[/code]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/07/26/c-example-of-optimistic-concurrency-in-entity-framework/">
        C# example of optimistic concurrency with Entity Framework code first
      </a>
    </h2>
    <time datetime="2013-07-26">26 July 2013</time>
    <p>The following article shows the good example how to use optimistic concurrency control in Entity Framework code first.<br />
http://msdn.microsoft.com/en-us/data/jj592904.aspx</p>
<p>Just in case I would like to copy the code examples from the above page.<br />
Resolving optimistic concurrency exceptions as client wins<br />
[code lang="c"]<br />
using (var context = new BloggingContext())<br />
{<br />
    var blog = context.Blogs.Find(1);<br />
    blog.Name = &quot;The New ADO.NET Blog&quot;;</p>
<p>    bool saveFailed;<br />
    do<br />
    {<br />
        saveFailed = false;<br />
        try<br />
        {<br />
            context.SaveChanges();<br />
        }<br />
        catch (DbUpdateConcurrencyException ex)<br />
        {<br />
            saveFailed = true;</p>
<p>            // Update original values from the database<br />
            var entry = ex.Entries.Single();<br />
            entry.OriginalValues.SetValues(entry.GetDatabaseValues());<br />
        }</p>
<p>    } while (saveFailed);<br />
}<br />
[/code]<br />
Resolving optimistic concurrency exceptions with Reload (database wins)<br />
[code lang="c"]<br />
using (var context = new BloggingContext())<br />
{<br />
    var blog = context.Blogs.Find(1);<br />
    blog.Name = &quot;The New ADO.NET Blog&quot;;</p>
<p>    bool saveFailed;<br />
    do<br />
    {<br />
        saveFailed = false;</p>
<p>        try<br />
        {<br />
            context.SaveChanges();<br />
        }<br />
        catch (DbUpdateConcurrencyException ex)<br />
        {<br />
            saveFailed = true;</p>
<p>            // Update the values of the entity that failed to save from the store<br />
            ex.Entries.Single().Reload();<br />
        }</p>
<p>    } while (saveFailed);<br />
}<br />
[/code]</p>
<p>Custom resolution of optimistic concurrency exceptions<br />
[code lang="c"]<br />
using (var context = new BloggingContext())<br />
{<br />
    var blog = context.Blogs.Find(1);<br />
    blog.Name = &quot;The New ADO.NET Blog&quot;;</p>
<p>    bool saveFailed;<br />
    do<br />
    {<br />
        saveFailed = false;<br />
        try<br />
        {<br />
            context.SaveChanges();<br />
        }<br />
        catch (DbUpdateConcurrencyException ex)<br />
        {<br />
            saveFailed = true;</p>
<p>            // Get the current entity values and the values in the database<br />
            var entry = ex.Entries.Single();<br />
            var currentValues = entry.CurrentValues;<br />
            var databaseValues = entry.GetDatabaseValues();</p>
<p>            // Choose an initial set of resolved values. In this case we<br />
            // make the default be the values currently in the database.<br />
            var resolvedValues = databaseValues.Clone();</p>
<p>            // Have the user choose what the resolved values should be<br />
            HaveUserResolveConcurrency(currentValues, databaseValues, resolvedValues);</p>
<p>            // Update the original values with the database values and<br />
            // the current values with whatever the user choose.<br />
            entry.OriginalValues.SetValues(databaseValues);<br />
            entry.CurrentValues.SetValues(resolvedValues);<br />
        }<br />
    } while (saveFailed);<br />
}</p>
<p>public void HaveUserResolveConcurrency(DbPropertyValues currentValues,<br />
                                       DbPropertyValues databaseValues,<br />
                                       DbPropertyValues resolvedValues)<br />
{<br />
    // Show the current, database, and resolved values to the user and have<br />
    // them edit the resolved values to get the correct resolution.<br />
}<br />
[/code]<br />
Custom resolution of optimistic concurrency exceptions using objects<br />
[code lang="c"]<br />
using (var context = new BloggingContext())<br />
{<br />
    var blog = context.Blogs.Find(1);<br />
    blog.Name = &quot;The New ADO.NET Blog&quot;;</p>
<p>    bool saveFailed;<br />
    do<br />
    {<br />
        saveFailed = false;<br />
        try<br />
        {<br />
            context.SaveChanges();<br />
        }<br />
        catch (DbUpdateConcurrencyException ex)<br />
        {<br />
            saveFailed = true;</p>
<p>            // Get the current entity values and the values in the database<br />
            // as instances of the entity type<br />
            var entry = ex.Entries.Single();<br />
            var databaseValues = entry.GetDatabaseValues();<br />
            var databaseValuesAsBlog = (Blog)databaseValues.ToObject();</p>
<p>            // Choose an initial set of resolved values. In this case we<br />
            // make the default be the values currently in the database.<br />
            var resolvedValuesAsBlog = (Blog)databaseValues.ToObject();</p>
<p>            // Have the user choose what the resolved values should be<br />
            HaveUserResolveConcurrency((Blog)entry.Entity,<br />
                                       databaseValuesAsBlog,<br />
                                       resolvedValuesAsBlog);</p>
<p>            // Update the original values with the database values and<br />
            // the current values with whatever the user choose.<br />
            entry.OriginalValues.SetValues(databaseValues);<br />
            entry.CurrentValues.SetValues(resolvedValuesAsBlog);<br />
        }</p>
<p>    } while (saveFailed);<br />
}</p>
<p>public void HaveUserResolveConcurrency(Blog entity,<br />
                                       Blog databaseValues,<br />
                                       Blog resolvedValues)<br />
{<br />
    // Show the current, database, and resolved values to the user and have<br />
    // them update the resolved values to get the correct resolution.<br />
}<br />
[/code]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/07/26/c-entity-framework-explicityly-loading-reference-object/">
        C# - Entity Framework : explicitly loading a reference object
      </a>
    </h2>
    <time datetime="2013-07-26">26 July 2013</time>
    <p>[code lang="c"]<br />
using (var context = new BreakAwayContext())<br />
{<br />
  var davesDump = (from l in context.Lodgings<br />
                   where l.Name == &quot;Dave's Dump&quot;<br />
                   select l).Single();<br />
  context.Entry(davesDump)<br />
         .Reference(l =&gt; l.PrimaryContact)<br />
         .Load();<br />
  davesDump.PrimaryContact = null;<br />
  context.SaveChanges();<br />
}<br />
[/code]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/07/17/c-configuration-to-log-net-library-such-socket-connection/">
        C# configuration to log .NET library such socket connection
      </a>
    </h2>
    <time datetime="2013-07-17">17 July 2013</time>
    <p>If you create a file named [application].exe.config with the following contents in directory having your application, it can make logs on any socket connection and mail operations.</p>
<p>[code lang="c"]<br />
&lt;configuration&gt;<br />
    &lt;system.diagnostics&gt;<br />
        &lt;sources&gt;<br />
            &lt;source name=&quot;System.Net&quot;&gt;<br />
                &lt;listeners&gt;<br />
                    &lt;add name=&quot;System.Net&quot;/&gt;<br />
                &lt;/listeners&gt;<br />
            &lt;/source&gt;<br />
            &lt;source name=&quot;System.Net.Sockets&quot;&gt;<br />
                &lt;listeners&gt;<br />
                    &lt;add name=&quot;System.Net&quot;/&gt;<br />
                &lt;/listeners&gt;<br />
            &lt;/source&gt;<br />
	   &lt;source name=&quot;System.Net.Mail&quot;&gt;<br />
	       &lt;listeners&gt;<br />
	           &lt;add name=&quot;System.Net&quot;/&gt;<br />
	       &lt;/listeners&gt;<br />
	   &lt;/source&gt;<br />
        &lt;/sources&gt;<br />
        &lt;switches&gt;<br />
            &lt;add name=&quot;System.Net&quot; value=&quot;Verbose&quot; /&gt;<br />
            &lt;add name=&quot;System.Net.Sockets&quot; value=&quot;Verbose&quot; /&gt;<br />
            &lt;add name=&quot;System.Net.Mail&quot; value=&quot;Verbose&quot; /&gt;<br />
        &lt;/switches&gt;<br />
        &lt;sharedListeners&gt;<br />
            &lt;add name=&quot;System.Net&quot;<br />
                type=&quot;System.Diagnostics.TextWriterTraceListener&quot;<br />
                initializeData=&quot;Application.log&quot;<br />
                /&gt;<br />
        &lt;/sharedListeners&gt;<br />
        &lt;trace autoflush=&quot;true&quot; /&gt;<br />
    &lt;/system.diagnostics&gt;<br />
&lt;/configuration&gt;<br />
[/code]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/07/17/c-smtp-client-using-implicity-sslssltls/">
        C# SMTP client using CDO
      </a>
    </h2>
    <time datetime="2013-07-17">17 July 2013</time>
    <p>The following code utilize the CDO service of Windows OS to send an email. In my research CDO SMTP client can only support SSL/TLS connection type for using SSL. If you want to use START TLS connection type, C# SmtpClient class can support it.</p>
<p>[code lang="c"]<br />
/// &lt;summary&gt;<br />
    /// Send an electronic message using the Collaboration Data Objects (CDO).<br />
    /// &lt;/summary&gt;<br />
    /// &lt;remarks&gt;http://support.microsoft.com/kb/310212&lt;/remarks&gt;<br />
private void SendEmailWithCDO()<br />
{<br />
            try<br />
            {<br />
                var settings = ViewModel;</p>
<p>                CDO.Message message = new CDO.Message();<br />
                CDO.IConfiguration configuration = message.Configuration;<br />
                ADODB.Fields fields = configuration.Fields;</p>
<p>                // Set configuration.<br />
                // sendusing:               cdoSendUsingPort, value 2, for sending the message using the network.<br />
                // smtpauthenticate:     Specifies the mechanism used when authenticating to an SMTP service over the network.<br />
                //                                  Possible values are:<br />
                //                                  - cdoAnonymous, value 0. Do not authenticate.<br />
                //                                  - cdoBasic, value 1. Use basic clear-text authentication. (Hint: This requires the use of &quot;sendusername&quot; and &quot;sendpassword&quot; fields)<br />
                //                                  - cdoNTLM, value 2. The current process security context is used to authenticate with the service.</p>
<p>                ADODB.Field field = fields[&quot;http://schemas.microsoft.com/cdo/configuration/smtpserver&quot;];<br />
                field.Value = settings.SMTPServerAddress;</p>
<p>                field = fields[&quot;http://schemas.microsoft.com/cdo/configuration/smtpserverport&quot;];<br />
                field.Value = settings.PortNumber;</p>
<p>                field = fields[&quot;http://schemas.microsoft.com/cdo/configuration/sendusing&quot;];<br />
                field.Value = CDO.CdoSendUsing.cdoSendUsingPort;</p>
<p>                field = fields[&quot;http://schemas.microsoft.com/cdo/configuration/smtpauthenticate&quot;];<br />
                field.Value = CDO.CdoProtocolsAuthentication.cdoBasic;</p>
<p>                field = fields[&quot;http://schemas.microsoft.com/cdo/configuration/sendusername&quot;];<br />
                field.Value = settings.Username;</p>
<p>                field = fields[&quot;http://schemas.microsoft.com/cdo/configuration/sendpassword&quot;];<br />
                field.Value = settings.Password;</p>
<p>                field = fields[&quot;http://schemas.microsoft.com/cdo/configuration/smtpusessl&quot;];<br />
                field.Value = &quot;true&quot;;</p>
<p>                fields.Update();</p>
<p>                message.From = settings.SenderEmailAddress;<br />
                message.To = settings.SenderEmailAddress;<br />
                message.Subject = &quot;Test&quot;;<br />
                message.TextBody = settings.Content;</p>
<p>                // Send message.<br />
                message.Send();<br />
                System.Runtime.InteropServices.Marshal.ReleaseComObject(message);<br />
                MessageBox.Show(&quot;Sent a message successfully&quot;);<br />
            }<br />
            catch (Exception ex)<br />
            {<br />
                Debug.Print(ex.Message);<br />
                MessageBox.Show(ex.Message);<br />
            }<br />
        }<br />
}<br />
[/code]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/07/09/c-wpf-extended-toolkit/">
        C# WPF extended toolkit
      </a>
    </h2>
    <time datetime="2013-07-09">09 July 2013</time>
    <p>Extended WPF toolkit provide the various UI for building WPF based application.<br />
You can find the details from the following link.<br />
http://wpftoolkit.codeplex.com/</p>

  </article>

  <article>
    <h2>
      <a href="/2013/07/08/c-wcf-instance-configuration/">
        C# WCF instance configuration
      </a>
    </h2>
    <time datetime="2013-07-08">08 July 2013</time>
    <p>WCF has the confusing mechanism for management of instance on RPC call. The following separating shows an example of this situation. If you are more interested in this, you can find details from the book called Programming WCF Services 3rd edition.</p>
<p>1. InstanceContextMode<br />
[sourcecode language="c"]<br />
public enum InstanceContextMode<br />
{<br />
    PerCall,<br />
    PerSession,<br />
    Single<br />
}</p>
<p>[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]<br />
class MyService : IMyContract<br />
{...}<br />
[/sourcecode]</p>
<p>2. SessionMode<br />
[sourcecode language="c"]<br />
public enum SessionMode<br />
{<br />
    Allowed,<br />
    Required,<br />
    NotAllowed<br />
}</p>
<p>[ServiceContract(SessionMode = SessionMode.Allowed)]<br />
interface IMyContract<br />
{...}<br />
[/sourcecode]</p>
<p>3. Binding<br />
BasicHttpBinding cannot support Session mode. But NetTcpBinding and NetNamedPipeBinding can support this.</p>
<p>Therefor if you want to have PerCall InstanceContextMode, it is recommended that Session mode should be NotAllowed as shown the following example. Also you can use this strategy for PerSession InstanceContextMode with considering the WCF bindings.</p>
<p>[sourcecode language="c"]<br />
[ServiceContract(SessionMode = SessionMode.NotAllowed)]<br />
interface IMyContract<br />
{...}<br />
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]<br />
class MyService : IMyContract<br />
{...}<br />
[/sourcecode]</p>
<p>The following table summarize the combination of above cases.</p>
<table>
<tr>
<td>Binding</td>
<td>Session mode</td>
<td>Context mode</td>
<td>Instance mode</td>
</tr>
<tr>
<td>Basic</td>
<td>Allowed/NotAllowed</td>
<td>PerCall/PerSession</td>
<td>PerCall</td>
</tr>
<tr>
<td>TCP, IPC</td>
<td>Allowed/Required</td>
<td>PerCall</td>
<td>PerCall</td>
</tr>
<tr>
<td>TCP, IPC</td>
<td>Allowed/Required</td>
<td>PerSession</td>
<td>PerSession</td>
</tr>
<tr>
<td>WS (no Message security, no reliability)</td>
<td>NotAllowed/Allowed</td>
<td>PerCall/PerSession</td>
<td>PerCall</td>
</tr>
<tr>
<td>WS (no Message security, no reliability)</td>
<td>Allowed/Required</td>
<td>PerSession</td>
<td>PerSession</td>
</tr>
<tr>
<td>WS (no Message security, no reliability)</td>
<td>NotAllowed</td>
<td>PerCall/PerSession</td>
<td>PerCall</td>
</tr>
</table>

  </article>

  <article>
    <h2>
      <a href="/2013/07/08/c-generic-function-to-invoke-a-method-of-class-with-static-information/">
        C# generic function to invoke a method of class with static information
      </a>
    </h2>
    <time datetime="2013-07-08">08 July 2013</time>
    <p>[sourcecode language="c"]<br />
class Invoker&lt;T&gt; where T : class<br />
{<br />
      static void Invoke(T invokeClass, string methodName, object[] args)<br />
      {<br />
         Debug.Assert(invokeClass != null);<br />
         Type type = typeof(T);<br />
         MethodInfo methodInfo = type.GetMethod(methodName);<br />
         try<br />
         {<br />
            methodInfo.Invoke(invokeClass, args);<br />
         }<br />
         catch(Exception e)<br />
         {<br />
            Trace.WriteLine(e.Message);<br />
         }<br />
      }<br />
}<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/07/08/c-dynamic-keyword/">
        C# dynamic keyword
      </a>
    </h2>
    <time datetime="2013-07-08">08 July 2013</time>
    <p>.NET 4.0(vs2010) introduced the dynamic feature to support better integration of dynamic language such as Python, Ruby etc.<br />
Example)<br />
Without dynamic feature.<br />
[sourcecode language="c"]<br />
object calc = GetCalculator();<br />
Type calcType = calc.GetType();<br />
object res = calcType.InvokeMember(&quot;Add&quot;,<br />
    BindingFlags.InvokeMethod, null,<br />
    new object[] { 10, 20 });<br />
int sum = Convert.ToInt32(res);<br />
[/sourcecode]<br />
With dynamic feature.<br />
[sourcecode language="c"]<br />
dynamic calc = GetCalculator();<br />
int sum = calc.Add(10, 20);<br />
[/sourcecode]</p>
<p>You can find more information from the following URL.<br />
http://dlr.codeplex.com/</p>

  </article>

  <article>
    <h2>
      <a href="/2013/07/05/c-performance-counter-example/">
        C# performance counter example
      </a>
    </h2>
    <time datetime="2013-07-05">05 July 2013</time>
    <p>[sourcecode language="c"]<br />
using System;<br />
using System.Collections.Generic;<br />
using System.Linq;<br />
using System.Text;<br />
using System.Diagnostics;<br />
using System.Runtime.InteropServices;</p>
<p>namespace PerformanceCounterHelper<br />
{<br />
    public class PerformanceHelperClass<br />
    {<br />
        [DllImport(&quot;Kernel32.dll&quot;)]<br />
        public static extern void QueryPerformanceCounter(ref long ticks);<br />
        public static long GetCurrentTick()<br />
        {<br />
            long value = 0;<br />
            QueryPerformanceCounter(ref value);<br />
            return value;<br />
        }<br />
    }</p>
<p>    public interface IPerformanceDescription<br />
    {<br />
        string Category { get; }<br />
        string Description { get; }<br />
    }</p>
<p>    public class PerformanceCounter&lt;T&gt; where T : IPerformanceDescription, new()<br />
    {<br />
        /// &lt;summary&gt;<br />
        /// Counter for counting total number of operations<br />
        /// &lt;/summary&gt;<br />
        private PerformanceCounter m_totalOperations;<br />
        /// &lt;summary&gt;<br />
        /// Counter for counting number of operations per second<br />
        /// &lt;/summary&gt;<br />
        private PerformanceCounter m_operationsPerSecond;<br />
        /// &lt;summary&gt;<br />
        /// Counter for counting duration averages<br />
        /// &lt;/summary&gt;<br />
        private PerformanceCounter m_averageDuration;<br />
        /// &lt;summary&gt;<br />
        /// Counter for counting duration averages base<br />
        /// &lt;/summary&gt;<br />
        private PerformanceCounter m_averageDurationBase;</p>
<p>        /// &lt;summary&gt;<br />
        /// Creates a new performance counter category m_perfClass.Category if it does not already exists and adds some counters to it.<br />
        /// &lt;/summary&gt;<br />
        /// </p>
<p>        private T m_perfClass;<br />
        private static readonly PerformanceCounter&lt;T&gt; m_instance = new PerformanceCounter&lt;T&gt;();</p>
<p>        public static PerformanceCounter&lt;T&gt; Instance<br />
        {<br />
            get { return m_instance; }<br />
        }</p>
<p>        private PerformanceCounter()<br />
        {<br />
            m_perfClass = new T();</p>
<p>            if (!PerformanceCounterCategory.Exists(m_perfClass.Category))<br />
            {<br />
                CounterCreationDataCollection counters = new CounterCreationDataCollection();</p>
<p>                // 1. counter for counting totals: PerformanceCounterType.NumberOfItems32<br />
                CounterCreationData totalOps = new CounterCreationData();<br />
                totalOps.CounterName = &quot;# operations executed&quot;;<br />
                totalOps.CounterHelp = &quot;Total number of operations executed&quot;;<br />
                totalOps.CounterType = PerformanceCounterType.NumberOfItems32;<br />
                counters.Add(totalOps);</p>
<p>                // 2. counter for counting operations per second: PerformanceCounterType.RateOfCountsPerSecond32<br />
                CounterCreationData opsPerSecond = new CounterCreationData();<br />
                opsPerSecond.CounterName = &quot;# operations / sec&quot;;<br />
                opsPerSecond.CounterHelp = &quot;Number of operations executed per second&quot;;<br />
                opsPerSecond.CounterType = PerformanceCounterType.RateOfCountsPerSecond32;<br />
                counters.Add(opsPerSecond);</p>
<p>                // 3. counter for counting average time per operation: PerformanceCounterType.AverageTimer32<br />
                CounterCreationData avgDuration = new CounterCreationData();<br />
                avgDuration.CounterName = &quot;average time per operation&quot;;<br />
                avgDuration.CounterHelp = &quot;Average duration per operation execution&quot;;<br />
                avgDuration.CounterType = PerformanceCounterType.AverageTimer32;<br />
                counters.Add(avgDuration);</p>
<p>                // 4. base counter for counting average time per operation: PerformanceCounterType.AverageBase<br />
                CounterCreationData avgDurationBase = new CounterCreationData();<br />
                avgDurationBase.CounterName = &quot;average time per operation base&quot;;<br />
                avgDurationBase.CounterHelp = &quot;Average duration per operation execution base&quot;;<br />
                avgDurationBase.CounterType = PerformanceCounterType.AverageBase;<br />
                counters.Add(avgDurationBase);</p>
<p>                // create new category with the counters above<br />
                PerformanceCounterCategory.Create(m_perfClass.Category, m_perfClass.Description, counters);<br />
            }</p>
<p>            // create counters to work with<br />
            m_totalOperations = new PerformanceCounter();<br />
            m_totalOperations.CategoryName = m_perfClass.Category;<br />
            m_totalOperations.CounterName = &quot;# operations executed&quot;;<br />
            m_totalOperations.MachineName = &quot;.&quot;;<br />
            m_totalOperations.ReadOnly = false;<br />
            m_totalOperations.RawValue = 0;</p>
<p>            m_operationsPerSecond = new PerformanceCounter();<br />
            m_operationsPerSecond.CategoryName = m_perfClass.Category;<br />
            m_operationsPerSecond.CounterName = &quot;# operations / sec&quot;;<br />
            m_operationsPerSecond.MachineName = &quot;.&quot;;<br />
            m_operationsPerSecond.ReadOnly = false;<br />
            m_operationsPerSecond.RawValue = 0;</p>
<p>            m_averageDuration = new PerformanceCounter();<br />
            m_averageDuration.CategoryName = m_perfClass.Category;<br />
            m_averageDuration.CounterName = &quot;average time per operation&quot;;<br />
            m_averageDuration.MachineName = &quot;.&quot;;<br />
            m_averageDuration.ReadOnly = false;<br />
            m_averageDuration.RawValue = 0;</p>
<p>            m_averageDurationBase = new PerformanceCounter();<br />
            m_averageDurationBase.CategoryName = m_perfClass.Category;<br />
            m_averageDurationBase.CounterName = &quot;average time per operation base&quot;;<br />
            m_averageDurationBase.MachineName = &quot;.&quot;;<br />
            m_averageDurationBase.ReadOnly = false;<br />
            m_averageDurationBase.RawValue = 0;<br />
        }</p>
<p>        public void Initialize()<br />
        {</p>
<p>        }</p>
<p>        /// &lt;summary&gt;<br />
        /// Increments counters.<br />
        /// &lt;/summary&gt;<br />
        /// &lt;param name=&quot;ticks&quot;&gt;The number of ticks the AverageTimer32 counter must be incremented by&lt;/param&gt;<br />
        public void DoPerformanceCounter(long ticks)<br />
        {<br />
            // simply increment the counters<br />
            m_totalOperations.Increment();<br />
            m_operationsPerSecond.Increment();<br />
            m_averageDuration.IncrementBy(ticks); // increment the timer by the time cost of the operation<br />
            m_averageDurationBase.Increment(); // increment base counter only by 1<br />
        }<br />
    }<br />
}<br />
[/sourcecode]</p>
<p>[sourcecode language="c"]<br />
using System;<br />
using System.Collections.Generic;<br />
using System.Linq;<br />
using System.Text;<br />
using System.Runtime.InteropServices;</p>
<p>namespace PerformanceCounterHelper<br />
{<br />
    [ComVisible(true)]<br />
    [Guid(&quot;xxxxxxxxxxxxxxxxxxxxxxxx&quot;)]<br />
    public interface INetCmdQueueTimeCounter<br />
    {<br />
        void DoPerformanceCounter(long tick);<br />
    }</p>
<p>    [ComVisible(true)]<br />
    [Guid(&quot;xxxxxxxxxxxxxxxxxxxxxxxx&quot;)]<br />
    public class NetCmdQueueTimeClass : INetCmdQueueTimeCounter<br />
    {<br />
        public class NetCmdPerformanceDescription : IPerformanceDescription<br />
        {<br />
            public string Category { get { return &quot;Network Command Queue Time&quot;; } }<br />
            public string Description { get { return &quot;Network Command Queue Time Counter&quot;; } }<br />
        }</p>
<p>        public NetCmdQueueTimeClass()<br />
        {<br />
            PerformanceCounter&lt;NetCmdPerformanceDescription&gt;.Instance.Initialize();<br />
        }</p>
<p>        public void DoPerformanceCounter(long tick)<br />
        {<br />
            PerformanceCounter&lt;NetCmdPerformanceDescription&gt;.Instance.DoPerformanceCounter(tick);<br />
        }<br />
    }<br />
}<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/07/05/iis-configuration-for-number-of-concurrent-connection/">
        IIS configuration for number of concurrent connection
      </a>
    </h2>
    <time datetime="2013-07-05">05 July 2013</time>
    <p>Open an administrator command prompt at %windir%\System32\inetsrv\<br />
Run the command below to update the appConcurrentRequestLimit attribute to a suitable number (5000 is the default in IIS7+)<br />
Example<br />
[sourcecode language="c"]<br />
appcmd.exe set config /section:system.webserver/serverRuntime /appConcurrentRequestLimit:100000<br />
[/sourcecode]</p>
<p>You can find more details from the following link.<br />
https://github.com/SignalR/SignalR/wiki/Performance</p>

  </article>

  <article>
    <h2>
      <a href="/2013/07/04/c-wcf-useful-downloading-web-link/">
        C# WCF useful web link containing downloadable example VC projects
      </a>
    </h2>
    <time datetime="2013-07-04">04 July 2013</time>
    <p>Juval Lowy is an expert in WCF.<br />
http://www.idesign.net/Downloads</p>

  </article>

  <article>
    <h2>
      <a href="/2013/07/04/c-11-example-of-auto-for-function-declaration/">
        C++ 11, Example of auto for function declaration
      </a>
    </h2>
    <time datetime="2013-07-04">04 July 2013</time>
    <p>[code lang="cpp"]<br />
template &lt;class T&gt;<br />
auto add(T t, U u) -&gt; decltype(t + u)<br />
[/code]</p>
<p>is equal to</p>
<p>[code lang="cpp"]<br />
template &lt;class T&gt;<br />
decltype((*(T*)0) + (*(U*)0)) add(T t, U u);<br />
[/code]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/06/12/net-a-nice-article-about-memory-allocations-profiling-with-vs2012/">
        .NET - a nice article about memory allocations profiling with VS2012
      </a>
    </h2>
    <time datetime="2013-06-12">12 June 2013</time>
    <p>http://blogs.msdn.com/b/dotnet/archive/2013/04/04/net-memory-allocation-profiling-with-visual-studio-2012.aspx</p>

  </article>

  <article>
    <h2>
      <a href="/2013/06/12/c-a-greate-article-about-c-monads/">
        C# - a great article about C# monads
      </a>
    </h2>
    <time datetime="2013-06-12">12 June 2013</time>
    <p>http://ericlippert.com<br />
http://ericlippert.com/category/monads/</p>

  </article>

  <article>
    <h2>
      <a href="/2013/06/11/c-a-nice-article-about-c-memory-model/">
        C# - a nice article about C# memory model
      </a>
    </h2>
    <time datetime="2013-06-11">11 June 2013</time>
    <p>http://msdn.microsoft.com/en-us/magazine/jj863136.aspx</p>

  </article>

  <article>
    <h2>
      <a href="/2013/06/11/udp-multicast-enabledisable-loopback-message-on-sending-a-message/">
        UDP Multicast - enable/disable loopback message on sending a message
      </a>
    </h2>
    <time datetime="2013-06-11">11 June 2013</time>
    <p>[sourcecode language="c"]<br />
bool EC_EnableMulticastLoopBack(SOCKET socket, bool IPv6, bool enable)<br />
{<br />
    // enable/disable loop<br />
    char loop = enable ? 1 : 0;<br />
    if (IPv6) {<br />
        return setsockopt(socket, IPPROTO_IPV6, IPV6_MULTICAST_LOOP, &amp;loop, sizeof(loop)) == 0;<br />
    } else<br />
        return setsockopt(socket, IPPROTO_IP, IP_MULTICAST_LOOP, &amp;loop, sizeof(loop)) == 0;<br />
}<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/06/11/udp-multicast-selecting-a-network-adapter-interface-on-sending-a-multicast-message/">
        UDP Multicast - selecting a network adapter interface on sending a multicast message.
      </a>
    </h2>
    <time datetime="2013-06-11">11 June 2013</time>
    <p>[sourcecode language="c"]<br />
bool EC_SetMulticastInterfaceIndex(SOCKET socket, bool IPv6, int index)<br />
{<br />
    if (IPv6) {<br />
        return setsockopt(socket, IPPROTO_IPV6, IPV6_MULTICAST_IF, (char const*)&amp;index, sizeof(index)) == 0;<br />
    } else<br />
        return setsockopt(socket, IPPROTO_IP, IP_MULTICAST_IF, (char const*)&amp;index, sizeof(index)) == 0;<br />
}<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/06/03/c11-one-line-example-of-c11-syntax/">
        C++11 - one line interesting example of C++11 syntax
      </a>
    </h2>
    <time datetime="2013-06-03">03 June 2013</time>
    <p>[sourcecode language="c"]<br />
constexpr explicit optional&lt;T&gt;::operator bool() const noexcept;<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/05/31/c-a-good-blog-about-using-c-task-parallel-library/">
        C# - a good blog about using C# task parallel library
      </a>
    </h2>
    <time datetime="2013-05-31">31 May 2013</time>
    <p>
http://blogs.msdn.com/b/csharpfaq/archive/2010/06/01/parallel-programming-in-net-framework-4-getting-started.aspx</p>

  </article>

  <article>
    <h2>
      <a href="/2013/05/31/c11-a-example-of-trailing-return-type/">
        C++11 - an example of trailing return type
      </a>
    </h2>
    <time datetime="2013-05-31">31 May 2013</time>
    <p>[sourcecode language="c"]<br />
template&lt;typename T, typename S&gt;<br />
auto multiply(T lhs, S rhs) -&gt; decltype(lhs * rhs) {<br />
  return lhs * rhs;<br />
}<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/05/31/c11-defaulted-function/">
        C++11 - defaulted function
      </a>
    </h2>
    <time datetime="2013-05-31">31 May 2013</time>
    <p>C++11 introduced the defaulted function as the following example.<br />
[sourcecode language="c"]<br />
class help<br />
{<br />
public:<br />
    help() = default;<br />
private:<br />
    std::string m_text;<br />
}<br />
[/sourcecode]<br />
The main reason of this feature is to compromise the case which if user define another non default constructor, complier will not generate the default constructor automatically. Sometime this is very annoying for writer so if you use the defaulted function as shown above example, user can easily generate default constructor automatically.</p>

  </article>

  <article>
    <h2>
      <a href="/2013/05/31/git-svn-commands/">
        Git - svn commands
      </a>
    </h2>
    <time datetime="2013-05-31">31 May 2013</time>
    <p>[sourcecode language="c"]<br />
git svn clone http://svn.example.com/project/trunk<br />
git commit<br />
git svn rebase<br />
git svn dcommit<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/05/29/windows-performance-tool-url-wpr-wpa-xperf/">
        URLs - Windows performance tool kits (WPR, WPA, xperf etc)
      </a>
    </h2>
    <time datetime="2013-05-29">29 May 2013</time>
    <p>Channel 9 videos about xperf, xperfview, WPR and WPA<br />
http://channel9.msdn.com/Events/Speakers/Michael-Milirud</p>
<p>Article about xperf<br />
http://blogs.msdn.com/b/ntdebugging/archive/2008/04/03/windows-performance-toolkit-xperf.aspx</p>
<p>About WPR, WPA<br />
http://blogs.msdn.com/b/ntdebugging/archive/2012/11/30/troubleshooting-pool-leaks-part-7-windows-performance-toolkit.aspx<br />
http://blogs.technet.com/b/askpfeplat/archive/2013/03/22/troubleshooting-windows-performance-issues-using-the-windows-performance-recorder.aspx</p>

  </article>

  <article>
    <h2>
      <a href="/2013/05/21/c11-cast-shared_ptr-to-drived-class-from-base-class/">
        C++11 - casting from base class shared_ptr to drived class shared_ptr
      </a>
    </h2>
    <time datetime="2013-05-21">21 May 2013</time>
    <p>[sourcecode language="c"]<br />
class BaseClass : public std::enable_shared_from_this&lt;BaseClass&gt;<br />
{<br />
  template &lt;typename Derived&gt;<br />
  std::shared_ptr&lt;Derived&gt; GetDerived(){<br />
     return std::dynamic_pointer_cast&lt;Derived&gt;(shared_from_this());<br />
  }<br />
}<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/05/14/c-scheduler-from-synchronization-context/">
        C# - getting a scheduler from the current synchronization context
      </a>
    </h2>
    <time datetime="2013-05-14">14 May 2013</time>
    <p>[sourcecode language="c"]<br />
var ui = TaskScheduler.FromCurrentSynchronizationContext();<br />
Task.Factory.ContinueWhenAll(tasks.ToArray(),<br />
    result =&gt;<br />
    {<br />
        var time = watch.ElapsedMilliseconds;<br />
        label1.Content += time.ToString();<br />
    }, CancellationToken.None, TaskContinuationOptions.None, ui);<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/05/07/git-use-the-last-committed-message/">
        Git - use the last committed message.
      </a>
    </h2>
    <time datetime="2013-05-07">07 May 2013</time>
    <p>[sourcecode language="c"]<br />
git commit --reedit-message=HEAD --reset-author</p>
<p>git commit -c HEAD --res<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/05/06/git-renormalizing-a-repository/">
        Git - renormalizing a repository
      </a>
    </h2>
    <time datetime="2013-05-06">06 May 2013</time>
    <p>[sourcecode language="c"]<br />
git rm --cached -r .# Remove everything from the index.</p>
<p>git reset --hard# Write both the index and working directory from git's database.</p>
<p>git add .# Prepare to make a commit by staging all the files that will get normalized.<br />
# This is your chance to inspect which files were never normalized. You should<br />
# get lots of messages like: &quot;warning: CRLF will be replaced by LF in file.&quot;</p>
<p>git commit -m &quot;Normalize line endings&quot;# Commit<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/04/12/move-constructor-may-be-required-if-you-want-to-add-it-into-stdvector-in-c11/">
        Move constructor may be required if you want to add it into std::vector in C++11
      </a>
    </h2>
    <time datetime="2013-04-12">12 April 2013</time>
    <p>when resizing or relocating memory in std::vector, if item supports move constructor std::vector can optimize on relocation operation.</p>

  </article>

  <article>
    <h2>
      <a href="/2013/04/11/nice-blog-for-c11/">
        A good blog about C++11
      </a>
    </h2>
    <time datetime="2013-04-11">11 April 2013</time>
    <p>http://bartoszmilewski.com/</p>

  </article>

  <article>
    <h2>
      <a href="/2013/04/10/git-rm-deleted-files/">
        Git - adding the deleted files
      </a>
    </h2>
    <time datetime="2013-04-10">10 April 2013</time>
    <p>[sourcecode language="c"]<br />
1. git add -u<br />
2. git rm $(git ls-files --deleted)<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/04/02/git-change-comment/">
        Git - changing the committed comment
      </a>
    </h2>
    <time datetime="2013-04-02">02 April 2013</time>
    <p>Basic steps.<br />
git log --pretty=oneline -10<br />
git rebase -i xxxx<br />
-&gt; change 'pick' to 'reword'<br />
git commit<br />
git rebase --continue</p>
<p>details is the following url.<br />
https://help.github.com/articles/changing-a-commit-message/</p>

  </article>

  <article>
    <h2>
      <a href="/2013/04/02/asp-net-mvc4-simple-membership/">
        ASP .NET MVC4 - example of creating the simple membership
      </a>
    </h2>
    <time datetime="2013-04-02">02 April 2013</time>
    <p>http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx</p>

  </article>

  <article>
    <h2>
      <a href="/2013/03/16/jmeter-stress-test/">
        An example of jmeter stress test
      </a>
    </h2>
    <time datetime="2013-03-16">16 March 2013</time>
    <p>http://nico.vahlas.eu/2010/03/30/some-thoughts-on-stress-testing-web-applications-with-jmeter-part-2/</p>

  </article>

  <article>
    <h2>
      <a href="/2013/03/14/an-example-of-measuring-performance-of-asp-net-application-using-iiis-resource-toolkit/">
        An example of measuring performance of ASP.NET application using IIIS resource toolkit
      </a>
    </h2>
    <time datetime="2013-03-14">14 March 2013</time>
    <p><a href="http://blogs.msdn.com/b/alikl/archive/2008/03/09/stress-test-asp-net-web-application-with-free-wcat-tool.aspx" title="ASP.NET iis resource toolkit">ASP.NET iis resource toolkit</a></p>
<p> For performance measurement</p>
<p>WCAT 6.3<br />
http://www.iis.net/downloads/community/2007/05/wcat-63-(x86)<br />
http://www.iis.net/downloads/community/2007/05/wcat-63-(x64)<br />
Install WCAT</p>
<p>Download and install Internet Information Services (IIS) 6.0 Resource Kit Tools. For the purpose of our exercise there is no need to install all the tools included with the resources kit, only WCAT.<br />
Create configuration files</p>
<p>There are three textual files one needs to create and configure (you can give any name and extension of your choice):</p>
<p>    script.txt - this file defines the requests, in other words what pages to request and how to request it. Following is an example of simple script.txt file:</p>
<p>NEW TRANSACTION<br />
    classId = 1<br />
    NEW REQUEST HTTP<br />
        Verb = "GET"<br />
        URL = "http://localhost/BankingShmanking/Default.aspx"</p>
<p>    distribution.txt - defines weights among different requests. For example, if I need to generate request to page1.aspx twice as to page2.aspx, I will define it in this file. In case of loading only one page, the file is meaningless. Following is an example of simple distribution.txt file (1 refers to classId in script.txt file, and 50 is that 50% of the load should got this file which is meaningless since there is only one page to request, thus it will get the whole 100% load):</p>
<p>1 50</p>
<p>    config.txt - determines the duration of the test, number of clients that will generate the requests against the web application. Following is the example of simple config.txt file:</p>
<p>Warmuptime 5s<br />
Duration 30s<br />
CooldownTime 5s<br />
NumClientMachines 1<br />
NumClientThreads 20</p>
<p>Save the files in "C:\Program Files\IIS Resources\WCAT Controller" folder.<br />
Run the test</p>
<p>To run the stress test open command prompt by opening Run window(Windows + R) type cmd and hit Enter. Change current directory to "C:\Program Files\IIS Resources\WCAT Controller&gt;" and run the following command to test the page hosted on the localhost:</p>
<p>wcctl -c config.txt -d distribution.txt -s script.txt -a localhost</p>
<p>then open second command prompt, change current folder to "C:\Program Files\IIS Resources\WCAT Client" and run the following command to actually launch the virtual client's requests from local machine:</p>
<p>wcclient.exe localhost</p>

  </article>

  <article>
    <h2>
      <a href="/2013/03/14/asp-net-error-the-underlying-provider-failed-on-open/">
        ASP.NET database connection error - the underlying provider failed on Open
      </a>
    </h2>
    <time datetime="2013-03-14">14 March 2013</time>
    <p>context.Connection.Open() didn't help solving my problem so I tried enabling "Allow Remote Clients" in DTC config, no more error.</p>
<p>In windows 7 you can open the DTC config by running dcomcnfg, Component Services -&gt; Computers -&gt; My Computer -&gt; Distributed Transaction Coordinator -&gt; Right click to Local DTC -&gt; Security. – kerem Mar 3 '11 at 16:48</p>

  </article>

  <article>
    <h2>
      <a href="/2013/03/09/git-configuration-for-p4merge/">
        Git - configuration to use p4merge for diff
      </a>
    </h2>
    <time datetime="2013-03-09">09 March 2013</time>
    <p>On Windows<br />
[sourcecode language="c"]<br />
[diff]<br />
	tool = p4merge</p>
<p>[difftool &quot;p4merge&quot;]<br />
	path = c:\\Program Files\\Perforce\\p4merge.exe<br />
[merge]<br />
	tool = p4merge<br />
[mergetool &quot;p4merge&quot;]<br />
	path = c:\\Program Files\\Perforce\\p4merge.exe<br />
	trustExitCode = true<br />
	keepBackup = false<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/03/07/c-observable-dictionary/">
        C# Observable dictionary
      </a>
    </h2>
    <time datetime="2013-03-07">07 March 2013</time>
    <p>[sourcecode language="c"]<br />
    public class ObservableDictionary&lt;TKey, TValue&gt; : IDictionary&lt;TKey, TValue&gt;, INotifyCollectionChanged, INotifyPropertyChanged<br />
    {<br />
        private const string CountString = &quot;Count&quot;;<br />
        private const string IndexerName = &quot;Item[]&quot;;<br />
        private const string KeysName = &quot;Keys&quot;;<br />
        private const string ValuesName = &quot;Values&quot;;</p>
<p>        private IDictionary&lt;TKey, TValue&gt; _Dictionary;<br />
        protected IDictionary&lt;TKey, TValue&gt; Dictionary<br />
        {<br />
            get { return _Dictionary; }<br />
        }</p>
<p>        #region Constructors<br />
        public ObservableDictionary()<br />
        {<br />
            _Dictionary = new Dictionary&lt;TKey, TValue&gt;();<br />
        }<br />
        public ObservableDictionary(IDictionary&lt;TKey, TValue&gt; dictionary)<br />
        {<br />
            _Dictionary = new Dictionary&lt;TKey, TValue&gt;(dictionary);<br />
        }<br />
        public ObservableDictionary(IEqualityComparer&lt;TKey&gt; comparer)<br />
        {<br />
            _Dictionary = new Dictionary&lt;TKey, TValue&gt;(comparer);<br />
        }<br />
        public ObservableDictionary(int capacity)<br />
        {<br />
            _Dictionary = new Dictionary&lt;TKey, TValue&gt;(capacity);<br />
        }<br />
        public ObservableDictionary(IDictionary&lt;TKey, TValue&gt; dictionary, IEqualityComparer&lt;TKey&gt; comparer)<br />
        {<br />
            _Dictionary = new Dictionary&lt;TKey, TValue&gt;(dictionary, comparer);<br />
        }<br />
        public ObservableDictionary(int capacity, IEqualityComparer&lt;TKey&gt; comparer)<br />
        {<br />
            _Dictionary = new Dictionary&lt;TKey, TValue&gt;(capacity, comparer);<br />
        }<br />
        #endregion</p>
<p>        public IObservable&lt;NotifyCollectionChangedEventArgs&gt; GetObservableChanges()<br />
        {<br />
            return Observable.FromEvent&lt;NotifyCollectionChangedEventHandler, NotifyCollectionChangedEventArgs&gt;(<br />
                h =&gt;<br />
                {<br />
                    NotifyCollectionChangedEventHandler handler = new NotifyCollectionChangedEventHandler(<br />
                        (sender, e) =&gt;<br />
                        {<br />
                            h(e);<br />
                        });<br />
                    return handler;<br />
                },<br />
                h =&gt; CollectionChanged += h,<br />
                h =&gt; CollectionChanged -= h<br />
                );<br />
        }</p>
<p>        public IObservable&lt;List&lt;TValue&gt;&gt; GetObservableAddedValues()<br />
        {<br />
            return GetObservableChanges()<br />
                .Where(evt =&gt;<br />
                    {<br />
                        if (evt.Action == NotifyCollectionChangedAction.Add)<br />
                            return true;</p>
<p>                        if (evt.Action == NotifyCollectionChangedAction.Replace)<br />
                            return true;</p>
<p>                        return false;<br />
                    })<br />
                .Select(evt =&gt;<br />
                    {<br />
                        return evt.NewItems.Cast&lt;KeyValuePair&lt;TKey, TValue&gt;&gt;().Select(x =&gt; x.Value).ToList();<br />
                    });<br />
        }</p>
<p>        public IObservable&lt;List&lt;TValue&gt;&gt; GetObservableRemovedValues()<br />
        {<br />
            return GetObservableChanges()<br />
                .Where(evt =&gt;<br />
                    {<br />
                        if (evt.Action == NotifyCollectionChangedAction.Remove)<br />
                            return true;<br />
                        if (evt.Action == NotifyCollectionChangedAction.Replace)<br />
                            return true;</p>
<p>                        return false;<br />
                    })<br />
                .Select(evt =&gt;<br />
                {<br />
                    return evt.OldItems.Cast&lt;KeyValuePair&lt;TKey, TValue&gt;&gt;().Select(x =&gt; x.Value).ToList();<br />
                });<br />
        }</p>
<p>        #region IDictionary&lt;TKey,TValue&gt; Members</p>
<p>        public void Add(TKey key, TValue value)<br />
        {<br />
            Insert(key, value, true);<br />
        }</p>
<p>        public bool ContainsKey(TKey key)<br />
        {<br />
            return Dictionary.ContainsKey(key);<br />
        }</p>
<p>        public ICollection&lt;TKey&gt; Keys<br />
        {<br />
            get { return Dictionary.Keys; }<br />
        }</p>
<p>        public bool Remove(TKey key)<br />
        {<br />
            if (key == null) throw new ArgumentNullException(&quot;key&quot;);</p>
<p>            TValue value;<br />
            Dictionary.TryGetValue(key, out value);<br />
            var removed = Dictionary.Remove(key);<br />
            if (removed)<br />
                OnCollectionChanged(NotifyCollectionChangedAction.Remove, new KeyValuePair&lt;TKey, TValue&gt;(key, value));</p>
<p>            return removed;<br />
        }</p>
<p>        public bool TryGetValue(TKey key, out TValue value)<br />
        {<br />
            return Dictionary.TryGetValue(key, out value);<br />
        }</p>
<p>        public ICollection&lt;TValue&gt; Values<br />
        {<br />
            get { return Dictionary.Values; }<br />
        }</p>
<p>        public TValue this[TKey key]<br />
        {<br />
            get<br />
            {<br />
                return Dictionary[key];<br />
            }<br />
            set<br />
            {<br />
                Insert(key, value, false);<br />
            }<br />
        }</p>
<p>        #endregion</p>
<p>        #region ICollection&lt;KeyValuePair&lt;TKey,TValue&gt;&gt; Members</p>
<p>        public void Add(KeyValuePair&lt;TKey, TValue&gt; item)<br />
        {<br />
            Insert(item.Key, item.Value, true);<br />
        }</p>
<p>        public void Clear()<br />
        {<br />
            if (Dictionary.Count &gt; 0)<br />
            {<br />
                Dictionary.Clear();<br />
                OnCollectionChanged();<br />
            }<br />
        }</p>
<p>        public bool Contains(KeyValuePair&lt;TKey, TValue&gt; item)<br />
        {<br />
            return Dictionary.Contains(item);<br />
        }</p>
<p>        public void CopyTo(KeyValuePair&lt;TKey, TValue&gt;[] array, int arrayIndex)<br />
        {<br />
            Dictionary.CopyTo(array, arrayIndex);<br />
        }</p>
<p>        public int Count<br />
        {<br />
            get { return Dictionary.Count; }<br />
        }</p>
<p>        public bool IsReadOnly<br />
        {<br />
            get { return Dictionary.IsReadOnly; }<br />
        }</p>
<p>        public bool Remove(KeyValuePair&lt;TKey, TValue&gt; item)<br />
        {<br />
            return Remove(item.Key);<br />
        }</p>
<p>        #endregion</p>
<p>        #region IEnumerable&lt;KeyValuePair&lt;TKey,TValue&gt;&gt; Members</p>
<p>        public IEnumerator&lt;KeyValuePair&lt;TKey, TValue&gt;&gt; GetEnumerator()<br />
        {<br />
            return Dictionary.GetEnumerator();<br />
        }</p>
<p>        #endregion</p>
<p>        #region IEnumerable Members</p>
<p>        IEnumerator IEnumerable.GetEnumerator()<br />
        {<br />
            return ((IEnumerable)Dictionary).GetEnumerator();<br />
        }</p>
<p>        #endregion</p>
<p>        #region INotifyCollectionChanged Members</p>
<p>        public event NotifyCollectionChangedEventHandler CollectionChanged;</p>
<p>        #endregion</p>
<p>        #region INotifyPropertyChanged Members</p>
<p>        public event PropertyChangedEventHandler PropertyChanged;</p>
<p>        #endregion</p>
<p>        public void AddRange(IDictionary&lt;TKey, TValue&gt; items)<br />
        {<br />
            if (items == null) throw new ArgumentNullException(&quot;items&quot;);</p>
<p>            if (items.Count &gt; 0)<br />
            {<br />
                if (Dictionary.Count &gt; 0)<br />
                {<br />
                    if (items.Keys.Any((k) =&gt; Dictionary.ContainsKey(k)))<br />
                        throw new ArgumentException(&quot;An item with the same key has already been added.&quot;);<br />
                    else<br />
                        foreach (var item in items) Dictionary.Add(item);<br />
                }<br />
                else<br />
                    _Dictionary = new Dictionary&lt;TKey, TValue&gt;(items);</p>
<p>                OnCollectionChanged(NotifyCollectionChangedAction.Add, items.ToArray());<br />
            }<br />
        }</p>
<p>        private void Insert(TKey key, TValue value, bool add)<br />
        {<br />
            if (key == null) throw new ArgumentNullException(&quot;key&quot;);</p>
<p>            TValue item;<br />
            if (Dictionary.TryGetValue(key, out item))<br />
            {<br />
                if (add) throw new ArgumentException(&quot;An item with the same key has already been added.&quot;);<br />
                if (Equals(item, value)) return;<br />
                Dictionary[key] = value;</p>
<p>                OnCollectionChanged(NotifyCollectionChangedAction.Replace, new KeyValuePair&lt;TKey, TValue&gt;(key, value), new KeyValuePair&lt;TKey, TValue&gt;(key, item));<br />
            }<br />
            else<br />
            {<br />
                Dictionary[key] = value;</p>
<p>                OnCollectionChanged(NotifyCollectionChangedAction.Add, new KeyValuePair&lt;TKey, TValue&gt;(key, value));<br />
            }<br />
        }</p>
<p>        private void OnPropertyChanged()<br />
        {<br />
            OnPropertyChanged(CountString);<br />
            OnPropertyChanged(IndexerName);<br />
            OnPropertyChanged(KeysName);<br />
            OnPropertyChanged(ValuesName);<br />
        }</p>
<p>        protected virtual void OnPropertyChanged(string propertyName)<br />
        {<br />
            if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs(propertyName));<br />
        }</p>
<p>        private void OnCollectionChanged()<br />
        {<br />
            OnPropertyChanged();<br />
            if (CollectionChanged != null) CollectionChanged(this, new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));<br />
        }</p>
<p>        private void OnCollectionChanged(NotifyCollectionChangedAction action, KeyValuePair&lt;TKey, TValue&gt; changedItem)<br />
        {<br />
            OnPropertyChanged();<br />
            if (CollectionChanged != null) CollectionChanged(this, new NotifyCollectionChangedEventArgs(action, changedItem));<br />
        }</p>
<p>        private void OnCollectionChanged(NotifyCollectionChangedAction action, KeyValuePair&lt;TKey, TValue&gt; newItem, KeyValuePair&lt;TKey, TValue&gt; oldItem)<br />
        {<br />
            OnPropertyChanged();<br />
            if (CollectionChanged != null) CollectionChanged(this, new NotifyCollectionChangedEventArgs(action, newItem, oldItem));<br />
        }</p>
<p>        private void OnCollectionChanged(NotifyCollectionChangedAction action, IList newItems)<br />
        {<br />
            OnPropertyChanged();<br />
            if (CollectionChanged != null) CollectionChanged(this, new NotifyCollectionChangedEventArgs(action, newItems));<br />
        }<br />
    }</p>
<p>[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/03/07/c-comparing-generic-lambda-function-example/">
        C# - an example of comparing C# objects using generic lambda function
      </a>
    </h2>
    <time datetime="2013-03-07">07 March 2013</time>
    <p>[sourcecode language="c"]<br />
var comparer = Comparer&lt;T&gt;‌.Default;<br />
Func&lt;T,T,T&gt; minOf = (‌x, y) =&gt; comparer‌.Compare(‌x, y) &lt; 0 ? x: y;</p>
<p>[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/03/06/create-observable-example-for-c-event/">
        C# - an example of creating an observable object with C# custom event
      </a>
    </h2>
    <time datetime="2013-03-06">06 March 2013</time>
    <p>[sourcecode language="c"]<br />
 public class ValueChangeData<br />
 {<br />
        public object oldValue;<br />
        public object newValue;<br />
 }</p>
<p> public IObservable&lt;ValueChangeData&gt; CreateObservableSourceChange()<br />
 {<br />
     return Observable.Create&lt;ValueChangeData&gt;(<br />
             observer =&gt;<br />
             {<br />
                 DelegateValueChanged changedFunc = new DelegateValueChanged((oldValue, newValue) =&gt;<br />
                 {<br />
                       ValueChangeData data = new ValueChangeData();<br />
                       data.oldValue = oldValue;<br />
                       data.newValue = newValue;<br />
                       observer.OnNext(data);<br />
                  });<br />
                  OnValueChanged += changedFunc;</p>
<p>                  return () =&gt;<br />
                  {<br />
                      OnValueChanged -= changedFunc;<br />
                  };<br />
              }<br />
        );<br />
   }<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/03/06/stdfunction-useful-example/">
        C++11 - a good example of using std::function
      </a>
    </h2>
    <time datetime="2013-03-06">06 March 2013</time>
    <p>[sourcecode language="c"]<br />
struct Wanderer<br />
{<br />
    explicit Wanderer(std::vector&lt;std::function&gt;&amp; update_loop)<br />
    {<br />
        update_loop.emplace_back([this](float dt) { update(dt); });<br />
    }<br />
    void update(float dt);<br />
};</p>
<p>struct Diver<br />
{<br />
    explicit Diver(std::vector&lt;std::function&gt;&amp; update_loop)<br />
    {<br />
        update_loop.emplace_back([this](float dt) { update(dt); });<br />
    }<br />
    void update(float dt);<br />
};</p>
<p>int main()<br />
{<br />
    std::vector&lt;std::function&gt; update_loop;<br />
    Wanderer wanderer{update_loop};<br />
    Diver diver{update_loop};</p>
<p>    while (true)<br />
    {<br />
        for (auto &amp; function : update_loop)<br />
        {<br />
            function(0.016f);<br />
        }<br />
    }<br />
}<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/03/05/simple-makefile-example-for-mpi/">
        Simple Makefile example for MPI
      </a>
    </h2>
    <time datetime="2013-03-05">05 March 2013</time>
    <p>[sourcecode language="c"]<br />
CC=mpicxx<br />
CFLAGS=-c -Wall<br />
LDFLAGS=<br />
SOURCES=test.cpp<br />
OBJECTS=$(SOURCES:.cpp=.o)<br />
EXECUTABLE=test</p>
<p>all: $(SOURCES) $(EXECUTABLE)</p>
<p>$(EXECUTABLE): $(OBJECTS)<br />
	$(CC) $(LDFLAGS) $(OBJECTS) -o $@</p>
<p>.cpp.o:<br />
	$(CC) $(CFLAGS) $&amp;lt; -o $@</p>
<p>clean:<br />
	rm -rf *.o $(EXECUTABLE)<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/03/04/people-want-to-predict-every-events/">
        People want to predict every events
      </a>
    </h2>
    <time datetime="2013-03-04">04 March 2013</time>
    <p>People like predictable events but reality is every moment and events are unpredictable.<br />
I think that main purpose of software engineering is to make unpredictable events to be the predictable events.</p>

  </article>

  <article>
    <h2>
      <a href="/2013/02/25/undef-min-max-macro-in-c-for-windows-vc/">
        C++ - an example of undefining min, max macro with VC++
      </a>
    </h2>
    <time datetime="2013-02-25">25 February 2013</time>
    <p>[sourcecode language="c"]<br />
#pragma push_macro(&quot;min&quot;)<br />
#pragma push_macro(&quot;max&quot;)<br />
#undef min<br />
#undef max</p>
<p>// call min, max</p>
<p>#pragma pop_macro(&quot;min&quot;)<br />
#pragma pop_macro(&quot;max&quot;)<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/02/22/vim-commands/">
        vim commands
      </a>
    </h2>
    <time datetime="2013-02-22">22 February 2013</time>
    <p>Cursor movement<br />
[sourcecode language="c"]<br />
    h - move left<br />
    j - move down<br />
    k - move up<br />
    l - move right<br />
    w - jump by start of words (punctuation considered words)<br />
    W - jump by words (spaces separate words)<br />
    e - jump to end of words (punctuation considered words)<br />
    E - jump to end of words (no punctuation)<br />
    b - jump backward by words (punctuation considered words)<br />
    B - jump backward by words (no punctuation)<br />
    0 - (zero) start of line<br />
    ^ - first non-blank character of line<br />
    $ - end of line<br />
    G - Go To command (prefix with number - 5G goes to line 5)<br />
[/sourcecode]<br />
Note: Prefix a cursor movement command with a number to repeat it. For example, 4j moves down 4 lines.<br />
Insert Mode - Inserting/Appending text<br />
[sourcecode language="c"]<br />
    i - start insert mode at cursor<br />
    I - insert at the beginning of the line<br />
    a - append after the cursor<br />
    A - append at the end of the line<br />
    o - open (append) blank line below current line (no need to press return)<br />
    O - open blank line above current line<br />
    ea - append at end of word<br />
    Esc - exit insert mode<br />
[/sourcecode]<br />
Editing<br />
[sourcecode language="c"]<br />
    r - replace a single character (does not use insert mode)<br />
    J - join line below to the current one<br />
    cc - change (replace) an entire line<br />
    cw - change (replace) to the end of word<br />
    c$ - change (replace) to the end of line<br />
    s - delete character at cursor and subsitute text<br />
    S - delete line at cursor and substitute text (same as cc)<br />
    xp - transpose two letters (delete and paste, technically)<br />
    u - undo<br />
    . - repeat last command<br />
[/sourcecode]<br />
Marking text (visual mode)<br />
[sourcecode language="c"]<br />
    v - start visual mode, mark lines, then do command (such as y-yank)<br />
    V - start Linewise visual mode<br />
    o - move to other end of marked area<br />
    Ctrl+v - start visual block mode<br />
    O - move to Other corner of block<br />
    aw - mark a word<br />
    ab - a () block (with braces)<br />
    aB - a {} block (with brackets)<br />
    ib - inner () block<br />
    iB - inner {} block<br />
    Esc - exit visual mode<br />
[/sourcecode]<br />
Visual commands<br />
[sourcecode language="c"]<br />
    &amp;gt; - shift right<br />
    &amp;lt; - shift left<br />
    y - yank (copy) marked text<br />
    d - delete marked text<br />
    ~ - switch case<br />
[/sourcecode]<br />
Cut and Paste<br />
[sourcecode language="c"]<br />
    yy - yank (copy) a line<br />
    2yy - yank 2 lines<br />
    yw - yank word<br />
    y$ - yank to end of line<br />
    p - put (paste) the clipboard after cursor<br />
    P - put (paste) before cursor<br />
    dd - delete (cut) a line<br />
    dw - delete (cut) the current word<br />
    x - delete (cut) current character<br />
[/sourcecode]<br />
Exiting<br />
[sourcecode language="c"]<br />
    :w - write (save) the file, but don&#039;t exit<br />
    :wq - write (save) and quit<br />
    :q - quit (fails if anything has changed)<br />
    :q! - quit and throw away changes<br />
[/sourcecode]<br />
Search/Replace<br />
[sourcecode language="c"]<br />
    /pattern - search for pattern<br />
    ?pattern - search backward for pattern<br />
    n - repeat search in same direction<br />
    N - repeat search in opposite direction<br />
    :%s/old/new/g - replace all old with new throughout file<br />
    :%s/old/new/gc - replace all old with new throughout file with confirmations<br />
[/sourcecode]<br />
Working with multiple files<br />
[sourcecode language="c"]<br />
    :e filename - Edit a file in a new buffer<br />
    :bnext (or :bn) - go to next buffer<br />
    :bprev (of :bp) - go to previous buffer<br />
    :bd - delete a buffer (close a file)<br />
    :sp filename - Open a file in a new buffer and split window<br />
    ctrl+ws - Split windows<br />
    ctrl+ww - switch between windows<br />
    ctrl+wq - Quit a window<br />
    ctrl+wv - Split windows vertically<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2013/02/20/markov-and-viterbi-implemented-by-brian-beckman/">
        Markov and Viterbi - implemented by Brian Beckman
      </a>
    </h2>
    <time datetime="2013-02-20">20 February 2013</time>
    <p>https://github.com/rebcabin/DotNetExtensionsImproved</p>
<p>From Wikipedia - information on Markov and Viterbi:</p>
<p>A hidden Markov model (HMM) is a statistical Markov model in which the system being modeled is assumed to be a Markov process with unobserved (hidden) states</p>
<p>The Viterbi algorithm is a dynamic programming algorithm for finding the most likely sequence of hidden states – called the Viterbi path – that results in a sequence of observed events, especially in the context of Markov information sources, and more generally, hidden Markov models.</p>

  </article>

  <article>
    <h2>
      <a href="/2013/02/12/compiling-of-open-mpi-for-windows/">
        Compiling open MPI application on Windows
      </a>
    </h2>
    <time datetime="2013-02-12">12 February 2013</time>
    <p>When you compile OpenMPI on Windows, you should define the following preprocessor.</p>
<p>OMPI_IMPORTS<br />
OPAL_IMPORTS<br />
ORTE_IMPORTS</p>
<p>Example)<br />
c:\&gt;mpicxx test.cpp -DOMPI_IMPORTS -DOPAL_IMPORTS -DORTE_IMPORTS</p>

  </article>

  <article>
    <h2>
      <a href="/2012/11/23/good-example-of-raii-in-c-with-unique_ptr/">
        C++11 - a good example of RAII by using unique_ptr
      </a>
    </h2>
    <time datetime="2012-11-23">23 November 2012</time>
    <p>[sourcecode language="c"]<br />
class FileDeleter {<br />
void operator()(FILE* fp) { fclose(fp); }<br />
};<br />
unique_ptr&lt;FILE, FileDeleter&gt; fp = fopen(&quot;blah&quot;);</p>
<p>or even</p>
<p>unique_ptr&lt;FILE, int(*)(FILE*)&gt; fp( fopen(&quot;blah&quot;), fclose)<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2012/10/23/simple-uml-diagram-tool-and-documentation-tool/">
        Simple UML diagram tool and documentation tool
      </a>
    </h2>
    <time datetime="2012-10-23">23 October 2012</time>
    <p>Very useful tools for UML and documentation.</p>
<p>Plant UML<br />
http://plantuml.sourceforge.net/</p>
<p>sphinx python documentation<br />
http://sphinx.pocoo.org/</p>

  </article>

  <article>
    <h2>
      <a href="/2012/10/20/spring-roo-postgresql-db-setup-example/">
        Spring Roo Postgresql DB Setup Example
      </a>
    </h2>
    <time datetime="2012-10-20">20 October 2012</time>
    <p>database.driverClassName=org.postgresql.Driver<br />
database.url=jdbc\:postgresql\://localhost\:5432/</p>

  </article>

  <article>
    <h2>
      <a href="/2012/10/17/redirect-to-url-after-login-for-spring-mvc/">
        Spring MVC - Redirect to URL after login
      </a>
    </h2>
    <time datetime="2012-10-17">17 October 2012</time>
    <p>Fortunately, Spring Security has built-in functionality for remembering the URL that was originally requested, and redirecting your users there after they successfully login. The quick answer to your question is that you need to enable this functionality by setting the always-use-default-target option to false in your Spring Security configuration.</p>
<p>For example, here's a common line from the Spring Security config:</p>
<p>[sourcecode language="html"]<br />
&lt;form-login<br />
login-page=&quot;/login.html&quot;<br />
authentication-failure-url=&quot;/login.html?status=LOGIN_FAILURE&quot;<br />
default-target-url=&quot;/secure/index.html&quot;<br />
always-use-default-target=&quot;false /&gt;<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2012/09/28/how-fiddler-works/">
        How fiddler works
      </a>
    </h2>
    <time datetime="2012-09-28">28 September 2012</time>
    <p>https://groups.google.com/forum/?fromgroups=#!topic/httpfiddler/Az0xW2MJMqU</p>
<p>There's tons of information scattered through the various Fiddler<br />
sites and this group. </p>
<p>I think you're asking a more specific question: How does Fiddler tell<br />
WinINET that it wants to be the proxy for a given WinINET connection? </p>
<p>Answer: </p>
<p>if (InternetSetOptionList((IntPtr)0,<br />
INTERNET_OPTION_PER_CONNECTION_OPTION, ref Request, size))<br />
{<br />
    InternetSetOption((IntPtr)0,<br />
INTERNET_OPTION_PROXY_SETTINGS_CHANGED, 0, 0);<br />
} </p>

  </article>

  <article>
    <h2>
      <a href="/2012/09/21/tab-ui-example-in-spring-roo/">
        Tab UI example in spring roo
      </a>
    </h2>
    <time datetime="2012-09-21">21 September 2012</time>
    <p>http://stackoverflow.com/questions/6419885/how-to-add-a-tab-container-to-a-spring-roo-page</p>

  </article>

  <article>
    <h2>
      <a href="/2012/09/06/spring-mvc-with-google-chart-api/">
        Spring MVC with google chart API
      </a>
    </h2>
    <time datetime="2012-09-06">06 September 2012</time>
    <p>Good example</p>
<p><a href="http://himtech-spring.blogspot.com.au/2012/07/spring-mvc-with-google-chart.html">http://himtech-spring.blogspot.com.au/2012/07/spring-mvc-with-google-chart.html</a></p>

  </article>

  <article>
    <h2>
      <a href="/2012/08/17/rdbms-er-diagram-source/">
        RDBMS ER diagram source
      </a>
    </h2>
    <time datetime="2012-08-17">17 August 2012</time>
    <p><a href="http://wofford-ecs.org/dataandvisualization/ermodel/material.htm">http://wofford-ecs.org/dataandvisualization/ermodel/material.htm</a></p>

  </article>

  <article>
    <h2>
      <a href="/2012/08/06/windows-7-memory-profiling-another-example/">
        Windows 7 memory profiling another example
      </a>
    </h2>
    <time datetime="2012-08-06">06 August 2012</time>
    <p>[sourcecode language="c"]<br />
@echo off</p>
<p>set _NT_SYMBOL_PATH=f:\src\Debug\;srv*c:\WebSymbol*http://msdl.microsoft.com/downloads/symbols</p>
<p>xperf -on Base+Cswitch -BufferSize 1024 -MinBuffers 512 -MaxBuffers 512<br />
xperf -start HeapSession -heap -Pids %1 -BufferSize 1024 -MinBuffers 512 -MaxBuffers 512 -stackwalk HeapAlloc+HeapRealloc</p>
<p>echo.<br />
echo Performance Trace started.<br />
echo.<br />
echo When done with profile actions, </p>
<p>pause </p>
<p>echo Generating the report. </p>
<p>xperf -stop HeapSession -stop -d heapUsage.etl</p>
<p>echo.<br />
start xperfview heapUsage.etl</p>
<p>[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2012/07/31/windows-7-memory-profiling-example/">
        Windows 7 memory profiling example
      </a>
    </h2>
    <time datetime="2012-07-31">31 July 2012</time>
    <p><code><br />
@echo off<br />
set _NT_SYMBOL_PATH=F:\src\Release\;srv*c:\WebSymbol*http://msdl.microsoft.com/downloads/symbols&lt;/p&gt;
<p>xperf -on base<br />
xperf -start heapsession -heap -pids %1 -stackwalk HeapAlloc+HeapRealloc -BufferSize 512 -MinBuffers 128 -MaxBuffers 512</p>
<p>echo.<br />
echo Performance Trace started.<br />
echo.<br />
echo When done with profile actions, </p>
<p>pause </p>
<p>xperf -stop heapsession -d heap.etl<br />
xperf -d main.etl<br />
xperf -merge main.etl heap.etl result.etl</p>
<p>echo.<br />
start xperfview result.etl<br />
&lt;/code&gt;</p>
<p>usage: script.cmd [pid]</p>

  &lt;/article&gt;

  <article>
    <h2>
      <a href="/2012/07/31/windows-7-cpu-performance-profiling/">
        Windows 7 CPU performance profiling example
      </a>
    </h2>
    <time datetime="2012-07-31">31 July 2012</time>
    <p><code><br />
@echo off<br />
set _NT_SYMBOL_PATH=f:\src\Debug\;srv*c:\WebSymbol*http://msdl.microsoft.com/downloads/symbols&lt;/p&gt;
<p>xperf -on Latency -stackwalk profile</p>
<p>echo.<br />
echo Performance Trace started.<br />
echo.<br />
echo When done with profile actions, </p>
<p>pause </p>
<p>echo.<br />
xperf -d Trace.etl</p>
<p>echo.<br />
start xperfview Trace.etl<br />
&lt;/code&gt;</p>
<p>On windows 64 bits, the following registry should be added to record the call stack.</p>
<p><code><br />
REG ADD "HKLM\System\CurrentControlSet\Control\Session Manager\Memory Management" -v DisablePagingExecutive -d 0x1 -t REG_DWORD -f<br />
</code></p>

  &lt;/article&gt;

  <article>
    <h2>
      <a href="/2012/01/25/load-a-binary-file-with-c/">
        Load a binary file with C++
      </a>
    </h2>
    <time datetime="2012-01-25">25 January 2012</time>
    <p>[sourcecode language="c"]<br />
bool LoadBinaryFile(std::wstring const&amp; path, std::vector&lt;unsigned char&gt;&amp; data)<br />
{<br />
	try<br />
	{<br />
		std::basic_ifstream&lt;unsigned char, std::char_traits&gt; ifs(path, std::ios::binary);<br />
		std::istreambuf_iterator streamIter(ifs);</p>
<p>		data.clear();<br />
		std::copy(streamIter, std::istreambuf_iterator(), std::back_inserter(data));<br />
		return true;<br />
	}<br />
	catch(...)<br />
	{<br />
	}</p>
<p>	return false;<br />
}<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2012/01/25/load-text-file-with-c/">
        Load a text file with C++
      </a>
    </h2>
    <time datetime="2012-01-25">25 January 2012</time>
    <p>[sourcecode language="cpp"]<br />
std::wstring fromAscii(const char* str)<br />
{<br />
	std::wstring sOutput;<br />
	int inputLength = (int)strlen(str);<br />
	if(inputLength)<br />
	{<br />
		inputLength++; // allow for null terminator<br />
		wchar_t* buf = new wchar_t[inputLength];<br />
		MultiByteToWideChar(CP_ACP, 0, str, inputLength, buf, inputLength);<br />
		sOutput += buf;<br />
		delete[] buf;<br />
	}<br />
	return sOutput;<br />
}</p>
<p>bool LoadTextFile(std::wstring const&amp; path, std::wstring&amp; text)<br />
{<br />
    try<br />
    {<br />
        std::ifstream ifs(path);<br />
        std::string str((std::istreambuf_iterator(ifs)), std::istreambuf_iterator());</p>
<p>        text = fromAscii(str.c_str());<br />
        return true;<br />
   }<br />
   catch(...)<br />
   {<br />
   }</p>
<p>    return false;<br />
}<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2012/01/25/setting-up-boost-unit-testing-visual-studio-project/">
        Setting up boost unit testing visual studio project
      </a>
    </h2>
    <time datetime="2012-01-25">25 January 2012</time>
    <p>1. Header<br />
[sourcecode language="cpp"]<br />
#define BOOST_TEST_MODULE TestExample<br />
#include<br />
using namespace boost::unit_test;<br />
[/sourcecode]<br />
2. Linked library<br />
[sourcecode language="cpp"]<br />
libboost_unit_test_framework-vc100-mt-sgd-1_46_1.lib<br />
[/sourcecode]</p>
<p>3. Global fixture<br />
[sourcecode language="cpp"]<br />
struct TestGlobalInitFixture<br />
{<br />
	TestGlobalInitFixture()<br />
	{<br />
		BOOST_TEST_MESSAGE(&quot;### Global initialization for testing ###&quot;);<br />
	}</p>
<p>	~TestGlobalInitFixture()<br />
	{<br />
		BOOST_TEST_MESSAGE(&quot;### Global deinitialization for testing ###&quot;);<br />
	}<br />
};<br />
BOOST_GLOBAL_FIXTURE(TestGlobalInitFixture);<br />
[/sourcecode]</p>
<p>4. Fixture<br />
[sourcecode language="cpp"]<br />
struct BuisnessLogicTestSuiteFixture<br />
{<br />
	BuisnessLogicTestSuiteFixture()<br />
	{<br />
	}</p>
<p>	~BuisnessLogicTestSuiteFixture()<br />
	{<br />
	}<br />
};</p>
<p>BOOST_FIXTURE_TEST_SUITE(TestSuite_BusinessLogic, BuisnessLogicTestSuiteFixture)<br />
[/sourcecode]</p>
<p>5. Test case example<br />
[sourcecode language="cpp"]<br />
BOOST_AUTO_TEST_CASE(test_should_check_xxx)<br />
{<br />
}<br />
[/sourcecode]<br />
6. run a specific test case example</p>
<p>[sourcecode language="cpp"]<br />
--run_test=*/test_should_check_xxx<br />
[/sourcecode]</p>
<p>7. change log level<br />
[sourcecode language="cpp"]<br />
--result_code=no --report_level=no<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2011/02/07/understanding-com-threading-modelapartment/">
        Understanding COM threading model(Apartment)
      </a>
    </h2>
    <time datetime="2011-02-07">07 February 2011</time>
    <p>I have found very useful articles for understanding COM threading model about Apartment. If you want to understand COM Apartment model, the following articles will help you a lot.</p>
<p><a href="http://www.codeguru.com/cpp/com-tech/activex/apts/article.php/c5529">Understanding COM Apartments, Part I - CodeGuru</a><br />
<a href="http://www.codeguru.com/cpp/com-tech/activex/apts/article.php/c5533">Understanding COM Apartments, Part II - CodeGuru</a></p>
<p><a href="http://www.codeproject.com/KB/COM/CCOMThread.aspx">Understanding The COM Single-Threaded Apartment Part 1 - CodeProject</a><br />
<a href="http://www.codeproject.com/KB/COM/CCOMThread2.aspx">Understanding The COM Single-Threaded Apartment Part 2 - CodeProject</a></p>

  </article>

  <article>
    <h2>
      <a href="/2011/01/30/c-exception-difference-passing-arguments-between-exception-and-function/">
        C++ exception - difference passing arguments between exception and function
      </a>
    </h2>
    <time datetime="2011-01-30">30 January 2011</time>
    <p>오랜만에 다시 C++책을 읽으면서 아래의 C++ exception에 대한 자세한 사항을 늘어 봅니다.</p>
<p>1. exception object are always copied<br />
- 복사할때 항상 static type정보를 이용해서 복사한다는 사실.<br />
2. exception are fewer type conversion than functions.<br />
- implicit컨버전에 제약이 많음.<br />
3. catch causes are examined in the order of source code<br />
- 만약 exception의 base클래스가 먼저 있으면 다른 child class는 실행할 기회를 갖지를 못함. </p>

  </article>

  <article>
    <h2>
      <a href="/2011/01/10/something-about-net-profiler/">
        Something about .NET profiler
      </a>
    </h2>
    <time datetime="2011-01-10">10 January 2011</time>
    <p>The following link explains about how .NET profiler works.</p>
<p>http://blogs.msdn.com/b/davbr/archive/2007/03/22/enter-leave-tailcall-hooks-part-1-basics.aspx</p>
<p>Using the Profiling API Enter/Leave Function Hooks<br />
http://blogs.msdn.com/b/jkeljo/archive/2005/08/11/450506.aspx</p>

  </article>

  <article>
    <h2>
      <a href="/2010/07/19/windbg-example-for-debugging-reference-count-of-com-object/">
        WinDbg example for debugging reference count of COM object
      </a>
    </h2>
    <time datetime="2010-07-19">19 July 2010</time>
    <p>One of the hardest things is debugging a reference count leak. COM objects lifetime depends on the reference count (read here for more...). So each client of a COM object must call AddRef on the IUnknown interface when going to use it and it must call Release when done. If any client (and there might be many many of a single one) violates this rule you get into severe trouble. </p>
<p>Scenarios<br />
1.) Number of Release calls = Number of AddRef calls<br />
This is the normal scenario: As soon as no client needs the server object anymore it is getting destroyed</p>
<p>2.) Number of Release calls &gt; Number of AddRef calls<br />
If Release is called one time too often another client might crash because the server get's destroyed too early - bad thing here is that you see the crash in some place but this does not tell you where is root cause is located. All you know is which objects reference count has been corrupted.</p>
<p>3.) Number of AddRef calls &gt; Number of Release calls<br />
If AddRef is called one time too often the reference count never reaches 0 and hence the server object never get's destroyed. This is causing memory leaks and also might cause resource leaks. The effect of this scenario is much less obvious: You might see memory increasing over time and/or performance degrade and/or resources to be locked when they should be unlocked again.</p>
<p>Finding the place where the unbalanced AddRef/Release occurred might be like finding the needle in the hay. I did research in the Google reachable web but didn't find a good tool available that really assist's in this task. Luckily Sara Ford described in this post the first step you need to take in order to get the data necessary to drill down into the problem.</p>
<p>Somehow I didn't manage to set the trace points in Visual Studio 2005 (can anybody tell me how to set a break point on a single objects AddRef, Release methods?) so I launched my beloved WinDbg.</p>
<p>First I created script to create me an xml snippet for an event that alters the ref count (I didn't find a better name so I called it ToXml.txt and placed it into my scripts folder):</p>
<p>.printf "--&gt;\n%d\n&lt;!--\n&quot;</p>
<p>Then I placed a break point on the server objects constructor</p>
<p>bp MyServer!CMyClass::CMyClass</p>
<p>When the breakpoint hit, I stepped out + into CComCreator::CreateInstance and then stepped over the p-&gt;SetVoid(pv); call in this class.<br />
(I think it should be possible to set a breakpoint directly at MyServer!ATL::CComCreator&lt;ATL::CComObject &gt;::CreateInstance+0xb1, but I didn't try...)</p>
<p>Now I gathered the address of m_dwRef by:</p>
<p>0:000&gt; ?? &amp;(p-&gt;m_dwRef)<br />
long * 0x110d724c</p>
<p>Next thing to do is setting the data breakpoint by:</p>
<p>ba w4 0x110d724c "$$&gt;a&lt;C:/windbg/scripts/ToXml.txt 0f084cb4;gc&quot;</p>
<p>(you might need to change the path &#039;C:/windbg/scripts/&#039;)</p>
<p>With .logopen we make sure that we directly write all events into an logfile:</p>
<p>.logopen c:\temp\Events.xml</p>
<p>Now let the application run with &#039;g&#039; or  and do whatever creates your ref counting problem.</p>
<p>When done break into and close the log with .logclose.</p>
<p>At this point we are half the way through. The Events.xml we created is not valid xml. You need to add </p>
<p>at the end.</p>

  </article>

  <article>
    <h2>
      <a href="/2010/06/30/preventing-formatting-of-wordpress/">
        Posting Source Code in WordPress blog
      </a>
    </h2>
    <time datetime="2010-06-30">30 June 2010</time>
    <p>http://en.support.wordpress.com/code/posting-source-code/</p>

  </article>

  <article>
    <h2>
      <a href="/2010/06/29/build-boost-1-43-for-iphone-sdk-4-0/">
        Build boost 1.43 for iPhone SDK 4.0
      </a>
    </h2>
    <time datetime="2010-06-29">29 June 2010</time>
    <p>1. modify user.config.jam in tools/build/v2 directory<br />
[sourcecode language="cpp"]<br />
using darwin : 4.2.1~iphone<br />
: /Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++ -arch armv7<br />
: &lt;striper&gt;<br />
: &lt;architecture&gt;arm &lt;target-os&gt;iphone<br />
;</p>
<p>using darwin : 4.2.1~iphonesim<br />
: /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/g++<br />
: &lt;striper&gt;<br />
: &lt;architecture&gt;x86 &lt;target-os&gt;iphone<br />
;<br />
[/sourcecode]</p>
<p>2. compile<br />
[sourcecode language="cpp"]<br />
./bootstrap.sh<br />
./bjam --prefix=${HOME}/usr/boost-1.43/iphone toolset=darwin architecture=arm target-os=iphone macosx-version=iphone-4.0 define=_LITTLE_ENDIAN link=static install<br />
./bjam --prefix=${HOME}/usr/boost-1.43/iphoneSimulator toolset=darwin architecture=x86 target-os=iphone macosx-version=iphonesim-4.0 link=static install&lt;/pre&gt;<br />
[/sourcecode]</p>

  </article>

  <article>
    <h2>
      <a href="/2010/06/28/link-boost-library-for-iphone/">
        Link Boost library for iPhone
      </a>
    </h2>
    <time datetime="2010-06-28">28 June 2010</time>
    <p>Once you compile the boost libraries you want, right click your target after you made your project, and click Get Info. Then go to the Build Tab and find the setting called "Header Search Paths." Add the path to your boost library there. Then, in the general tab, you should add in a Linked Library for any of the compiled Boost libraries that you're using. If they're statically linked, I think the extension is usually .a. If they're dynamically linked, the extension is .dylib.</p>

  </article>

  <article>
    <h2>
      <a href="/2010/06/24/starting-blog/">
        블로그 시작
      </a>
    </h2>
    <time datetime="2010-06-24">24 June 2010</time>
    <p>오픈 소스 베이스로 만들어진 블로그 중에 괜찮은것 같고 모든 내용을 XML로 Export할 수 있다는 말에 선택하게 되었네요.</p>

  </article>

  <article>
    <h2>
      <a href="/2009/08/14/shared-source-common-language-infrastructure-2-0-release/">
        Shared Source Common Language Infrastructure 2.0 Release
      </a>
    </h2>
    <time datetime="2009-08-14">14 August 2009</time>
    <div id="msgcns!F610C86C6D82B8A2!264" class="bvMsg">
<div><a href="http://www.microsoft.com/downloads/details.aspx?familyid=8C09FD61-3F26-4555-AE17-3121B4F51D4D&amp;displaylang=en">http://www.microsoft.com/downloads/details.aspx?familyid=8C09FD61-3F26-4555-AE17-3121B4F51D4D&amp;displaylang=en</a></div>
</div>

  </article>

  <article>
    <h2>
      <a href="/2009/07/08/mac-osx-nvcap/">
        Mac OSX NVCAP
      </a>
    </h2>
    <time datetime="2009-07-08">08 July 2009</time>
    <div id="msgcns!F610C86C6D82B8A2!263" class="bvMsg">
<div><span>URL: <a href="http://nvinject.free.fr/forums/viewtopic.php?t=214">http://nvinject.free.fr/forums/viewtopic.php?t=214</a></span></div>
<div><span></span> </div>
<div><span>Thanks to Arti and the lot of experiments we've been doing last weeks on hackintoshes and PowerPC Macintoshes with NVIDIA cards, NVCAP is now mostly mastered. As I've said <a href="http://nvinject.free.fr/forums/viewtopic.php?t=193" target="_blank"><u><font color="#0000ff">here</font></u></a>, NVCAP can't fix everything, but it is necessary to get proper display detection on VGA and DVI outputs. TV out and laptops' displays may require further hacking... &lt;/p&gt;
<p>Anyway, first I'll show what are the important part in NVCAP and how they work : </p>
<p>04000000 0000<span style="font-weight:bold;">xx</span>00 <span style="font-weight:bold;">xx</span>000000 00000000 00000000 </p>
<p>the bold bytes define output channels. They are using a &quot;bitmap&quot; setting to define which output is used on which channel, and there's actually not so many possibilities for usual cards. </p>
<p><span style="font-weight:bold;">Most cards are using 4 or 5 outputs :</span> </p>
<p>1/ DVI - 2/ VGA, 3/ VGA, 4/ TV out <br />1/ DVI - 2/ VGA, 3/ DVI - 4/ VGA, 5/ TV out </p>
<p>Later I'll show how this is defined in a PC NVIDIA ROM for GeForce 5/6/7/8 series. </p>
<p>- <span style="text-decoration:underline;">so most dual DVI cards will have channels using this settings</span> (5 different outputs) : </p>
<p><span style="font-weight:bold;">channel 1</span> : <br />DVI + VGA --&gt; bitmap 0 0 0 1 1 --&gt; hex 03 <br /><span style="font-weight:bold;">channel 2</span> : <br />DVI + VGA + TV --&gt; bitmap 1 1 1 0 0 --&gt; hex 1c </p>
<p>or </p>
<p><span style="font-weight:bold;">channel 1</span> : <br />DVI + VGA + TV --&gt; bitmap 1 0 0 1 1 --&gt; hex 13 <br /><span style="font-weight:bold;">channel 2</span> : <br />DVI + VGA + TV --&gt; bitmap 0 1 1 0 0 --&gt; hex 0c </p>
<p><span style="font-style:italic;">TV output is usually defined a the last entry in the output definitions in VGA ROM, that's why it is using the last position (5th position on dual DVI cards, or 4th position on DVI + VGA cards)</span> </p>
<p>- <span style="text-decoration:underline;">for DVI + VGA cards</span> (4 different outputs) : </p>
<p><span style="font-weight:bold;">channel 1</span> : <br />DVI + VGA --&gt; bitmap 0 0 1 1 --&gt; hex 03 <br /><span style="font-weight:bold;">channel 2</span> : <br />VGA + TV --&gt; bitmap 1 1 0 0 --&gt; hex 0c </p>
<p>or </p>
<p><span style="font-weight:bold;">channel 1</span> : <br />DVI + VGA + TV--&gt; bitmap 1 0 1 1 --&gt; hex 0b <br /><span style="font-weight:bold;">channel 2</span> : <br />VGA --&gt; bitmap 0 1 0 0 --&gt; hex 04 <br />(as you can see, TV out is on last available postition, so 4th position for 4 available outputs) </p>
<p>or </p>
<p><span style="font-weight:bold;">channel 1</span> : <br />VGA --&gt; bitmap 0 0 0 1 --&gt; hex 01 <br /><span style="font-weight:bold;">channel 2</span> : <br />DVI + VGA + TV --&gt; bitmap 1 1 1 0 --&gt; hex 0e <br />or </p>
<p><span style="font-weight:bold;">channel 1</span> : <br />VGA + TV --&gt; bitmap 1 0 0 1 --&gt; hex 09 <br /><span style="font-weight:bold;">channel 2</span> : <br />DVI + VGA --&gt; bitmap 0 1 1 0 --&gt; hex 06 </p>
<p><span style="font-style:italic;">The main difference with windows behaviour is that Windows NVIDIA drivers are able to dynamically define which channel to use for TV output, whereas OS X drivers use a fixed position for TV out, NVCAP being defined in VGA ROM and saved in IOreg. This setting is not able to change in OS X once drivers are loaded.</span> </p>
<p><span style="font-weight:bold;">So usual NVCAP for standard cards would be</span> : </p>
<p><span style="text-decoration:underline;">dual DVI cards</span> : </p>
<p>04000000 0000<span style="font-weight:bold;">03</span>00 <span style="font-weight:bold;">0c</span>000000 00000000 00000000 --&gt; disabling 5th position, no TV output. <br />04000000 0000<span style="font-weight:bold;">13</span>00 <span style="font-weight:bold;">0c</span>000000 00000000 00000000 --&gt; 5th position for TV out set on channel 1, TV out available when no other display is connected on channel 1. <br />04000000 0000<span style="font-weight:bold;">03</span>00 <span style="font-weight:bold;">1c</span>000000 00000000 00000000 --&gt; 5th position for TV out set on channel 2, TV out available when no other display is connected on channel 2. </p>
<p><span style="text-decoration:underline;">DVI + VGA cards</span> : </p>
<p>04000000 0000<span style="font-weight:bold;">01</span>00 <span style="font-weight:bold;">06</span>000000 00000000 00000000 --&gt; disabling 4th position, no TV output, only 1 output on channel 1 and DVI + VGA on channel 2 <br />04000000 0000<span style="font-weight:bold;">03</span>00 <span style="font-weight:bold;">04</span>000000 00000000 00000000 --&gt; disabling 4th position, no TV output, only 1 output on channel 2 and DVI + VGA on channel 1 <br />04000000 0000<span style="font-weight:bold;">03</span>00 <span style="font-weight:bold;">0e</span>000000 00000000 00000000 --&gt; VGA only on channel 1, 4th position for TV out set on channel 2, TV out available when no other display is connected on channel 2. <br />04000000 0000<span style="font-weight:bold;">09</span>00 <span style="font-weight:bold;">06</span>000000 00000000 00000000 --&gt; VGA only on channel 1, 4th position for TV out set on channel 1, TV out available when no other display is connected on channel 1 (DVI + VGA on channel 2 using position 2 and 3, bitmap 0 1 1 0) </p>
<p><span style="font-style:italic;">Laptops usually have first channel using only 1 output for internal panel, on position 1, and depending on how many other outputs are available, second channel can use positions 2, 3, and 4</span> : <br />04000000 0000<span style="font-weight:bold;">01</span>00 <span style="font-weight:bold;">02</span>000000 00000000 00000000 <br />04000000 0000<span style="font-weight:bold;">01</span>00 <span style="font-weight:bold;">06</span>000000 00000000 00000000 <br />04000000 0000<span style="font-weight:bold;">01</span>00 <span style="font-weight:bold;">0e</span>000000 00000000 00000000 </p>
<p>more about the VGA ROM output definitions later...&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;

  &lt;/article&gt;

  <article>
    <h2>
      <a href="/2009/01/30/check-out-clr-profiler-2-0/">
        Check out CLR Profiler 2.0
      </a>
    </h2>
    <time datetime="2009-01-30">30 January 2009</time>
    <div id="msgcns!F610C86C6D82B8A2!251" class="bvMsg"><a href="http://blogs.msdn.com/jmstall/archive/2005/12/17/CLR-profiler-2-0-available.aspx">http://blogs.msdn.com/jmstall/archive/2005/12/17/CLR-profiler-2-0-available.aspx</a>&lt;/p&gt;
<div></div>
</div>

  </article>

  <article>
    <h2>
      <a href="/2008/12/05/windows-with-c-asynchronous-winhttp/">
        Windows With C++ Asynchronous WinHTTP
      </a>
    </h2>
    <time datetime="2008-12-05">05 December 2008</time>
    <div id="msgcns!F610C86C6D82B8A2!250" class="bvMsg"><a href="http://msdn.microsoft.com/en-us/magazine/cc716528.aspx">http://msdn.microsoft.com/en-us/magazine/cc716528.aspx</a>&lt;/p&gt;
<div></div>
</div>

  </article>

  <article>
    <h2>
      <a href="/2008/08/15/sysinternal-source-website/">
        Sysinternal source website
      </a>
    </h2>
    <time datetime="2008-08-15">15 August 2008</time>
    <div id="msgcns!F610C86C6D82B8A2!235" class="bvMsg">
<div><a href="http://doc.sch130.nsc.ru/www.sysinternals.com/ntw2k/source.shtml">http://doc.sch130.nsc.ru/www.sysinternals.com/ntw2k/source.shtml</a></div>
</div>

  </article>

  <article>
    <h2>
      <a href="/2008/08/03/playing-with-ptrace-part-i/">
        Playing with ptrace, Part I
      </a>
    </h2>
    <time datetime="2008-08-03">03 August 2008</time>
    <div id="msgcns!F610C86C6D82B8A2!221" class="bvMsg">
<div><a href="http://www.linuxjournal.com/article/6100">http://www.linuxjournal.com/article/6100</a></div>
</div>

  </article>

  <article>
    <h2>
      <a href="/2008/07/24/an-introduction-to-c-generics/">
        An introduction to c# Generics
      </a>
    </h2>
    <time datetime="2008-07-24">24 July 2008</time>
    <div id="msgcns!F610C86C6D82B8A2!218" class="bvMsg">
<div><a href="http://msdn.microsoft.com/en-us/library/ms379564(VS.80).aspx">http://msdn.microsoft.com/en-us/library/ms379564(VS.80).aspx</a></div>
</div>

  </article>

  <article>
    <h2>
      <a href="/2008/07/17/writing-a-script-debugger-without-using-the-mdm/">
        Writing a script debugger without using the MDM
      </a>
    </h2>
    <time datetime="2008-07-17">17 July 2008</time>
    <div id="msgcns!F610C86C6D82B8A2!217" class="bvMsg">
<div><a href="http://blogs.msdn.com/greggm/archive/2008/06/09/writing-a-script-debugger-without-using-the-mdm.aspx">http://blogs.msdn.com/greggm/archive/2008/06/09/writing-a-script-debugger-without-using-the-mdm.aspx</a></div>
</div>

  </article>

  <article>
    <h2>
      <a href="/2008/07/16/visual-studio-debug-engine-sample/">
        Visual Studio Debug Engine Sample
      </a>
    </h2>
    <time datetime="2008-07-16">16 July 2008</time>
    <div id="msgcns!F610C86C6D82B8A2!212" class="bvMsg">
<div><a href="http://code.msdn.microsoft.com/debugenginesample/Release/ProjectReleases.aspx?ReleaseId=501">http://code.msdn.microsoft.com/debugenginesample/Release/ProjectReleases.aspx?ReleaseId=501</a></div>
</div>

  </article>

  <article>
    <h2>
      <a href="/2008/06/18/interesting-visual-c-resources/">
        Interesting Visual C++ Resources
      </a>
    </h2>
    <time datetime="2008-06-18">18 June 2008</time>
    <div id="msgcns!F610C86C6D82B8A2!211" class="bvMsg"> http://blogs.msdn.com/vcblog/archive/2008/06/12/interesting-visual-c-resources.aspx</div>

  </article>

  <article>
    <h2>
      <a href="/2008/05/26/improve-scalability-with-new-thread-pool-apis/">
        Improve Scalability With New Thread Pool APIs
      </a>
    </h2>
    <time datetime="2008-05-26">26 May 2008</time>
    <div id="msgcns!F610C86C6D82B8A2!209" class="bvMsg">
<div><a href="http://msdn.microsoft.com/en-au/magazine/cc163327.aspx">http://msdn.microsoft.com/en-au/magazine/cc163327.aspx</a></div>
</div>

  </article>

  <article>
    <h2>
      <a href="/2008/05/26/strategies-for-implementing-posix-condition-variables-on-win32/">
        Strategies for Implementing POSIX Condition Variables on Win32
      </a>
    </h2>
    <time datetime="2008-05-26">26 May 2008</time>
    <div id="msgcns!F610C86C6D82B8A2!208" class="bvMsg">
<div><a href="http://www.cs.wustl.edu/~schmidt/win32-cv-1.html">http://www.cs.wustl.edu/~schmidt/win32-cv-1.html</a></div>
</div>

  </article>

  <article>
    <h2>
      <a href="/2008/05/26/modality-part-3-the-wm_quit-message/">
        Modality, part 3: The WM_QUIT message
      </a>
    </h2>
    <time datetime="2008-05-26">26 May 2008</time>
    <div id="msgcns!F610C86C6D82B8A2!204" class="bvMsg">
<div><a href="http://blogs.msdn.com/oldnewthing/archive/2005/02/22/378018.aspx">http://blogs.msdn.com/oldnewthing/archive/2005/02/22/378018.aspx</a></div>
</div>

  </article>

  <article>
    <h2>
      <a href="/2008/05/23/an-introduction-to-xml-data-binding-in-c/">
        An Introduction to XML Data Binding in C++
      </a>
    </h2>
    <time datetime="2008-05-23">23 May 2008</time>
    <div id="msgcns!F610C86C6D82B8A2!203" class="bvMsg">
<div><a href="http://www.artima.com/cppsource/xml_data_binding.html">http://www.artima.com/cppsource/xml_data_binding.html</a></div>
</div>

  </article>

  <article>
    <h2>
      <a href="/2008/05/22/msdn-magazine-home/">
        MSDN magazine home
      </a>
    </h2>
    <time datetime="2008-05-22">22 May 2008</time>
    <div id="msgcns!F610C86C6D82B8A2!201" class="bvMsg">
<div><a href="http://msdn.microsoft.com/en-au/magazine/default.aspx">http://msdn.microsoft.com/en-au/magazine/default.aspx</a></div>
</div>

  </article>

  <article>
    <h2>
      <a href="/2008/05/22/the-humble-dialog-box/">
        The Humble Dialog Box
      </a>
    </h2>
    <time datetime="2008-05-22">22 May 2008</time>
    <div id="msgcns!F610C86C6D82B8A2!200" class="bvMsg">
<div><a href="http://objectmentor.com/resources/articles/TheHumbleDialogBox.pdf">http://objectmentor.com/resources/articles/TheHumbleDialogBox.pdf</a></div>
</div>

  </article>

  <article>
    <h2>
      <a href="/2008/05/22/registration-free-activation-of-com-components-a-walkthrough/">
        Registration-Free Activation of COM Components: A Walkthrough
      </a>
    </h2>
    <time datetime="2008-05-22">22 May 2008</time>
    <div id="msgcns!F610C86C6D82B8A2!199" class="bvMsg">
<div><a href="http://msdn.microsoft.com/en-au/ms973913.aspx">http://msdn.microsoft.com/en-au/ms973913.aspx</a></div>
</div>

  </article>

  <article>
    <h2>
      <a href="/2008/05/22/simplified-unit-testing-for-native-c-applications/">
        Simplified Unit Testing for Native C++ Applications
      </a>
    </h2>
    <time datetime="2008-05-22">22 May 2008</time>
    <div id="msgcns!F610C86C6D82B8A2!197" class="bvMsg">
<div>
<div><a href="http://msdn.microsoft.com/en-au/magazine/cc136757.aspx">http://msdn.microsoft.com/en-au/magazine/cc136757.aspx</a></div>
<div> </div>
<div> </div>
<table>
<tbody>
<tr valign="top">
<td>
<p><span><strong><font face="Arial" color="#003399" size="3">This article discusses: </font></strong></span></p>
<ul>
<li>Unit testing philosophy
</li>
<li>Setting up WinUnit
</li>
<li>Building test fixtures
</li>
<li>Implementation and customization </li>
</ul>
</td>
<td><strong><font size="3"><font color="#003399"><font face="Arial"><span>This article uses the following technologies: </span><br /></font></font></font></strong>C++, Visual Studio</td>
</tr>
</tbody>
</table>
<div>
<div>
<div> </div>
<div><img style="vertical-align:middle;border-width:0;" src="http://i.msdn.microsoft.com/Platform/Controls/CollapsibleArea/resources/minus.gif" /> Contents </div>
<div style="display:block;overflow:hidden;width:auto;height:auto;">
<div style="border-right:medium none;border-top:medium none;display:block;border-left:medium none;border-bottom:medium none;"><a href="http://nsclass.spaces.live.com/mmm2008-05-08_20.17/#S1"><u><font color="#0033cc">Start Testing Today</font></u></a> <br /><a href="http://nsclass.spaces.live.com/mmm2008-05-08_20.17/#S2"><u><font color="#0033cc">Getting Started with WinUnit</font></u></a> <br /><a href="http://nsclass.spaces.live.com/mmm2008-05-08_20.17/#S3"><u><font color="#0033cc">Fixtures: Setup and Teardown</font></u></a> <br /><a href="http://nsclass.spaces.live.com/mmm2008-05-08_20.17/#S4"><u><font color="#0033cc">Running WinUnit</font></u></a> <br /><a href="http://nsclass.spaces.live.com/mmm2008-05-08_20.17/#S5"><u><font color="#0033cc">Implementation Details</font></u></a> <br /><a href="http://nsclass.spaces.live.com/mmm2008-05-08_20.17/#S6"><u><font color="#0033cc">Going Further...</font></u></a> </div>
</div>
</div>
<div>These days it can be hard not to feel downright oppressed as a native code developer—it seems like the developers using the Microsoft<span><font size="1">®</font></span> .NET Framework get all the cool tools!</div>
<div>I've always been interested in good engineering practices, but I've been frustrated by so-called &quot;engineering experts&quot; who extol the virtues of unit testing, yet can offer little more than hand waving when asked for tool recommendations for native code. What I really wanted, and what I thought would be the easiest to integrate into an automated build system, was the equivalent of NUnit for native code. That is, I wanted to be able to make a DLL with only tests in it, and have an external test-runner that would run those tests and take care of the reporting and logging. I also wanted to be able to declare each test only once, and to have a minimum of extra code in my test DLL.</div>
<div>So I built a native code unit testing tool I call WinUnit. I'll go into more detail later, but here's a little preview of how easy it is to create and run a test DLL using WinUnit. To start, create a single CPP file—let's call it DummyTest.cpp:</div>
<div>
<div>
<div>
<div></div>
<div><a><img height="9" src="http://i.msdn.microsoft.com/Platform/Controls/CodeSnippet/resources/copy_off.gif" align="middle" border="0" /><font color="#0000ff"> Copy Code</font></a></div>
</div>
<pre>#include &quot;WinUnit.h&quot;

BEGIN_TEST(DummyTest)
&#123;
   WIN_ASSERT_TRUE(3 &gt; 4, _T(&quot;You should see this error message.&quot;));
&#125;
END_TEST
</pre>
</div>
</div>
<div>Build it into a DLL with this command:</div>
<div>
<div>
<div>
<div></div>
<div><a><img height="9" src="http://i.msdn.microsoft.com/Platform/Controls/CodeSnippet/resources/copy_off.gif" align="middle" border="0" /><font color="#0000ff"> Copy Code</font></a></div>
</div>
<pre>cl /EHsc /LD DummyTest.cpp
</pre>
</div>
</div>
<div>Then execute WinUnit on it:</div>
<div>
<div>
<div>
<div></div>
<div><a><img height="9" src="http://i.msdn.microsoft.com/Platform/Controls/CodeSnippet/resources/copy_off.gif" align="middle" border="0" /><font color="#0000ff"> Copy Code</font></a></div>
</div>
<pre>&gt;WinUnit DummyTest.dll
Processing [DummyTest.dll]...
(DummyTest)
DummyTest.cpp(5): error : WIN_ASSERT_TRUE failed: &quot;3 &gt; 4&quot;. You should see this error message.
FAILED: DummyTest.
[DummyTest.dll] FAILED.  Tests run: 1; Failures: 1.

There were errors.
Tests run: 1; Failed: 1.
</pre>
</div>
</div>
<div>Changing 3 &gt; 4 to the true expression 4 &gt; 3 will of course get rid of the failure.</div>
<div>WinUnit will accept any number of DLLs or directories, process them, report the total results, and return with an exit code. By the way, if you haven't guessed, WinUnit only works on Windows<span><font size="1">®</font></span>.</div>
<div>I concede that the world was not entirely devoid of options for C++ unit testing before I wrote my own tool. The problem I found with existing offerings was that they generally placed a higher priority on portability than on being easy to understand and use out of the box. CppUnitLite is my favorite among the portable set, but because it's designed to be very customizable, there was more overhead than I would have liked in getting it set up. The line between test-runner and tests is blurry due to the fact that it's all done within the same binary, and the code that actually invokes the test-running functionality needs to be written and put somewhere. In addition, the tricky macro implementation was hard to explain to my coworkers and thus made adoption difficult. However, if you require portability to other operating systems, CppUnitLite is definitely worth taking a look at.</div>
<div>Other options that have been available for C++ unit testing for quite some time are the same options available for testing .NET code, most notably NUnit and the Visual Studio<span><font size="1">®</font></span> Team Test unit testing framework. Since both will execute any properly attributed .NET assembly, you can use these tools with tests written in managed C++ (now C++/CLI). The main inconvenience I find with this approach is that the tools are highly geared toward .NET development and not toward native code. This should not be a surprise. But it is hard to use most of the provided assert methods with native C++ for they expect .NET-style objects, and as a developer you will need to have at least a passing familiarity with C++/CLI (or Managed Extensions for C++) to write the tests. You'll find more details about limitations with this approach in the footnote on the Visual Studio 2005 Product Feature Comparisons page (<a href="http://msdn2.microsoft.com/vstudio/aa700921.aspx"><u><font color="#0033cc">msdn2.microsoft.com/vstudio/aa700921.aspx</font></u></a>). As mentioned previously, I find the &quot;ease of convincing my coworkers to use it&quot; factor important, and using the managed tools provides an extra hurdle in this area.</div>
<p></p>
<div>Start Testing Today</div>
<div>
<div>Code Coverage and Convenience </div>
<div><span><strong><font face="Arial" color="#003399" size="3">I'd like to briefly address </font></strong></span>a feature of Visual Studio Team System (VSTS) that deserves a mention for its relevance to unit testing: its set of code coverage tools. While the exact significance of code coverage numbers is debatable, reviewing your coverage after you've carefully constructed thoughtful tests can be, if nothing else, an excellent sanity check.</div>
<div>Unfortunately, VSTS does not make it easy to use (or even to know about) the code coverage tools for native code. Along with the code for this project, I've included a set of macros that will make it easy for you to do code coverage on native projects—in conjunction with WinUnit as well as with any other scenarios you have for exercising your code.</div>
<div>To use these macros, simply load WinUnit.vsmacros into Macro Explorer in Visual Studio. In the _Variables module you'll need to set variables for your particular local machine, which includes the path to the Visual Studio performance tools (including the code coverage tools) and the paths to WinUnit.exe and WinUnit.h. You'll find more details in readme.txt as well as the _Readme module in the macro project.</div>
<div>The CodeCoverage module includes macros for starting and stopping coverage data collection, instrumenting binaries (you can specify a list of binaries to be instrumented for each project), and launching a .coverage file with the results.</div>
<div>The RunningTests module includes macros for running the test containing the cursor in the currently opened document, all tests in the currently opened file, and all tests in the selected project. Other macros provide shortcuts for changing relevant project settings and for running different sets of tests with code coverage turned on.</div>
<p>&lt;/div&gt;
<div>Before getting into WinUnit usage, I want to discuss my philosophy about unit testing in general and unit testing native code in particular. If you're like me, you may have noticed that the clean, elegant, and modular classes shown in unit testing examples seem to have nothing in common with the blob of legacy code you typically have to work with. If you think that you must rework your entire code base before you can unit test, I can tell you those tests are going to be a long time coming. The good news is that a testable unit doesn't have to be a clean, elegant class. It's simply the smallest unit of code that can be tested in isolation. If that's your whole application, well, there's no better time to start than now!</div>
<div>Seriously, if your application consists of exactly one executable and its only interface is through a GUI, you may have to do a bit of refactoring to make the non-GUI part automatable. However, it can certainly be done incrementally. I recommend reading the whitepaper &quot;The Humble Dialog Box,&quot; by Michael Feathers, for a sensible approach to making a GUI application more testable (objectmentor.com/resources/articles/TheHumbleDialogBox.pdf).</div>
<div>Your ultimate goal should be to have automated developer tests running as part of your build process, making it as easy as possible for developers to add tests as they fix bugs or write new code. Once the infrastructure is set up, you can work on refactoring existing code to allow better test coverage in problem areas. The book Working Effectively with Legacy Code, also by Michael Feathers (Prentice Hall, 2004), is an excellent resource for guiding you through this process (and many of the examples are in C++).</div>
<div>If your application is already split up into static libraries with clearly defined interfaces, you can link these directly into test DLLs and you'll be able to get at the individual classes to test them. Consider having one test DLL per library to maintain clear interface boundaries.</div>
<div>If your application contains separate DLLs, or is itself a library provided in DLL form, there are two ways you can access the exports to exercise them in tests. If you use import libraries, you can link those into test DLLs and have transparent access to the production functions for testing. If you do not use import libraries, use GetProcAddress in conjunction with LoadLibrary and FreeLibrary to get the DLL exports to call directly in your tests.</div>
<div>Note that if your DLL is a COM DLL, it doesn't need to be registered to be tested. Windows XP and later offer a mechanism called &quot;Registration-Free COM,&quot; which you could use to get around the usual registration requirement for COM DLLs. You'll find details at msdn2.microsoft.com/ms973913. As a bonus, once you've gotten it working for tests, you can use the feature in your production code.</div>
<div>If your application is a monolithic executable, you probably want to split it up so you have at least one library. But you might also want to test the executable in its entirety to check for proper exit codes, for example. In my unit tests for WinUnit itself, I included some tests that exercised the entire executable. You can find these within the TestWinUnit project—in the MainTest.cpp file—in the accompanying code download.</div>
<div>At risk of coming across as the style police, there's one point about physically organizing production code that I would be remiss if I did not mention. In my years at Microsoft working on large C++ projects, I've found that one thing that made modularity (and testability) exceedingly difficult was having multiple classes jumbled together across arbitrary .cpp and .h files. It's up to you how strictly you adhere to this practice in your production code, but I find associating one and only one class with a similarly named pair of .cpp and .h files to be helpful. As a bonus, it simplifies keeping your tests organized, with one matching test file for each class. You can see some examples in my projects WinUnitLib and TestWinUnit.</div>
<div>There is one other book I recommend reading if the whole concept of unit testing has just passed you by, or if you're a developer in need of a refresher on how to think like a tester: Pragmatic Unit Testing with C# in NUnit, by Andrew Hunt and David Thomas, (Pragmatic Bookshelf, 2006) is an excellent primer. (There's also a Java counterpart.) The meat of the book is actually language-independent, despite the language-specific title. A cute mnemonic from the book is that unit tests should be A-TRIP: Automatic, Thorough, Repeatable, Independent, and Professional. Repeatable means each test produces the same results any time it is run. Independent means tests should be able to be run in any order, with no dependencies on each other. This point will be important to remember later.</div>
<p></p>
<div>Getting Started with WinUnit</div>
<div>The first thing you'll need to do is build WinUnit and place WinUnit.exe and WinUnit.h in known locations on your machine. You can refer to the readme.txt included with the code for more information. Next, to get started writing tests, create a test project. As I demonstrated earlier, this is just a regular C++ DLL. For information on creating a native C++ DLL project in Visual Studio, see the walkthrough at msdn2.microsoft.com/ms235636.</div>
<div>As with other unit testing frameworks, several assert macros are provided with WinUnit for your test-writing convenience, such as the WIN_ASSERT_TRUE you saw earlier. (I'll discuss the other WIN_ASSERT macros you can use with WinUnit later in this section.) The asserts perform their magic using C++ exceptions, so you should keep the Visual Studio 2005 default compiler option of /EHsc when building your test DLL. However, there's no requirement for your production code to use C++ exception handling, even if it's linked into your test DLL. (Note that the Visual C++<span><font size="1">®</font></span> 2005 toolset or later is required to use the provided assert macros.) You'll also want to add WinUnit's Include directory to your test project's include path as well (see <strong>Figure 1</strong>), or to your global include paths.</div>
<div><img alt="" src="http://nsclass.spaces.live.com/mmm2008-05-08_20.17/cc136757.fig01.gif" /> &lt;/p&gt;
<div>Figure 1<strong> Setting Project Include Path </strong>(Click the image for a larger view)</div>
</div>
<div>I designed WinUnit to work well from the command line, which means you can set up Visual Studio to run WinUnit on your test project after every build. To do so, go to the project Properties of your test project, and under Configuration Properties | Build Events, select Post-Build Event (see <strong>Figure 2</strong>). For Command Line, type the full path to where you copied WinUnit.exe followed by &quot;$(TargetPath)&quot; (include the double quotes). For Description, type &quot;Running WinUnit...&quot; (without the quotes). If you add the folder containing WinUnit.exe to your global executables path, you don't need to specify the full path here.</div>
<div><img alt="" src="http://nsclass.spaces.live.com/mmm2008-05-08_20.17/cc136757.fig02.gif" /> &lt;/p&gt;
<div>Figure 2<strong> Configuring WinUnit as a Post-Build Event </strong>(Click the image for a larger view)</div>
</div>
<div>Alternatively (or in addition), you may wish to add WinUnit.exe to your Tools menu in order to run your tests. To accomplish this, go to Tools | External Tools and click Add. For Title, type &quot;&amp;WinUnit&quot;. For Command, browse to WinUnit.exe. For Arguments, type &quot;$(TargetPath)&quot; (include the double quotes). For Initial Directory, type $(TargetDir). Uncheck Close on Exit and check Use Output Window (see <strong>Figure 3</strong>). At this point in the process you can select WinUnit from the Tools menu, and it will execute on whichever project is currently selected.</div>
<div><img alt="" src="http://nsclass.spaces.live.com/mmm2008-05-08_20.17/cc136757.fig03.gif" /> &lt;/p&gt;
<div>Figure 3<strong> Adding WinUnit to External Tools </strong></div>
</div>
<div>Finally, to set up your project for debugging, go to project Properties | Configuration Properties | Debugging, and type the full path to WinUnit.exe in the Command textbox. For Command Arguments, type &quot;$(TargetPath)&quot; (include the double quotes).</div>
<div>To verify everything in your project is set up correctly, you can add DummyTest.cpp to your project and build. The project should build, but if you've typed in the false assertion line as presented, you'll clearly see a test failure on that line.</div>
<div>Now that the setup is out of the way, it's time to look at the different ways of using WinUnit features to write tests. You may want to switch to WinUnitComplete.sln for the moment to follow along with my examples. The projects containing the examples are SampleLib and TestSampleLib. SampleLib is a static library that happens to contain exactly one class, BinaryNumber. TestSampleLib is a test DLL that links with SampleLib.lib and includes tests for the BinaryNumber class along with a few other examples.</div>
<div>General WinUnit test functions always begin with BEGIN_TEST(TestName) and end with END_TEST. Within each test, one or more WIN_ASSERT macros are used in order to verify various bits of functionality.</div>
<div>My example BinaryNumber class has two constructors. One takes an unsigned short, and one takes a string comprising the characters 1 and 0. I intend for the constructors to result in equivalent objects when passed equivalent values. So I may have a test like this:</div>
<div>
<div>
<div>
<div></div>
<div><a><img height="9" src="http://i.msdn.microsoft.com/Platform/Controls/CodeSnippet/resources/copy_off.gif" align="middle" border="0" /><font color="#0000ff"> Copy Code</font></a></div>
</div>
<pre>BEGIN_TEST(BinaryNumberConstructorsShouldBeEquivalent)
&#123;
  unsigned short numericValue = 7;
  BinaryNumber bn1(numericValue);
  BinaryNumber bn2(&quot;111&quot;);
  WIN_ASSERT_EQUAL(bn1.NumericValue, bn2.NumericValue, 
    _T(&quot;Both values should be %u.&quot;), numericValue);
  WIN_ASSERT_STRING_EQUAL(bn1.StringValue, bn2.StringValue);
&#125;
END_TEST
</pre>
</div>
</div>
<div>This test will fail if either of the two assert lines is false. Notice that the WIN_ASSERT_EQUAL macro in this example is passed the two values being compared, plus two extra arguments. These comprise an informational message that will be shown if the assert fails. All WIN_ASSERT macros take an optional printf-style format string and arguments for this purpose.</div>
<div>Since I implemented operator '==' for the BinaryNumber class, I can also use the following construction (which is what I have in my sample file, BinaryNumberTest.cpp):</div>
<div>
<div>
<div>
<div></div>
<div><a><img height="9" src="http://i.msdn.microsoft.com/Platform/Controls/CodeSnippet/resources/copy_off.gif" align="middle" border="0" /><font color="#0000ff"> Copy Code</font></a></div>
</div>
<pre>BEGIN_TEST(
  BinaryNumberConstructorsShouldBeEquivalent)
&#123;
  BinaryNumber bn1(7);
  BinaryNumber bn2(&quot;111&quot;);
  WIN_ASSERT_EQUAL(bn1, bn2);
&#125;
END_TEST
</pre>
</div>
</div>
<div>Here's a different type of assert, WIN_ASSERT_THROWS. Suppose I use exceptions for my error handling in my production code, and I want to force an error condition in my test to ensure that the proper exception is thrown. I might make a test like this:</div>
<div>
<div>
<div>
<div></div>
<div><a><img height="9" src="http://i.msdn.microsoft.com/Platform/Controls/CodeSnippet/resources/copy_off.gif" align="middle" border="0" /><font color="#0000ff"> Copy Code</font></a></div>
</div>
<pre>BEGIN_TEST(
  BinaryNumberPlusRecognizesIntegerOverflow)
&#123;
  unsigned short s = USHRT_MAX / 2 + 1;
  
    BinaryNumber bn1(s);
    BinaryNumber bn2(s);
  
    WIN_ASSERT_THROWS(bn1 + bn2, 
      BinaryNumber::IntegerOverflowException)
  &#125;
  END_TEST
</pre>
</div>
</div>
<div>I know that my BinaryNumber class only holds an unsigned short. I also know that the operator '+' should detect when I'm trying to add two numbers together that are too big. WIN_ASSERT_THROWS takes an expression that should throw a C++ exception, along with the exception type itself. The test fails if the exception is not thrown.</div>
<div><strong>Figure 4</strong> lists the WIN_ASSERT macros available in WinUnit.h, as well as one non-assert, WIN_TRACE, that can be used to provide tracing through the OutputDebugString API function in your tests.</div>
<div>
<div><img style="vertical-align:middle;border-width:0;" src="http://i.msdn.microsoft.com/Platform/Controls/CollapsibleArea/resources/plus.gif" /> Figure 4 Assert and Trace Macros in WinUnit.h </div>
<div style="display:none;overflow:hidden;width:auto;height:0;">
<div style="border-right:medium none;border-top:medium none;display:block;border-left:medium none;border-bottom:medium none;">&lt;/p&gt;
<table>
<tbody>
<tr>
<th>Macro
</th>
<th>Description
</th>
</tr>
<tr>
<td valign="top">WIN_ASSERT_EQUAL(expected, actual, ...)
</td>
<td valign="top">Compares expected and actual using ==; fails if they are not equal.
</td>
</tr>
<tr>
<td valign="top">WIN_ASSERT_NOT_EQUAL(notExpected, actual, ...)
</td>
<td valign="top">Compares notExpected and actual using !=; fails if they are equal.
</td>
</tr>
<tr>
<td valign="top">WIN_ASSERT_STRING_EQUAL(expected, actual, ...)
</td>
<td valign="top">Does a case-sensitive string comparison of expected and actual. Strings to be compared can be either wide-character or not, but both must be the same &quot;wideness&quot;. (This does not affect the &quot;wideness&quot; of the optional message.)
</td>
</tr>
<tr>
<td valign="top">WIN_ASSERT_ZERO(zeroExpression, ...)
</td>
<td valign="top">Compares zeroExpression to 0; fails if they are not equal.
</td>
</tr>
<tr>
<td valign="top">WIN_ASSERT_NOT_ZERO(nonzeroExpression, ...)
</td>
<td valign="top">Compares nonzeroExpression to 0; fails if they are equal.
</td>
</tr>
<tr>
<td valign="top">WIN_ASSERT_NULL(nullExpression, ...)
</td>
<td valign="top">Compares nullExpression to NULL; fails if they are not equal. Only works with pointers.
</td>
</tr>
<tr>
<td valign="top">WIN_ASSERT_NOT_NULL(notNullExpression, ...)
</td>
<td valign="top">Compares notNullExpression to NULL; fails if they are equal. Only works with pointers.
</td>
</tr>
<tr>
<td valign="top">WIN_ASSERT_FAIL(message, ...)
</td>
<td valign="top">Always fails; informational message is required.
</td>
</tr>
<tr>
<td valign="top">WIN_ASSERT_TRUE(trueExpression, ...)
</td>
<td valign="top">Succeeds if trueExpression evaluates to true.
</td>
</tr>
<tr>
<td valign="top">WIN_ASSERT_FALSE(falseExpression, ...)
</td>
<td valign="top">Succeeds if !falseExpression evaluates to true.
</td>
</tr>
<tr>
<td valign="top">WIN_ASSERT_WINAPI_SUCCESS(trueExpression, ...)
</td>
<td valign="top">Succeeds if trueExpression evaluates to true. Use this with Windows functions whose documentation says to call GetLastError for more error information on failure. This macro/function calls GetLastError and includes the string associated with the error code as part of the message.
</td>
</tr>
<tr>
<td valign="top">WIN_ASSERT_THROWS(expression, exceptionType, ...)
</td>
<td valign="top">Succeeds if expression throws a C++ exception of type exceptionType.
</td>
</tr>
<tr>
<td valign="top">WIN_TRACE(message, ...)
</td>
<td valign="top">Used to output informational messages for debugging purposes. Its use does not cause a test failure. &quot;message&quot; is a printf-style format string, followed by any arguments.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div>Note that for either WIN_ ASSERT_EQUAL or WIN_ASSERT_NOT_EQUAL, if a numeric literal is passed in as one of the values and an unsigned number as the other, you'll get a signed/unsigned mismatch, as numeric literal integers always template-match to int. To get around this, postfix numeric literals with 'U' so they will match as unsigned.</div>
<div>All asserts take an optional printf-style format string, plus arguments. If _UNICODE is defined, these message strings will be wchar_t*, so use the _T (&quot;&quot;) macro around the format strings, or L&quot;&quot; if you're building Unicode-only.</div>
<div>You may have noticed that my test names begin with the name of the class being tested, followed by the name or description of the method being tested, followed by a partial sentence describing what the test is supposed to show. This convention serves two purposes. First, it is an easy way to make clear exactly what you're trying to test, which can be useful when looking at test output. Second, it's a way to group tests to be run together at varying levels of granularity. WinUnit does not inherently have the concept of groups of tests, as do its .NET Framework-based equivalents. The way to tell WinUnit to run a subset of tests in a project is with the -p (prefix) option. You specify a prefix string, and WinUnit will run all the tests whose names start with that string. By naming your tests with words ordered least to most specific, you will be able to easily run related groups of tests from the command line.</div>
<p></p>
<div>Fixtures: Setup and Teardown</div>
<div>In real life, the things you're trying to test are often not as simple as the examples I've shown so far. There may be cases where several setup steps are required to get to the point where you can actually execute the functionality you want to verify. For example, if I were testing a function that deletes all the files in a directory, I might first need to create a directory and put files in it. Or I might want to set an environment variable required for the functionality I'm testing.</div>
<div>To maintain the independence and repeatability of tests, it's important that whatever setup work you do at the beginning of a test is undone at the end of the test. WinUnit supports the concepts of single-test fixtures. These are setup and teardown function pairs that will be executed at the start and finish of each test associated with them. This is especially helpful if you have several tests that require the same setup and cleanup.</div>
<div><strong>Figure 5</strong> shows an example of a fixture, with setup and teardown functions implemented and two tests associated with it. Note that this example also shows that you can also use the various WIN_ASSERT macros even in fixtures so you can report failure if the fixture you define does not work correctly.</div>
<div>
<div><img style="vertical-align:middle;border-width:0;" src="http://i.msdn.microsoft.com/Platform/Controls/CollapsibleArea/resources/plus.gif" /> Figure 5 Setup and Teardown Test Fixture </div>
<div style="display:none;overflow:hidden;width:auto;height:0;">
<div style="border-right:medium none;border-top:medium none;display:block;border-left:medium none;border-bottom:medium none;">
<div>
<div>
<div></div>
<div><a><img height="9" src="http://i.msdn.microsoft.com/Platform/Controls/CodeSnippet/resources/copy_off.gif" align="middle" border="0" /><font color="#0000ff"> Copy Code</font></a></div>
</div>
<pre>//  DeleteFileTest.cpp

#include &quot;WinUnit.h&quot;

#include &lt;windows.h&gt;

// Fixture must be declared.
FIXTURE(DeleteFileFixture);

namespace
&#123;
    TCHAR s_tempFileName[MAX_PATH] = _T(&quot;&quot;);
    bool IsFileValid(TCHAR* fileName);
&#125;

// Both SETUP and TEARDOWN must be present. 
SETUP(DeleteFileFixture)
&#123;
    // This is the maximum size of the directory passed to GetTempFileName.
    const unsigned int maxTempPath = MAX_PATH - 14; 
    TCHAR tempPath[maxTempPath + 1] = _T(&quot;&quot;);
    DWORD charsWritten = GetTempPath(maxTempPath + 1, tempPath);
    // (charsWritten does not include null character)
    WIN_ASSERT_TRUE(charsWritten &lt;= maxTempPath &amp;&amp; charsWritten &gt; 0, 
        _T(&quot;GetTempPath failed.&quot;));

    // Create a temporary file
    UINT tempFileNumber = GetTempFileName(tempPath, _T(&quot;WUT&quot;), 
        0, // This means the file will get created and closed.
        s_tempFileName);

    // Make sure that the file actually exists
    WIN_ASSERT_WINAPI_SUCCESS(IsFileValid(s_tempFileName), 
        _T(&quot;File %s is invalid or does not exist.&quot;), s_tempFileName);
&#125;

// TEARDOWN does the inverse of SETUP, as well as undoing 
// any side effects the tests could have caused.
TEARDOWN(DeleteFileFixture)
&#123;
    // Delete the temp file if it still exists.
    if (IsFileValid(s_tempFileName))
    &#123;
        // Ensure file is not read-only
        DWORD fileAttributes = GetFileAttributes(s_tempFileName);
        if (fileAttributes &amp; FILE_ATTRIBUTE_READONLY)
        &#123;
            WIN_ASSERT_WINAPI_SUCCESS(
                SetFileAttributes(s_tempFileName, 
                    fileAttributes ^ FILE_ATTRIBUTE_READONLY),
                    _T(&quot;Unable to undo read-only attribute of file %s.&quot;),
                    s_tempFileName);
        &#125;

        // Since I'm testing DeleteFile, I use the alternative CRT file
        // deletion function in my cleanup.
        WIN_ASSERT_ZERO(_tremove(s_tempFileName), 
            _T(&quot;Unable to delete file %s.&quot;), s_tempFileName);
    &#125;

    // Clear the temp file name.
    ZeroMemory(s_tempFileName, 
        ARRAYSIZE(s_tempFileName) * sizeof(s_tempFileName[0]));
&#125;

BEGIN_TESTF(DeleteFileShouldDeleteFileIfNotReadOnly, DeleteFileFixture)
&#123;
    WIN_ASSERT_WINAPI_SUCCESS(DeleteFile(s_tempFileName));
    WIN_ASSERT_FALSE(IsFileValid(s_tempFileName), 
        _T(&quot;DeleteFile did not delete %s correctly.&quot;),
        s_tempFileName);
&#125;
END_TESTF

BEGIN_TESTF(DeleteFileShouldFailIfFileIsReadOnly, DeleteFileFixture)
&#123;
    // Set file to read-only
    DWORD fileAttributes = GetFileAttributes(s_tempFileName);
    WIN_ASSERT_WINAPI_SUCCESS(
        SetFileAttributes(s_tempFileName, 
        fileAttributes | FILE_ATTRIBUTE_READONLY));

    // Verify that DeleteFile fails with ERROR_ACCESS_DENIED
    // (according to spec)
    WIN_ASSERT_FALSE(DeleteFile(s_tempFileName));
    WIN_ASSERT_EQUAL(ERROR_ACCESS_DENIED, GetLastError());
&#125;
END_TESTF

namespace
&#123;
    bool IsFileValid(TCHAR* fileName)
    &#123;
        return (GetFileAttributes(fileName) != INVALID_FILE_ATTRIBUTES);
    &#125;
&#125;

</pre>
</div>
</div>
</div>
</div>
<div>In this example, I'm pretending I was the writer of the Windows DeleteFile function and I'm writing some test functions for it. In my setup function, I first create a temporary file. In my test functions, I exercise the DeleteFile functionality by trying to delete the temporary file. Although I expect the file to have been deleted by the end of one of the tests, I still check whether the file exists and delete it in the teardown function. The teardown should undo whatever the setup did and should not count on the tests succeeding. This ensures that your tests are independent and repeatable.</div>
<div>As you can see, there's a slightly different syntax for tests that use fixtures. Instead of the BEGIN_TEST and END_TEST construction, BEGIN_TESTF and END_TESTF are used, with the fixture name following the name of the test in BEGIN_TESTF. The setup and teardown functions are indicated by the all-caps SETUP and TEARDOWN, with the name of the fixture in parentheses.</div>
<div>You'll notice I've used the WIN_ASSERT_WINAPI_SUCCESS macro a few times in this example. As indicated in <strong>Figure 4</strong>, this macro is to be used in conjunction with Windows functions whose documentation explicitly says to call GetLastError for more information in the case of failure. The first parameter to the assert should be an expected true statement related to the function call. (It can be the function call itself, if it returns a Boolean.) If the function itself is not part of the expression, it's a good idea to include a message indicating the name of the function that has failed if this assert fires, to make it easier to see at a glance from the output exactly what happened. The assert implementation calls GetLastError and retrieves the message string associated with the error code and adds that to the test results.</div>
<div>To see a fixture used in a different way, see BinaryNumberTest.cpp in the TestSampleLib project. There I used it to open and close a data provider from which I read rows of test data to be used in my tests. In this case, the data provider is just a text file, and each row is a line, but it could just as easily be an XML file or even a database table. You should consider using a similar approach if you are testing functionality that can benefit from large amounts of data being run through it.</div>
<div>One difference between WinUnit fixtures and those of other unit test frameworks is that they are never automatically associated with tests—the association must be explicit. This also means that it is possible to have more than one fixture in a single file.</div>
<p></p>
<div>Running WinUnit</div>
<div>Now let's take a look at how WinUnit works. WinUnit uses one of the only reflection-like features available for native code on Windows: discovering the exports of a DLL. There was a great two-part article by Matt Pietrek in MSDN<span><font size="1">®</font></span> Magazine in February and March 2002 (&quot;Inside Windows: An In-Depth Look into the Win32<span><font size="1">®</font></span> Portable Executable File Format&quot;), which I referred to extensively in figuring out how to do this. It works for both 32-bit and 64-bit executables, but be sure to use a 64-bit build of WinUnit to run 64-bit test binaries (32-bit executables can't run 64-bit ones).</div>
<div>The command line syntax for WinUnit is:</div>
<div>
<div>
<div>
<div></div>
<div><a><img height="9" src="http://i.msdn.microsoft.com/Platform/Controls/CodeSnippet/resources/copy_off.gif" align="middle" border="0" /><font color="#0000ff"> Copy Code</font></a></div>
</div>
<pre>WinUnit [options] &#123;dllName | directoryName&#125;+
</pre>
</div>
</div>
<div>The tool takes one or more DLLs or directories over which all contained DLLs will be enumerated. It discovers the exports and executes the ones whose name—which must be undecorated—starts with TEST_. This restriction is intended to ensure that only functions you meant to run as tests will be run, since the function prototype is assumed. The expected function prototype is as follows:</div>
<div>
<div>
<div>
<div></div>
<div><a><img height="9" src="http://i.msdn.microsoft.com/Platform/Controls/CodeSnippet/resources/copy_off.gif" align="middle" border="0" /><font color="#0000ff"> Copy Code</font></a></div>
</div>
<pre>bool __cdecl TEST_TestName(wchar_t* errorBuffer, size_t bufferSize);
</pre>
</div>
</div>
<div>The errorBuffer parameter receives error output from the test; bufferSize is the size of the buffer in wide characters. If the test function returns false (or throws a structured exception handling (SEH) exception), it's considered a failed test, and whatever output was put in the errorBuffer is displayed.</div>
<div>Besides DLLs and directory names, WinUnit takes several optional command-line arguments, which are shown in <strong>Figure 6</strong>. By default the output of WinUnit goes to the console. Informational messages go to stdout; error messages go to stderr. After WinUnit has processed the specified DLLs, it exits with a code of 0 for success and non-zero otherwise (see <strong>Figure 7</strong>).</div>
<div>
<div><img style="vertical-align:middle;border-width:0;" src="http://i.msdn.microsoft.com/Platform/Controls/CollapsibleArea/resources/plus.gif" /> Figure 7 WinUnit Exit Codes </div>
<div style="display:none;overflow:hidden;width:auto;height:0;">
<div style="border-right:medium none;border-top:medium none;display:block;border-left:medium none;border-bottom:medium none;">&lt;/p&gt;
<table>
<tbody>
<tr>
<th>Code
</th>
<th>Description
</th>
</tr>
<tr>
<td valign="top">0
</td>
<td valign="top">No errors (any tests that were run succeeded).
</td>
</tr>
<tr>
<td valign="top">1
</td>
<td valign="top">One or more tests failed.
</td>
</tr>
<tr>
<td valign="top">2
</td>
<td valign="top">An unhandled exception caused premature termination.
</td>
</tr>
<tr>
<td valign="top">-1
</td>
<td valign="top">Usage error.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div>
<div><img style="vertical-align:middle;border-width:0;" src="http://i.msdn.microsoft.com/Platform/Controls/CollapsibleArea/resources/plus.gif" /> Figure 6 WinUnit Command-Line Arguments </div>
<div style="display:none;overflow:hidden;width:auto;height:0;">
<div style="border-right:medium none;border-top:medium none;display:block;border-left:medium none;border-bottom:medium none;">&lt;/p&gt;
<table>
<tbody>
<tr>
<th>Parameter
</th>
<th>Description
</th>
</tr>
<tr>
<td valign="top">-q
</td>
<td valign="top">Do not output to console.
</td>
</tr>
<tr>
<td valign="top">-n
</td>
<td valign="top">No interactive UI (error dialogs are turned off as much as possible). Recommended for automated builds.
</td>
</tr>
<tr>
<td valign="top">-b
</td>
<td valign="top">Output to debugger (by default, output goes only to console).
</td>
</tr>
<tr>
<td valign="top">-p string
</td>
<td valign="top">Only run tests starting with the prefix string (it's case-insensitive).
</td>
</tr>
<tr>
<td valign="top">-x
</td>
<td valign="top">Ignore the requirement for the TEST_ prefix of exports--process all exports regardless of name. (This only works in conjunction with the -s option, to avoid the danger of running functions with the wrong function prototype.)
</td>
</tr>
<tr>
<td valign="top">-s
</td>
<td valign="top">Show test names only. Default is to run them.
</td>
</tr>
<tr>
<td valign="top">-o filename
</td>
<td valign="top">Put the output in the given file. This is unrelated to the -q and -b options—output can go to any or all of the console, a file, or the debugger.
</td>
</tr>
<tr>
<td valign="top">-v number
</td>
<td valign="top">Run at the given verbosity. 1 is the default. 0 will show you only failing tests and total results.
</td>
</tr>
<tr>
<td valign="top">-l customLoggerString
</td>
<td valign="top">The custom logger string is the name of a DLL in which you've implemented a custom logger, followed optionally by a colon and an initialization string to be passed to the logger's Initialize function.
</td>
</tr>
<tr>
<td valign="top">--variable value
</td>
<td valign="top">This option will set environment variable variable to value value for the lifetime of the WinUnit process. This can be used for passing data to tests via the command line.
</td>
</tr>
<tr>
<td valign="top">-e ( exactTestName* )
</td>
<td valign="top">(Note: This option is included for completeness but is intended only for automation purposes. Use –p for regular use.) Run only tests specified by their full names (case-sensitively), space-delimited, and enclosed in parentheses.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div>The BEGIN_TEST macros used in the examples prepend TEST_ to the test names and use 'extern &quot;C&quot; __declspec(dllexport)' to export the function names undecorated. This is the equivalent of putting them in a .def file for the DLL.</div>
<div>The WIN_ASSERT macros work via C++ exceptions; however, all exceptions are caught within the test functions themselves, so WinUnit doesn't care whether exceptions were used or not. I used exceptions because they make it easy to exit out of any block at any point and still ensure that proper cleanup occurs. You could implement your own test functions that would work just as well with WinUnit entirely without macros by using the function prototype shown earlier, ensuring that the names started with TEST_, and exporting them in undecorated form from a DLL.</div>
<div>The BEGIN_TEST and END_TEST macros declare the function and set up a try/catch block. The WIN_ASSERT macros throw an AssertException class exception on failure, which holds a message string describing the error. If a thrown AssertException is caught, the message is copied into the buffer and the function returns false.</div>
<p></p>
<div>Implementation Details</div>
<div>I initially thought it would be elegant to have no parameters to the test functions, and instead just throw exceptions directly out of the functions and catch and process them in the test runner. This would have meant there was no need for an END_TEST macro. Unfortunately, stack unwinding did not work properly when exceptions were thrown across the DLL boundary, so it ended up working out better to have the exceptions as an implementation detail and catch them within the tests themselves.</div>
<div>Implementing the fixture concept was another challenge. My first idea was to rely on C++ automatic storage and declare an object at the top of the test function whose constructor and destructor would do setup and teardown. However, I soon discovered firsthand why you're not supposed to throw exceptions in destructors. Part of the C++ specification states that when an exception is thrown by a destructor function during stack unwind, the terminate function is called. This state could occur if I implemented fixtures as described and had a fixture object with exception-throwing asserts in its destructor. If the asserts in the fixture object's destructor fired during the stack unwind due to an exception thrown in the body of the function, terminate would be called.</div>
<div>The remedy for this was to ensure that the fixture object's destructor would never be called during a stack unwind by putting it alone in its own try/catch block outside the main try/catch for the function. This necessitated the special fixture syntax using the BEGIN_TESTF and END_TESTF pair to house two try/catch blocks and a fixture object declaration.</div>
<div>Running across the unpleasant terminate behavior made me think of something else I also wanted to make sure to handle: I wanted to provide the option of running in non-interactive mode (currently the –n command line option). WinUnit generally runs non-interactively, but I noticed that when the terminate function was called, it put up a dialog box. I thought dialog boxes like this would be inconvenient in automation scenarios because they would potentially block further automated tasks.</div>
<div>You can see what I did to disable such error messages in ErrorHandler.cpp in the WinUnit project. Interestingly, some of the dialogs that can come up in error conditions are associated with the C Runtime (CRT). This means that setting a global variable in the CRT to turn them off isn't going to do any good if the variable is set in the test-running tool (WinUnit) and the test binary is using a different CRT. If you want to ensure that CRT-specific error dialogs will be turned off, you will need to be sure you are using the same Runtime Library option for building both WinUnit and your test binaries, and that it's one of the DLL options. This option can be found in project Properties | Configuration Properties | C/C++ | Code Generation. By default, it is /MD for release builds and /MDd for debug builds. If you build both WinUnit and your test binaries in Visual Studio 2005 with the same option here, you will have the same CRT instance.</div>
<div>I wanted to have some trace functionality to aid in debugging tests. I decided to take advantage of the fact that my tool is meant to run on Windows and that I know the PE format. I therefore hook (override) OutputDebugStringA and OutputDebugStringW in the test DLL being executed, sending the output wherever I want. I borrowed this part heavily from the code that comes with the book Debugging Applications for Microsoft .NET and Microsoft Windows (Microsoft Press<span><font size="1">®</font></span>, 2003), by John Robbins, who kindly gave me permission to use it in this project. I then provided a WIN_TRACE macro which funnels its arguments to OutputDebugString.</div>
<div>I also wanted to have some way to pass information from the command line into the tests. I thought this might be useful if, for example, you were using the tool as part of an automated build, and there was some known location that contained test data files, and you wanted the tests to know about that location. I decided on environment variables. Arbitrary variables can be set for the process using the &quot;--&quot; command-line option; they can be retrieved within the tests using WinUnit::Environment::GetString (a wrapper on GetEnvironmentVariable), GetEnvironmentVariable itself, or getenv_s/_wgetenv_s.</div>
<div>Finally, I wanted to offer the ability for a user to write a custom logger. Internally, a logger chain is used, so you can opt to send output to console, to OutputDebugString, to a file, or to any combination of those. A fourth option is to provide your own custom logger, which I'll talk about next.</div>
<p></p>
<div>Going Further...</div>
<div>WinUnit should solve your basic native C++ unit testing needs, but there are a few things you may want to consider adding to it.</div>
<div>You may have noticed the –l command-line option in <strong>Figure 4</strong> for passing in a custom logger. You might want to use this feature to send WinUnit output to an XML file or even to a database for use in a reporting system. Also, the default loggers do not write Unicode; the –o option creates an ANSI text file. If you want your output in Unicode, you will need to write a custom logger for that. To implement a custom logger feature, simply create a DLL that implements one or more of a set of ten logger-related functions, and then pass the path to the DLL to WinUnit via the –l option. You can see my project SampleLogger.cpp for more details.</div>
<div>You might also wish to add your own custom asserts, using the existing ones as examples. You could make an additional header file or a static library to be linked into your test DLLs. It might be interesting to implement a more in-depth set of string asserts, similar to the StringAssert class that comes with the Visual Studio unit testing framework for .NET-based code, which includes string comparisons with regular expressions. A FileAssert class could be useful as well—comparing entire files or attributes of files. You'll notice that I used an Assert class with static methods for the implementation of the asserts, and the WIN_ASSERT macros are thin wrappers around them. I would have liked not to have used macros at all, but I wanted to be able to easily include the file and line number. Of course, macros pollute the global namespace, so if you're going to make your own it would be a good idea to start them with a different prefix.</div>
<div>Another handy Visual Studio add-in would be one that allowed you to run tests individually (with or without code coverage) by right-clicking on them, similar to how TestDriven.NET works for unit tests in the .NET Framework. See the sidebar &quot;Code Coverage and Convenience&quot; for a short discussion of code coverage tools.</div>
<div>My goal has been to show that unit testing native C++ can be easy, fun, and you can get started right now. To give you an idea of the power of WinUnit, take a look through the TestWinUnit project, where I used WinUnit to test itself. Those examples are completely real world and will show you advanced usage you can apply to your own unit tests. If you've been struggling with your native C++ unit testing, WinUnit makes it easy—and any time you can make testing easy, you're far more likely to actually do it. </div>
<p></p>
<div>
<div><strong>Maria Blees</strong> has been a developer at Microsoft for 10 years and has a special fondness for native code and engineering excellence. She can be reached at the address listed in the code and welcomes bug reports and suggestions for this tool</div>
</div>
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

  &lt;/article&gt;

  <article>
    <h2>
      <a href="/2008/05/20/undo-and-redo-the-easy-way/">
        Undo and Redo the "Easy" Way
      </a>
    </h2>
    <time datetime="2008-05-20">20 May 2008</time>
    <div id="msgcns!F610C86C6D82B8A2!196" class="bvMsg">
<div><a href="http://www.codeproject.com/KB/cpp/transactions.aspx">http://www.codeproject.com/KB/cpp/transactions.aspx</a></div>
<div> </div>
<div>
<table cellspacing="0" cellpadding="0" border="0">
<tbody>
<tr valign="top">
<td colspan="2">
<table cellspacing="0" cellpadding="0" border="0">
<tbody>
<tr>
<td><a href="http://nsclass.spaces.live.com/"></a>
</td>
<td align="right" width="100%">
</td>
</tr>
<tr>
<td colspan="2">
</td>
</tr>
<tr>
<td colspan="2" /></tr>
</tbody>
</table>
</td>
</tr>
<tr>
<td valign="top" colspan="2"><a></a>&lt;/p&gt;
<table cellspacing="0" cellpadding="3" width="100%" border="0">
<tbody>
<tr valign="top">
<td><a href="http://nsclass.spaces.live.com/script/Content/Chapter.aspx?chptId=5"><u><font color="#0000ff">Languages</font></u></a> » <a href="http://nsclass.spaces.live.com/KB/cpp/"><u><font color="#0000ff">C / C++ Language</font></u></a> » <a href="http://nsclass.spaces.live.com/KB/cpp/index.aspx?#C / C++ Language - General"><u><font color="#0000ff">General</font></u></a> <span>    Intermediate</span> <span></span>&lt;/p&gt;
<h1><span>Undo and Redo the &quot;Easy&quot; Way</span></h1>
<p><b>By <a href="http://nsclass.spaces.live.com/script/Articles/MemberArticles.aspx?amid=49251"><u><font color="#0000ff">compiler</font></u></a></b></p>
<p><span>This article introduces a simple approach to in-memory transactions that can be used to implement Undo and Redo. The technique uses SEH and Virtual Memory and requires only STL and Win32.</span>
&lt;/td&gt;
<td style="width:210px;"><span>VC6, VC7, VC7.1, C++Windows, NT4, Win2K, WinXP, STL, VS.NET2003, VS, Dev</span>&lt;/p&gt;
<p><span style="padding-right:2ex;">Posted</span>: <b>3 Oct 2002</b><br /><span style="padding-right:.5ex;">Updated</span>: <b>20 Jun 2004</b> <br /><span style="padding-right:3.2ex;">Views</span>: <b>113,984</b>
&lt;/td&gt;
&lt;/tr&gt;
<tr>
<td colspan="2">
<table width="100%">
<tbody>
<tr>
<td>
</td>
<td style="white-space:nowrap;" align="right"></td>
</tr>
</tbody>
</table>
</td>
</tr>
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
<tr valign="top">
<td style="width:867px;height:300px;" valign="top"><span></span>&lt;/p&gt;
<div>
<table cellspacing="0" cellpadding="0" width="100%" border="0">
<tbody>
<tr valign="top">
<td valign="top">
<table>
<tbody></tbody>
</table>
</td>
<td style="width:100px;white-space:nowrap;text-align:right;">
<table>
<tbody>
<tr>
<td>
<table>
<tbody>
<tr>
<td style="white-space:nowrap;" align="right"><span>43 votes for this Article.</span>
</td>
<td>
<table cellspacing="0" cellpadding="0" border="1">
<tbody>
<tr>
<td width="20" bgcolor="white" height="7"><img height="7" src="http://nsclass.spaces.live.com/script/Ratings/Images/red.gif" width="20" align="center" border="0" />
</td>
<td width="20" bgcolor="white" height="7"><img height="7" src="http://nsclass.spaces.live.com/script/Ratings/Images/red.gif" width="20" align="center" border="0" />
</td>
<td width="20" bgcolor="white" height="7"><img height="7" src="http://nsclass.spaces.live.com/script/Ratings/Images/red.gif" width="20" align="center" border="0" />
</td>
<td width="20" bgcolor="white" height="7"><img height="7" src="http://nsclass.spaces.live.com/script/Ratings/Images/red.gif" width="20" align="center" border="0" />
</td>
<td width="20" bgcolor="white" height="7"><img height="7" src="http://nsclass.spaces.live.com/script/Ratings/Images/red.gif" width="11" align="center" border="0" /></td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr>
<td align="right" colspan="2"><a title="Calculated as rating x Log10(# votes)" href="http://nsclass.spaces.live.com/script/Articles/TopArticles.aspx?ta_so=1"><u><font color="#0000ff">Popularity: 7.41</font></u></a> <span></span><span>Rating: <b>4.53</b> out of 5</span></td>
</tr>
</tbody>
</table>
</div>
</td>
<td>
<div>
<table>
<tbody>
<tr>
<td><img title="3 votes, 8.8%" height="2" alt="3 votes, 8.8%" src="http://nsclass.spaces.live.com/script/Ratings/Images/pollcol.gif" width="10" border="0" /><br />1
</td>
<td><img title="0 votes, 0.0%" height="1" alt="0 votes, 0.0%" src="http://nsclass.spaces.live.com/script/Ratings/Images//Images/t.gif" width="10" border="0" /><br />2
</td>
<td><img title="1 vote, 2.9%" height="1" alt="1 vote, 2.9%" src="http://nsclass.spaces.live.com/script/Ratings/Images//Images/t.gif" width="10" border="0" /><br />3
</td>
<td><img title="1 vote, 2.9%" height="1" alt="1 vote, 2.9%" src="http://nsclass.spaces.live.com/script/Ratings/Images//Images/t.gif" width="10" border="0" /><br />4
</td>
<td><img title="29 votes, 85.3%" height="20" alt="29 votes, 85.3%" src="http://nsclass.spaces.live.com/script/Ratings/Images/pollcol.gif" width="10" border="0" /><br />5</td>
</tr>
</tbody>
</table>
</div>
</td>
</tr>
&lt;/div&gt;
<p><span><br />
</span>
<div>
<ul>
<li><a href="http://nsclass.spaces.live.com/mmm2008-05-08_20.17/transactions/Transactions_src.zip"><u><font color="#0000ff">Download source - 51 Kb</font></u></a>
</li>
<li><a href="http://nsclass.spaces.live.com/mmm2008-05-08_20.17/transactions/Transactions_demo.zip"><font color="#0000ff"><u>Download demo project - 59 Kb </u></font></a>
</li>
<li><a href="http://nsclass.spaces.live.com/mmm2008-05-08_20.17/transactions/Transactions_mfc_demo.zip"><font color="#0000ff"><u>Download MFC SDI demo project - 87 Kb </u></font></a>
</li>
<li><a href="http://nsclass.spaces.live.com/mmm2008-05-08_20.17/transactions/Transactions_mfc_mdi_demo.zip"><font color="#0000ff"><u>Download MFC MDI demo project - 114 Kb </u></font></a>
</li>
<li><a href="http://nsclass.spaces.live.com/mmm2008-05-08_20.17/transactions/Transactions_complete.zip"><u><font color="#0000ff">Download all the above plus binaries - 593 KB</font></u></a></li>
</ul>
<p><u><font color="#0000ff"></font></u> </p>
<h2>Introduction</h2>
<p>This article reviews some other CodeProject articles on implementing Undo/Redo and introduces a new approach using structured exception handling and virtual memory protection. The approach is small, very high performance and features a good enforcement policy (it's easy to use correctly, and hard to use incorrectly). The working principles may be somewhat difficult to understand, but the advantages it offers in speed and reduced programming effort overwhelm the disadvantages.</p>
<p>Since implementing Undo/Redo functionality (aka. transactions) is rarely an easy thing to do, and can become very difficult as an application grows in complexity, it is rarely done well. Applications that support add-ins (third-party extensions) have a particularly bad time of it. Too often the functionality is limited, buggy, and onerous for developers to support.</p>
<p>There are a handful of other articles on CodeProject discussing Undo/Redo, and suggesting implementation strategies. This article introduces one more approach – one that may save you a lot of coding and result in higher-performance applications.</p>
<h2>Previous work</h2>
<p>Yingle Jia’s article <a href="http://www.codeproject.com/cpp/undoredo_cpp.asp"><u><font color="#0000ff">A Basic Undo/Redo Framework for C++</font></u></a> employs a straightforward procedural approach. Jia proposes a <code>Command</code> class with semantic <code>Execute</code> and <code>UnExecute</code> methods. The responsibility to implement these methods in a manner appropriate for the application falls on client developers. For example, to properly handle memory management Jia suggests a reference counting implementation, that keeps objects in memory after they have been semantically “deleted”. Implementing <code>Execute</code> and <code>Unexecute</code> can be non-trivial. For example, to avoid redundant duplication, the developer must be careful to capture only the minimally sufficient information (only what changed). This is what I call semantic, or procedural undo.</p>
<p>Keith Rule’s <a href="http://www.codeproject.com/docview/undo.asp"><u><font color="#810081">Simple and Easy Undo/Redo</font></u></a> certainly lives up to its title. Rule makes use of lists of <code>CMemFile</code> objects to capture serialized versions of the document, before each undoable action. Any state in the undo history can be recovered by reading the contents of the appropriate <code>CMemFile</code>, assuming the <code>CDocument</code> has implemented serialization. Rule’s use of Mix-ins makes integration of his code very easy for existing MFC applications. This is what I call state-capture.</p>
<p>Jen Nilsson’s <a href="http://www.codeproject.com/atl/undomgr.asp"><u><font color="#0000ff">Undo Manager</font></u></a> provides an interesting look at integrating with the OLE framework for undo/redo using ATL. The OLE framework is conceptually similar to Jia’s procedural approach, but adds cross application undo semantics (e.g. for OLE embeddings).</p>
<p>Tom Morris provides an interesting tutorial on implementing Undo/Redo through state-capture in <a href="http://www.codeproject.com/docview/undoredo_demo.asp"><u><font color="#810081">Implementing Undo / Redo - The DocVars Method</font></u></a>. His approach is conceptually similar to Rule's, but focuses on internal document data structures rather than the document itself. The primary advantage of Morris' approach is that the document is able to contain and persist a sequence of document states, which allows undo and redo operations to span editing sessions. That is, it becomes possible to undo the last operation performed, before closing a document, after the document had been reopened (potentially by someone other than the original editor). A nice feature, indeed. I call this persistent undo.</p>
<h2>Motivation</h2>
<p>All of the above articles assume the use of one class library or another (MFC, ATL, STL, etc.), and Nilsson also depends on runtime support for OLE. Each requires modifications to the application's data representation classes (the document itself or discreet objects within the document), and/or operations. I was interested in an approach that could be used in pure Win32 code bases and did not require the modification of any interanl data structures or data manipulation code.</p>
<p>Another drawback of Jia and Nilsson is requiring objects to remain in memory after semantic removal, thus adding constraints on behavior as well as added memory overhead (it’s assumed that “deleted” objects should not interact with other objects in memory or continue processing events, for example). It can be very hard to ensure these rules are followed in all but trivial applications.</p>
<p>Rule places fewer constraints on behavior (other than serialization) but duplicates entire serialized documents repeatedly, thus trading simplicity for performance and memory overhead. Morris' approach features similar memory overhead due to duplication of document data.</p>
<p>In addition to constraints placed on the developer, the scalability of the procedural and serialization based approaches is questionable. Certainly, Rule cannot continue to operate when document size exceeds 50% of available memory (compression of backup <code>CMemFiles</code> improves the situation somewhat). Jia and Nilsson don’t duplicate as much data (assuming an efficient implementation), but the reference counting approach does result in objects remaining in memory after having been “deleted” and may require additional logic to “disconnect” those objects from other data structures. Morris requires a duplicate set of document data to be created before each edit, thus adding to memory and processing overhead.</p>
<p>It is important to consider the &quot;enforcement policy&quot; of each of these techniques. That is, how many ways are there to inadvertly break the system and introduce bugs? All of the above techniques require some faith that developers have been educated in the proper use of the system and understand its use and limitations. I've found that a stretch of reason, regardless of best intentions.</p>
<p>Finally, in cases where an application uses data elements from outside libraries it may not be possible to implement the above techniques without some difficulty. For example, a graph analysis toolkit may include data objects that reference each other via pointers. Since it is unlikely that these classes will be based on MFC, they won’t support Rule’s serialization based approach. Likewise, adding the semantic behavior required by Jia and Nilsson may be unattainable. Hence, it is imperative that a general-purpose undo framework NOT require modification to existing data object classes.</p>
<p>Finally, portability of MFC and COM based solutions is questionable.</p>
<h2>Summary of the new approach</h2>
<p>The state of a program at any given moment is strictly defined by the state of the sequence of digital memory representing that application – obvious, eh? It's humbling to remember that the code we create does nothing more than twiddle bits on a chip somewhere. However, this observation also presents us with an opportunity: If we could detect the changes made to our applications’ memory, and record them, then we’d have a good chance of reversing and replaying them at our whim.</p>
<p>That is the basic premise of this system – to detect changes to memory and record them at the binary level, then reverse them and play them back as required to restore a given state of the application.</p>
<p>This approach has several advantages, which should become apparent after reading through the code:</p>
<ol>
<li>The <b>decoupling of data objects from the undo/redo implementation</b> . No changes to objects that will participate in transactions are required. No extra code is required to capture object state. No extra code is required in object manipulation functions.
</li>
<li><b>Very low memory overhead.</b> By recording compressed changes in memory state this approach captures a minimum of information.
</li>
<li><b>Very high runtime performance.</b>
<ol>
<li>Undo and Redo operations are implemented by sequentail binary operations on memory. These operations are very low effort, can be accelerated in many new processors (e.g. MMX), and can be parallelized at the page level.
</li>
<li>Transaction effort (capturing and replaying) scales predominantly with the amount of data changed, not the size of the data as a whole. </li>
</ol>
</li>
</ol>
<li><b>Real transactions.</b> The transactions are atomic, consistent, occur in isolation and are durable (giving some leeway to the fact this approach runs only in memory).
<li><b>Data safety.</b> Because application data is write-protected outside of transactions, any attempt to change the data outside transaction will result in an exception. This makes it very easy to identify code that is “misbehaving” and correct it. Even outside a transaction, however, data access is allowed unimpeded.
<li><b>Simple API.</b> There are only a handful or methods in the API, most with zero or one parameter. </li>
</li>
</li>
<p>Some drawbacks include:</p>
<ol>
<li><b>Narrow focus.</b> This technique won’t provide a complete undo/redo framework for most applications (but for many, it will). Because many operations don’t involve memory across processes and media (creating a new window, file or registry entry for example) it will be necessary to wrap this code with a system such as Jia’s that handles non-memory based operations with procedural methods.
</li>
<li><b>Opaqueness.</b> The direct manipulation of object representations without execution of object code is a foreign concept to most developers and may be difficult to fully grasp. It sometimes leads to interesting and challenging bugs. </li>
</ol>
<h2>Implementation</h2>
<p>Wow. Just past the introduction and this article is already too long. I will try to be brief, but there is a lot to be explained here. My goal for this article was an implementation with minimal dependencies on outside code libraries, but in practice I found STL very useful. I chose to spurn MFC, WTL and ATL but make use of STL for expediency and code readability. The result is a very simple system that can be used with MFC and ATL projects as well as pure Win32 code bases.</p>
<p>It is also portable to POSIX platforms with extended SIG_INFO structures containing data pointers for read/write violations (e.g. Linux 2.4+ kernel). Most platforms support this since it is generally needed to do copy-on-write for dynamically loaded shared objects (DLLs).</p>
<h3>SEH: Just in Time Write Detection</h3>
<p>Windows includes a facility to detect attempts to change memory and respond to them via Structured Exception Handling (SEH). The <code>_try &#123;&#125; _except() &#123;&#125;</code> block allows us to catch exceptions and pass them through a filter we supply:</p>
<pre><span>int</span> ExceptionFilter(LPEXCEPTION_POINTERS e);

<span>int</span> main()
&#123;
    <span>int</span> retval = <span>0</span>;
    <span>__try</span> &#123;
            retval = DoWork();
    &#125; <span>__except</span>(ExceptionFilter(GetExceptionInformation())) &#123;
            printf(<span>&quot;</span><span>Opps, we have a problem...\n&quot;</span>);
    &#125;;

    <span>return</span> retval;
&#125;
</pre>
<p>Using this facility, we can detect when a memory protection fault occurs, and what memory was in question:</p>
<pre><span>int</span> ExceptionFilter(LPEXCEPTION_POINTERS e)
&#123;
    <span>//</span><span> we are only interested in access violations (memory faults)
</span>    <span>if</span> (e-<span>&gt;</span>ExceptionRecord-<span>&gt;</span>ExceptionCode != EXCEPTION_ACCESS_VIOLATION)
        <span>return</span> EXCEPTION_CONTINUE_SEARCH;

    <span>//</span><span> the exception information includes the type of access (read
</span>    <span>//</span><span> or write), and the address of the fault
</span>    <span>bool</span> writing = (e-<span>&gt;</span>ExceptionRecord-<span>&gt;</span>ExceptionInformation[<span>0</span>] != <span>0</span>);
    <span>void</span>* addr = (<span>void</span>*)e-<span>&gt;</span>ExceptionRecord-<span>&gt;</span>ExceptionInformation[<span>1</span>];

    <span>//</span><span> TODO: okay, now what?
</span>         
    <span>return</span> EXCEPTION_CONTINUE_EXECUTION;
&#125;
</pre>
<p>The exception filter may return one of three values:</p>
<ul>
<li><code>EXCEPTION_CONTINUE_SEARCH</code> indicates that the filter has taken no action on the exception, and that propagation should continue to other handlers (in the case of nested <code><span>try</span></code> statements).
</li>
<li><code>EXCEPTION_CONTINUE_EXECUTION</code> indicates that the filter has taken action to resolve the exception, and that execution should continue at the point of the exception.
</li>
<li>An option we don’t use here. </li>
</ul>
<p>This is great, but we generally aren’t involved in deciding what memory our application can read and write. For obvious reasons, the OS generally takes care of that for us. If we allocate a chunk of memory using <code><span>new</span></code> or <code>malloc</code>, it is automatically read and write enabled and our filter will never get called. Thankfully, Windows’ virtual memory functions provide a way for us to explicitly control the permissions of memory we allocate.</p>
<h2>Virtual Memory: Page Protection and Management</h2>
<p>Win32 virtual memory functions can allocate, protect and de-allocate blocks of addresses in the virtual memory space. See MSDN for more information on <code>VirtualAlloc</code>, <code>VirtualProtect</code> and <code>VirtualFree</code>.</p>
<p>We can allocate memory via <code>VirtualAlloc</code> and then set the protection to <code>PAGE_READONLY</code> using <code>VirtualProtect</code>. Any attempt to write to that memory will generate an access violation that will be passed to our exception filter. In <code>ExceptionFilter</code>, we can check to see address is on a page we manage, and if so do the following:</p>
<ol>
<li>Make a copy of the page
</li>
<li>Set the protection of the copy to <code>PAGE_READONLY</code>
</li>
<li>Set the protection of the original to <code>PAGE_READWRITE</code>
</li>
<li>Return <code>EXCEPTION_CONTINUE_EXECUTION</code> </li>
</ol>
<p>Returning <code>EXCEPTION_CONTINUE_EXECUTION</code> from the filter allows the code performing the memory access to continue to operate as if nothing has happened. Meanwhile, we made a copy of the page to save its state before any changes. This technique is often called “copy on write”, and you can read more about it <a href="http://www.google.com/search?hl=en&amp;ie=UTF-8&amp;oe=UTF-8&amp;q=copy+on+write" target="_blank"><u><font color="#0000ff">elsewhere on the web</font></u></a>.</p>
<p>To track which pages we manage, we need some simple data structures:</p>
<pre><span>typedef</span> std::vector<span>&lt;</span><span>void</span>*<span>&gt;</span> Pages;
<span>typedef</span> std::map<span>&lt;</span><span>void</span>*, <span>void</span>*<span>&gt;</span> PageMap;

<span>static</span> Pages pages;
<span>static</span> PageMap backups;</pre>
<p>Each time we allocate a page, we add it to <code>pages</code>. Each backup we make is added to <code>backups</code> with a pointer to the original page as the key. With these structures in place, the implementation of the exception filter starts to take form:</p>
<pre><span>int</span> ExceptionFilter(LPEXCEPTION_POINTERS e)
&#123;    
    <span>if</span> (e-<span>&gt;</span>ExceptionRecord-<span>&gt;</span>ExceptionCode != EXCEPTION_ACCESS_VIOLATION)
        <span>return</span> EXCEPTION_CONTINUE_SEARCH;

    <span>bool</span> writing = (e-<span>&gt;</span>ExceptionRecord-<span>&gt;</span>ExceptionInformation[<span>0</span>] != <span>0</span>);
    <span>void</span>* addr = (<span>void</span>*)e-<span>&gt;</span>ExceptionRecord-<span>&gt;</span>ExceptionInformation[<span>1</span>];
    <span>void</span>* page = (<span>void</span>*)((<span>unsigned</span> <span>long</span>)addr &amp; ~(PAGE_SIZE - <span>1</span>));

    Pages::iterator i = std::find(pages.begin(), pages.end(), page);
    <span>if</span> (i == pages.end())
        <span>return</span> EXCEPTION_CONTINUE_SEARCH;

    <span>void</span>* backup = ::VirtualAlloc(<span>0</span>, PAGE_SIZE, MEM_COMMIT, PAGE_READWRITE);
    memcpy(backup, page, PAGE_SIZE);
    backups[page] = backup;

    DWORD old = <span>0</span>;
    BOOL ok = FALSE;
    ok = ::VirtualProtect(backup, PAGE_SIZE, PAGE_READONLY, &amp;old);
    <span>if</span> (ok == FALSE)
        <span>return</span> EXCEPTION_CONTINUE_SEARCH;

    ok = ::VirtualProtect(page, PAGE_SIZE, PAGE_READWRITE, &amp;old);
    <span>if</span> (ok == FALSE)
        <span>return</span> EXCEPTION_CONTINUE_SEARCH;

    <span>return</span> EXCEPTION_CONTINUE_EXECUTION;
&#125;</pre>
<p>Excellent!</p>
<p>However, we still have a problem: Windows’ virtual memory functions only deal with page-sized chunks (4096 bytes). To make things useful in the general case, we need a memory manger that operates on chunks of memory from <code>VirtualAlloc</code>. Fortunately, that problem has been solved before. The source code includes a <i>very</i> simple memory manager that can slice arbitrarily sized allocations from chunks of virtual memory. See the API functions <code>Allocate</code> and <code>Deallocate</code>. If you need a more industrial strength solution, see <a href="http://groups.google.com/groups?hl=en&amp;lr=lang_en&amp;ie=UTF-8&amp;oe=UTF-8&amp;safe=off&amp;q=fast+memory+allocation+algorithm&amp;btnG=Google+Search" target="_blank"><u><font color="#0000ff">google</font></u></a>. Punt.</p>
<h2>Houston, we have Undo</h2>
<p>Now we can detect changes to memory and make copies of only the memory being changed. This is great stuff, eh? Say we have a gazillion bytes allocated but will only be changing a few in any given transaction. Using this technique, we only have to copy the pages where the changes are made, and the code that makes the changes doesn’t even need to know we’re doing it.</p>
<p>To reverse the changes we need only copy the backup pages over the top of the target pages. Very cool, eh? Unfortunately, at this point we can’t Redo the Undo since we aren’t keeping a copy of the page <i>after</i> the changes. Hmmm. Another drawback with this technique is that we copy the entire page, even when a subset of the page is changed. This is a bit wasteful. To do better we could compress the backup, but we can do better than that using some XOR tricks and get Redo too.</p>
<h2>XOR Tricks: Recording Changes and Redo</h2>
<p>Rather than go into a discussion of XOR and its many uses, I’ll refer you to Daniel Turini’s excellent <a href="http://www.codeproject.com/useritems/raidfile.asp"><u><font color="#0000ff">article </font></u></a>on the subject.</p>
<p>Using XOR we can find the differences between the original page and the copy of the page. Some vary fast code can XOR the page and it’s backup and rewrite the results to the backup:</p>
<pre><span>//</span><span> psuedo-code. A real-world implementation should use SMID
</span><span>for</span> (<span>unsigned</span> <span>short</span> j = <span>0</span>; j <span>&lt;</span> PAGE_SIZE; ++j) &#123;
    <span>const</span> <span>BYTE</span> a = backup[j];
    <span>const</span> <span>BYTE</span> b = page[j];
    backup[j] = (a ^ b);
&#125;</pre>
<p>Any byte that hasn’t changed will come back zero from the XOR operation. Bytes that have changed will be non-zero. That doesn’t look like a space saving except for the fact that pages with sparse changes will have lots of zeros and compress very, very well. In addition, and as Daniel notes, by storing the XOR we can always get to the “other” memory state from the “before” or “after” state – hence, we now can redo what we undo. Sweet!</p>
<h2>RLE: Delta Compression</h2>
<p>Once we decide that changes should be kept (see <code>CommitTransaction</code>), we can calculate the XOR deltas, compress them, and hold onto them while discarding the backup page. This technique reduces the memory overhead of the system considerably.</p>
<p>To demonstrate the concept of compressing the delta (the XOR of the page and the backup) I implemented a very simple Run Length Encoding (RLE) algorithm. The code simply looks for long runs of duplicate bytes and encodes them as a count and the byte. So, for example, a run of 100 “0”s is compressed down to 2 bytes. Compression on random data is poor, however, and in production you’d want to use something like zlib to get better worst-case performance.</p>
<p>The details of the RLE compression are separated out in <i>Compress.h</i> and <i>Compress.cpp</i> . If you can provide an implementation that fits into these two files nicely (and is speedy) I’ll add it to this article and give you credit here. It's an interesting problem, since we know that the block to be compressed will always be <code>PAGE_SIZE</code> bytes.</p>
<h2>STL Integration, MFC dangers</h2>
<p>The designers of STL (bless their hearts) decided to include the ability to control the memory allocation done by containers (list, vector, map, etc.). This is very cool. It allows us to write an allocator that uses our memory manager to put STL containers on transacted pages. Translation: We can do transactions that involve manipulations of STL containers and objects.</p>
<p>See <i>Allocator.h</i> for the not-so-gory details of the allocator, and <i>MemTest.cpp</i> for a demonstration.</p>
<p>It would be cool to do the same on MFC classes, but that is generally a bad idea. MFC classes often do non-memory based things. Classes derived from <code>CObject</code> or <code>CCommandTarget</code> could be transacted using this technique, but be careful to avoid holding pointers to non-transacted objects in transacted objects and vise-versa. The pointers could become invalid after an undo or redo.</p>
<h2>The Demo App(s)</h2>
<p>There are three demo applications included with this article. The first is a bare-bones console app that tests much of the functionality of the engine. Since it is well commented, I’ll just refer you to the directory <i>MemTest</i> rather than include 200+ duplicate lines in this document.</p>
<p>The second demo app, <i>DrawIt</i> is more interesting, since it integrates this undo approach with a simple MFC-based application. The application does simple drawing (vector based) of shapes. It processes mouse down, move and up messages and interactively creates random shapes based on the input. Two toolbar commands automate the creation of large numbers of shapes by:</p>
<ol>
<li>Opening 1000 transactions with each adding a single random shape in a random location.
</li>
<li>Opening a single transaction and adding a 1000 random shapes in a random locations. </li>
</ol>
<p>I did this to show the difference between lots of small transactions and few large transactions. Both cases work very well. The transaction overhead in both cases is small compared to the time to manipulate the lists and render the items.</p>
<p>A perhaps subtle point in the demo is that the code for creating objects is provided in an external DLL (<i>DrawFunc.dll</i>) that has zero knowledge of the transaction mechanisms in the host application. That makes it very, very simple for a replacement DLL to be implemented for customization or extensibility purposes. It's worth looking at the subproject, and the sketch object in particular, to note just how simple life can be for add-in providers.</p>
<p>Another interesting aspect of the demo application is the long transaction support. You can open a transaction, make lots of changes to the document by adding items interactively or using the abuse commands, and then commit or cancel the changes as one large chunk. If the changes are committed, they will undo and redo as one unit. If the changes are cancelled, the document will return to the previous state (including the intact redo stack) as if none of the changes had happened -- nice, eh?</p>
<p>This second demo application was generated using appwizard. I then added small modifications to <code>CDrawItApp::InitInstace</code>, <code>Run</code>, <code>ExitInstance</code>, <code>OnUndo</code> and <code>OnRedo</code>. Those modifications are general purpose and generally applicable to MFC apps using Transactions. Some other modifications can be found in <i>CDrawItView.h</i>,<i>.cpp</i> and <i>CDrawItDoc.h</i>, <i>.cpp</i>. Those modifications are specific to this application, and you should replace them with your own code.</p>
<p>The third final demo, <i>DrawItMDI</i>, demonstrates using the multi-space functionality of Transactions to build an MDI application that maintains individual undo/redo streams for each document. It also implements exception filtering to capture crashes and do reporting.</p>
<p>These demos show the flexibility of the framework, and I hope they will encourage you to try some new ideas yourself. Please recognize that the demo applications make use of code from other projects at CodeProject, and elsewhere. Thanks to Hans Dietrich, Bruce Dawson and Jonathan de Halleux.</p>
<h2>API</h2>
<p>There are only a handful of methods in the API, and one of them should be used only once per application. That leaves us with about seven things to remember, which is about the right number.</p>
<h3>SPACEID CreateSpace(size_t initial_size)</h3>
<p>Create a transacted heap from which allocations can be requested. A transaction must be opened on the space before it can be used.</p>
<h3>Result Destroy(SPACEID sid)</h3>
<p>Destroy a previously created space, freeing all memory associated with it. Keep in mind that destructors will not be called for any objects remaining in the space. Future allocation requests on the space will result in undefined behavior.</p>
<h3>
</h3>
<h3>Result DestroyAll()</h3>
<p>Destroy all previously created spaces, freeing all memory associated with them. Keep in mind that destructors will not be called for any objects remaining in the spaces. Future allocation requests on the existing spaces will result in undefined behavior.</p>
<h3>Result Clear(SPACEID sid)</h3>
<p>Free all memory associated with a space. Keep in mind that destructors will not be called for any objects remaining in the space. Future allocation requests on the space are allowed.</p>
<h3>
</h3>
<h3>Result ClearAll()</h3>
<p>Free all memory associated with all spaces. Keep in mind that destructors will not be called for any objects remaining in the spaces. Future allocation requests on the spaces are allowed.</p>
<h3>int ExceptionFilter(LPEXCEPTION_POINTERS* e)</h3>
<p>This method provides the major point of integration with the target application’s code. In order to catch memory access violations, you must put a <code>_try &#123;&#125; _except() &#123;&#125;</code> block using this exception filter, above all modifications to managed memory (allocated by <code>Allocate</code>) in the call stack. The logical place to put the try block is in <code>main()</code>, <code>WinMain()</code> or around the application’s main message loop.</p>
<h3>Result OpenTransaction(SPACEID sid)</h3>
<p>Call this method to open a new transaction. Any open transaction must be closed (committed or cancelled) before another transaction can be started. Outside of a transaction, an attempt to write to protected memory will result in an unhanded exception.</p>
<h3>Result CancelTransaction(SPACEID sid)</h3>
<p>Call this method if you’d like to close a transaction without committing any changes. As a result of this call, all changes to memory since the start of the transaction, will be reversed and the transaction will be removed from the undo list. The transaction will not be available for undo.</p>
<p>Transactions on the redo stack will still be available for redo. It’s like it never happened. Imagine trying to do this with a procedural undo framework. Cool, eh?</p>
<h3>Result CommitTransaction(SPACEID sid)</h3>
<p>Call this method to commit changes made since the last call to <code>OpenTransaction</code> and to add the transaction to the undo list. Changes made during the transaction are preserved. If there are transactions on the redo stack, they will be dumped and any pages they contain will be added to the free list.</p>
<h3>TXNID GetLastTransactionId(SPACEID sid)</h3>
<p>This method returns an identifier of the last previously committed transaction. Use this method in conjunction with <code>Undo</code>/<code>Redo</code> to roll the application state to a specific point in its history. This method should be useful, if you need to wrap MM with a procedural framework, since it uniquely identifies each transaction.</p>
<h3>TXNID GetNextTransactionId(SPACEID sid)</h3>
<p>This method returns an identifier of the next transaction in the redo stack. Use this method in conjunction with <code>Undo</code>/<code>Redo</code> to roll the application state to a specific point in its history. This method should be useful, if you need to wrap MM with a procedural framework, since it uniquely identifies each transaction.</p>
<h3>TXNID GetOpenTransactionId(SPACEID sid)</h3>
<p>This method returns an identifier of the currently open transaction. Use this method in to determine if <code>Undo</code>/<code>Redo</code> are available, or if a transaction is already in progress. This method should be useful, if you need to wrap MM with a procedural framework, since it uniquely identifies each transaction.</p>
<h3>Result Undo(SPACEID sid)</h3>
<p>Call this method to reverse the changes made in the last transaction.</p>
<h3>Result Redo(SPACEID sid)</h3>
<p>Call this method to re-reverse the changes made in the last undo.</p>
<h3>Result TruncateUndo(SPACEID sid)</h3>
<p>Drops all transactions in the Undo stack. This is useful, for example, to avoid allowing the user to undo over document or application initialization.</p>
<h3>Result TruncateRedo(SPACEID sid)</h3>
<p>Drops all transactions in the Redo stack. This happens automatically when a Transaction is committed while the Redo stack is not empty (think about it). I can't think of why you'd want to do this at the application level.</p>
<h3>void* Allocate(size_t size, SPACEID sid)</h3>
<p>Allocate <code>size</code> bytes of transacted memory in the specified space. All objects that should be transacted must be allocated with this method. To simplify creating C++ objects in transacted memory you might try one of the following:</p>
<ol>
<li>
<p>Get a correctly sized piece of memory with <code>Allocate</code>, then use <a href="http://www.google.com/search?hl=en&amp;lr=lang_en&amp;ie=UTF-8&amp;oe=UTF-8&amp;safe=off&amp;q=placement+new" target="_blank"><u><font color="#0000ff">placement new</font></u></a> to put an instance of your class in that memory. E.g:</p>
<pre>Foo* foo = <span>new</span>(Mm::Allocate(<span>sizeof</span>(Foo), mySpaceId)) Foo();</pre>&lt;/p&gt;
</li>
<li>Override <code><span>operator</span> <span>new</span></code>() on the class with an implementation that uses <code>Allocate</code> to grab memory. This is method is recommended. E.g.:
<pre><span>class</span> Foo &#123;
  <span>void</span>* <span>operator</span> <span>new</span>(size_t size) &#123; <span>return</span> Mm::Allocate(size, mySpaceId); &#125;
&#125;;</pre>&lt;/p&gt;
</li>
<li>
<p>Create a custom allocation method (see <code>MyNew</code> and <code>MyDelete</code> in <i>MemTest.cpp</i>). Also recommended.</p>
</li>
</ol>
<h3>void* Allocate(void* hint, size_t size)</h3>
<p>If the appropriate space id is inconvenient to access, a hint can be provided to the allocation API. When a hint is provided, Transactions will attempt to find the space in which the hint address resides. If it is successful, an allocation will be made in that space. If not, allocation will fail. Obviously, using a hint instead of a space id adds some performance overhead.</p>
<h3>void Deallocate(void* p)</h3>
<p>Free the block <code>p</code> allocated with <code>Allocate()</code>. Since no the space is not indicated in the parameter list, the method needs to check if the address was originally allocated by Transactions, and if so in which space. This obviously makes the method slower, so prefer the below form:</p>
<h3>void Deallocate(void* p, SPACEID sid)</h3>
<p>This is the preferred deallocation method, but beware that no attempt is made to double-check the space id. If it is wrong, the deallocation will simply fail. This is the faster of the three deallocation signatures.</p>
<h3>void Deallocate(void* p, size_t size)</h3>
<p>Mainly used by Mm::Allocator, not much reason to use it otherwise.</p>
<h3>void* Reallocate(void* p, size_t size)</h3>
<p>Attempts to reallocate the space at p to a new size. If the new size is smaller than the existing allocation it will always work. If the requested size is larger than the existing size, it may (in fact probably will) fail. Don't pass null p since it is needed to determine which space to use.</p>
<h3>void* Reallocate(void* p, size_t size, SPACEID sid)</h3>
<p>Same ass above, but null p is okay since the space is specified. This is the faster of the two forms.</p>
<h2>Conclusion</h2>
<p>I hope that this article has given you some insight into yet another way to do undo/redo. The method presented here has some significant advantages, but can be difficult to understand and debug. Among the advantages are:</p>
<ul>
<li>Low memory overhead
</li>
<li>High performance and scalable
</li>
<li>Easy to use</li>
</ul>
<p>On a final note, and just to twist your mind, consider that this technique is fast enough to allow you to “Peek back in time.” That is, if it is useful to know where an object was, what color it was, or what value it had in a previous transaction, you can easily modify this code to do that. Hmm. That could be useful.</p>
<p>Enjoy!</p>
<h2>Version History</h2>
<ul>
<li><b>UPDATE June 18, 2004</b>:
<ul>
<li>Added support for multiple, individually transacted &quot;spaces&quot; (aka. heaps)
</li>
<li>Many bug fixes, ported to VC7.1
</li>
<li>More readable code
</li>
<li>MDI Sample Applicationn</li>
</ul>
</li>
</ul>
<li>Version 1.3 posted Jan. 7, 2003 to CodeProject
<li>Version 1.2 posted Dec. 17, 2002 to CodeProject
<ul>
<li>Added commentary based on Tom Morris' tutorial. </li>
</ul>
<li>Version 1.1 posted Oct. 7, 2002 to CodeProject
<ul>
<li>New API method <code>Mm::Clear()</code> dumps all VM and resets undo and redo stack
</li>
<li>New demo DrawIt added to show MFC integration.
</li>
<li>Removed reference to Result.h that caused build problems. </li>
</ul>
</li>
<li>Version 1.0 posted Oct. 4, 2002 to CodeProject </li>
</li>
</li>
</div>
<div></div>
<h2>License</h2>
<div>
<p>This article has no explicit license attached to it but may contain usage terms in the article text or the download files themselves. If in doubt please contact the author via the discussion board below.</p>
<p>A list of licenses authors might use can be found <a href="http://nsclass.spaces.live.com/info/Licenses.aspx"><u><font color="#0000ff">here</font></u></a></p>
</div>
<h2>About the Author</h2>
<table cellspacing="5" cellpadding="0" width="100%" border="0">
<tbody>
<tr valign="top">
<td style="width:155px;" valign="top"><b><a href="http://nsclass.spaces.live.com/script/Membership/Profiles.aspx?mid=49251"><u><font color="#0000ff">compiler</font></u></a></b>&lt;/p&gt;
<p><u><font color="#0000ff"></font></u><br /><span></span>
&lt;/td&gt;
<td>A compiler warns of bogasity, ignore it at your peril. Unless you've done the compiler's job yourself, don't criticize it.&lt;/p&gt;
<table>
<tbody>
<tr>
<td>Location:
</td>
<td width="100%"><span><img height="11" alt="United States" src="http://nsclass.spaces.live.com/script/Geo/Images/US.gif" width="16" /> United States</span></td>
</tr>
</tbody>
</table>
</td>
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
<p></p>
<div style="overflow:hidden;white-space:nowrap;text-align:center;padding:10px;"></div>
&lt;/div&gt;
<tr>
<td align="middle" colspan="2"></td>
</tr>

  &lt;/article&gt;

  <article>
    <h2>
      <a href="/2008/05/16/duplicate-images-finder/">
        Duplicate images finder
      </a>
    </h2>
    <time datetime="2008-05-16">16 May 2008</time>
    <div id="msgcns!F610C86C6D82B8A2!176" class="bvMsg">
<div><font color="#0066a7"><a href="http://www.codeplex.com/DupliFinder">http://www.codeplex.com/DupliFinder</a></font></div>
<div><font color="#0066a7"></font><a href="http://www.codeplex.com/DupliFinder/SourceControl/DownloadSourceCode.aspx?changeSetId=17633"></a> </div>
</div>

  </article>

  <article>
    <h2>
      <a href="/2008/05/15/how-do-i-flash-my-window-caption-and-taskbar-button-manually/">
        How do I flash my window caption and taskbar button manually?
      </a>
    </h2>
    <time datetime="2008-05-15">15 May 2008</time>
    <div id="msgcns!F610C86C6D82B8A2!173" class="bvMsg">
<div>
<p>Commenter Jonathan Scheepers <a href="http://blogs.msdn.com/oldnewthing/pages/407234.aspx#513263"><u><font color="#0000ff">wonders about those programs that flash their taskbar button indefinitely</font></u></a>, overriding the default flash count set by <code>SysteParametersInfo(SPI_SETFOREGROUNDFLASHCOUNT)</code>.</p>
<p>The <code>FlashWindowEx</code> function and its simpler precursor <code>FlashWindow</code> let a program flash its window caption and taskbar button manually. The window manager flashes the caption automatically (and Explorer follows the caption by flashing the taskbar button) if a program calls <code>SetForegroundWindow</code> when it doesn't have permission to take foreground, and it is that automatic flashing that the <code>SPI_SETFOREGROUNDFLASHCOUNT</code> setting controls.</p>
<p>For illustration purposes, I'll demonstrate flashing the caption manually. This is generally speaking not recommended, but since you asked, I'll show you how. And then promise you won't do it.</p>
<p>Start with the scratch program and make this simple change: </p>
<pre>void
OnSize(HWND hwnd, UINT state, int cx, int cy)
&#123;
  if (state == SIZE_MINIMIZED) &#123;
    FLASHWINFO fwi = &#123; sizeof(fwi), hwnd,
                       FLASHW_TIMERNOFG | FLASHW_ALL &#125;;
    FlashWindowEx(&amp;fwi);
  &#125;
&#125;
</pre>
<p>Compile and run this program, then minimize it. When you do, its taskbar button flashes indefinitely until you click on it. The program responds to being minimzed by calling the <code>FlashWindowEx</code> function asking for everything possible (currently the caption and taskbar button) to be flashed until the window comes to the foreground.</p>
<p>Other members of the <code>FLASHWINFO</code> structure let you customize the flashing behavior further, such as controlling the flash frequency and the number of flashes. and if you really want to take control, you can use <code>FLASHW_ALL</code> and <code>FLASHW_STOP</code> to turn your caption and taskbar button on and off exactly the way you want it. (Who knows, maybe you want to send a message in Morse code.) </p>
</div>
</div>

  </article>


</p></td></tr></tbody></table></p></p></td></p></td></tr></tbody></table></td></tr></tbody></table></div></div></article></p></div></div></div></div></article></p></span></div></div></article></code></p></article></code></p></article></p></ul></article>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        
        <p class="copyright">Nam Seob Seo maintained by <a href="https://github.com/nsclass">nsclass</a></p>
        
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    
  </body>
</html>

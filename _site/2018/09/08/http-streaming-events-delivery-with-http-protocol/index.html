<p>HTTP 1.1 has the following header option to deliver the streaming data to clients by opening a TCP connection.</p>
<p>[code lang="c"]<br />
Transfer-Encoding: chunked<br />
[/code]</p>
<p>With above header, Content-Length will be omitted but beginning of each chunk will have the length of the current chunk in hexadecimal format, followed by '\r\n' and then the chunk itself, followed by another '\r\n'.<br />
[code lang="c"]<br />
HTTP/1.1 200 OK<br />
Content-Type: text/plain<br />
Transfer-Encoding: chunked</p>
<p>7\r\n<br />
Mozilla\r\n<br />
9\r\n<br />
Developer\r\n<br />
7\r\n<br />
Network\r\n<br />
0\r\n<br />
\r\n<br />
[/code]</p>
<p>Kubernetes API server is using this mechanism for watch=true API.<br />
Example)<br />
[code lang="c"]<br />
$ curl -X GET -i http://127.0.0.1:8080/api/v1/pods?watch=true<br />
HTTP/1.1 200 OK<br />
Transfer-Encoding: chunked<br />
Date: Tue, 15 Mar 2016 08:00:09 GMT<br />
Content-Type: text/plain; charset=utf-8<br />
Transfer-Encoding: chunked</p>
<p>{&quot;type&quot;:&quot;ADDED&quot;,&quot;object&quot;:{&quot;kind&quot;:&quot;Pod&quot;,&quot;apiVersion&quot;:&quot;v1&quot;,&quot;metadata&quot;:{&quot;name&quot;:&quot;nginx-app-o0kvl&quot;,&quot;generateName&quot;:&quot;nginx-app-&quot;,&quot;namespace&quot;:&quot;default&quot;,&quot;selfLink&quot;:&quot;/api/v1/namespaces/default/pods/nginx-app-o0kvl&quot;,&quot;uid&quot;:&quot;090cc0c8-ea84-11e5-8c79-42010af00003&quot;,&quot;resourceVersion&quot;:&quot;228082&quot;,&quot;creationTimestamp&quot;:&quot;2016-03-15T08:00:51Z&quot;,&quot;labels&quot;:{&quot;run&quot;:&quot;nginx-app&quot;},&quot;annotations&quot;:{&quot;kubernetes.io/created-by&quot;:&quot;{\&quot;kind\&quot;:\&quot;SerializedReference\&quot;,\&quot;apiVersion\&quot;:\&quot;v1\&quot;,\&quot;reference\&quot;:{\&quot;kind\&quot;:\&quot;ReplicationController\&quot;,\&quot;namespace\&quot;:\&quot;default\&quot;,\&quot;name\&quot;:\&quot;nginx-app\&quot;,\&quot;uid\&quot;:\&quot;090bfb57-ea84-11e5-8c79-42010af00003\&quot;,\&quot;apiVersion\&quot;:\&quot;v1\&quot;,\&quot;resourceVersion\&quot;:\&quot;228081\&quot;}}\n&quot;}},&quot;spec&quot;:{&quot;volumes&quot;:[{&quot;name&quot;:&quot;default-token-wpfjn&quot;,&quot;secret&quot;:{&quot;secretName&quot;:&quot;default-token-wpfjn&quot;}}],&quot;containers&quot;:[{&quot;name&quot;:&quot;nginx-app&quot;,&quot;image&quot;:&quot;nginx&quot;,&quot;ports&quot;:[{&quot;containerPort&quot;:80,&quot;protocol&quot;:&quot;TCP&quot;}],&quot;resources&quot;:{},&quot;volumeMounts&quot;:[{&quot;name&quot;:&quot;default-token-wpfjn&quot;,&quot;readOnly&quot;:true,&quot;mountPath&quot;:&quot;/var/run/secrets/kubernetes.io/serviceaccount&quot;}],&quot;terminationMessagePath&quot;:&quot;/dev/termination-log&quot;,&quot;imagePullPolicy&quot;:&quot;Always&quot;}],&quot;restartPolicy&quot;:&quot;Always&quot;,&quot;terminationGracePeriodSeconds&quot;:30,&quot;dnsPolicy&quot;:&quot;ClusterFirst&quot;,&quot;serviceAccountName&quot;:&quot;default&quot;,&quot;serviceAccount&quot;:&quot;default&quot;,&quot;securityContext&quot;:{}},&quot;status&quot;:{&quot;phase&quot;:&quot;Pending&quot;}}}<br />
{&quot;type&quot;:&quot;MODIFIED&quot;,&quot;object&quot;:{&quot;kind&quot;:&quot;Pod&quot;,&quot;apiVersion&quot;:&quot;v1&quot;,&quot;metadata&quot;:{&quot;name&quot;:&quot;nginx-app-o0kvl&quot;,&quot;generateName&quot;:&quot;nginx-app-&quot;,&quot;namespace&quot;:&quot;default&quot;,&quot;selfLink&quot;:&quot;/api/v1/namespaces/default/pods/nginx-app-o0kvl&quot;,&quot;uid&quot;:&quot;090cc0c8-ea84-11e5-8c79-42010af00003&quot;,&quot;resourceVersion&quot;:&quot;228084&quot;,&quot;creationTimestamp&quot;:&quot;2016-03-15T08:00:51Z&quot;,&quot;labels&quot;:{&quot;run&quot;:&quot;nginx-app&quot;},&quot;annotations&quot;:{&quot;kubernetes.io/created-by&quot;:&quot;{\&quot;kind\&quot;:\&quot;SerializedReference\&quot;,\&quot;apiVersion\&quot;:\&quot;v1\&quot;,\&quot;reference\&quot;:{\&quot;kind\&quot;:\&quot;ReplicationController\&quot;,\&quot;namespace\&quot;:\&quot;default\&quot;,\&quot;name\&quot;:\&quot;nginx-app\&quot;,\&quot;uid\&quot;:\&quot;090bfb57-ea84-11e5-8c79-42010af00003\&quot;,\&quot;apiVersion\&quot;:\&quot;v1\&quot;,\&quot;resourceVersion\&quot;:\&quot;228081\&quot;}}\n&quot;}},&quot;spec&quot;:{&quot;volumes&quot;:[{&quot;name&quot;:&quot;default-token-wpfjn&quot;,&quot;secret&quot;:{&quot;secretName&quot;:&quot;default-token-wpfjn&quot;}}],&quot;containers&quot;:[{&quot;name&quot;:&quot;nginx-app&quot;,&quot;image&quot;:&quot;nginx&quot;,&quot;ports&quot;:[{&quot;containerPort&quot;:80,&quot;protocol&quot;:&quot;TCP&quot;}],&quot;resources&quot;:{},&quot;volumeMounts&quot;:[{&quot;name&quot;:&quot;default-token-wpfjn&quot;,&quot;readOnly&quot;:true,&quot;mountPath&quot;:&quot;/var/run/secrets/kubernetes.io/serviceaccount&quot;}],&quot;terminationMessagePath&quot;:&quot;/dev/termination-log&quot;,&quot;imagePullPolicy&quot;:&quot;Always&quot;}],&quot;restartPolicy&quot;:&quot;Always&quot;,&quot;terminationGracePeriodSeconds&quot;:30,&quot;dnsPolicy&quot;:&quot;ClusterFirst&quot;,&quot;serviceAccountName&quot;:&quot;default&quot;,&quot;serviceAccount&quot;:&quot;default&quot;,&quot;nodeName&quot;:&quot;10.240.0.4&quot;,&quot;securityContext&quot;:{}},&quot;status&quot;:{&quot;phase&quot;:&quot;Pending&quot;}}}<br />
{&quot;type&quot;:&quot;MODIFIED&quot;,&quot;object&quot;:{&quot;kind&quot;:&quot;Pod&quot;,&quot;apiVersion&quot;:&quot;v1&quot;,&quot;metadata&quot;:{&quot;name&quot;:&quot;nginx-app-o0kvl&quot;,&quot;generateName&quot;:&quot;nginx-app-&quot;,&quot;namespace&quot;:&quot;default&quot;,&quot;selfLink&quot;:&quot;/api/v1/namespaces/default/pods/nginx-app-o0kvl&quot;,&quot;uid&quot;:&quot;090cc0c8-ea84-11e5-8c79-42010af00003&quot;,&quot;resourceVersion&quot;:&quot;228088&quot;,&quot;creationTimestamp&quot;:&quot;2016-03-15T08:00:51Z&quot;,&quot;labels&quot;:{&quot;run&quot;:&quot;nginx-app&quot;},&quot;annotations&quot;:{&quot;kubernetes.io/created-by&quot;:&quot;{\&quot;kind\&quot;:\&quot;SerializedReference\&quot;,\&quot;apiVersion\&quot;:\&quot;v1\&quot;,\&quot;reference\&quot;:{\&quot;kind\&quot;:\&quot;ReplicationController\&quot;,\&quot;namespace\&quot;:\&quot;default\&quot;,\&quot;name\&quot;:\&quot;nginx-app\&quot;,\&quot;uid\&quot;:\&quot;090bfb57-ea84-11e5-8c79-42010af00003\&quot;,\&quot;apiVersion\&quot;:\&quot;v1\&quot;,\&quot;resourceVersion\&quot;:\&quot;228081\&quot;}}\n&quot;}},&quot;spec&quot;:{&quot;volumes&quot;:[{&quot;name&quot;:&quot;default-token-wpfjn&quot;,&quot;secret&quot;:{&quot;secretName&quot;:&quot;default-token-wpfjn&quot;}}],&quot;containers&quot;:[{&quot;name&quot;:&quot;nginx-app&quot;,&quot;image&quot;:&quot;nginx&quot;,&quot;ports&quot;:[{&quot;containerPort&quot;:80,&quot;protocol&quot;:&quot;TCP&quot;}],&quot;resources&quot;:{},&quot;volumeMounts&quot;:[{&quot;name&quot;:&quot;default-token-wpfjn&quot;,&quot;readOnly&quot;:true,&quot;mountPath&quot;:&quot;/var/run/secrets/kubernetes.io/serviceaccount&quot;}],&quot;terminationMessagePath&quot;:&quot;/dev/termination-log&quot;,&quot;imagePullPolicy&quot;:&quot;Always&quot;}],&quot;restartPolicy&quot;:&quot;Always&quot;,&quot;terminationGracePeriodSeconds&quot;:30,&quot;dnsPolicy&quot;:&quot;ClusterFirst&quot;,&quot;serviceAccountName&quot;:&quot;default&quot;,&quot;serviceAccount&quot;:&quot;default&quot;,&quot;nodeName&quot;:&quot;10.240.0.4&quot;,&quot;securityContext&quot;:{}},&quot;status&quot;:{&quot;phase&quot;:&quot;Pending&quot;,&quot;conditions&quot;:[{&quot;type&quot;:&quot;Ready&quot;,&quot;status&quot;:&quot;False&quot;,&quot;lastProbeTime&quot;:null,&quot;lastTransitionTime&quot;:&quot;2016-03-15T08:00:51Z&quot;,&quot;reason&quot;:&quot;ContainersNotReady&quot;,&quot;message&quot;:&quot;containers with unready status: [nginx-app]&quot;}],&quot;hostIP&quot;:&quot;10.240.0.4&quot;,&quot;startTime&quot;:&quot;2016-03-15T08:00:51Z&quot;,&quot;containerStatuses&quot;:[{&quot;name&quot;:&quot;nginx-app&quot;,&quot;state&quot;:{&quot;waiting&quot;:{&quot;reason&quot;:&quot;ContainerCreating&quot;,&quot;message&quot;:&quot;Image: nginx is ready, container is creating&quot;}},&quot;lastState&quot;:{},&quot;ready&quot;:false,&quot;restartCount&quot;:0,&quot;image&quot;:&quot;nginx&quot;,&quot;imageID&quot;:&quot;&quot;}]}}}<br />
{&quot;type&quot;:&quot;MODIFIED&quot;,&quot;object&quot;:{&quot;kind&quot;:&quot;Pod&quot;,&quot;apiVersion&quot;:&quot;v1&quot;,&quot;metadata&quot;:{&quot;name&quot;:&quot;nginx-app-o0kvl&quot;,&quot;generateName&quot;:&quot;nginx-app-&quot;,&quot;namespace&quot;:&quot;default&quot;,&quot;selfLink&quot;:&quot;/api/v1/namespaces/default/pods/nginx-app-o0kvl&quot;,&quot;uid&quot;:&quot;090cc0c8-ea84-11e5-8c79-42010af00003&quot;,&quot;resourceVersion&quot;:&quot;228094&quot;,&quot;creationTimestamp&quot;:&quot;2016-03-15T08:00:51Z&quot;,&quot;labels&quot;:{&quot;run&quot;:&quot;nginx-app&quot;},&quot;annotations&quot;:{&quot;kubernetes.io/created-by&quot;:&quot;{\&quot;kind\&quot;:\&quot;SerializedReference\&quot;,\&quot;apiVersion\&quot;:\&quot;v1\&quot;,\&quot;reference\&quot;:{\&quot;kind\&quot;:\&quot;ReplicationController\&quot;,\&quot;namespace\&quot;:\&quot;default\&quot;,\&quot;name\&quot;:\&quot;nginx-app\&quot;,\&quot;uid\&quot;:\&quot;090bfb57-ea84-11e5-8c79-42010af00003\&quot;,\&quot;apiVersion\&quot;:\&quot;v1\&quot;,\&quot;resourceVersion\&quot;:\&quot;228081\&quot;}}\n&quot;}},&quot;spec&quot;:{&quot;volumes&quot;:[{&quot;name&quot;:&quot;default-token-wpfjn&quot;,&quot;secret&quot;:{&quot;secretName&quot;:&quot;default-token-wpfjn&quot;}}],&quot;containers&quot;:[{&quot;name&quot;:&quot;nginx-app&quot;,&quot;image&quot;:&quot;nginx&quot;,&quot;ports&quot;:[{&quot;containerPort&quot;:80,&quot;protocol&quot;:&quot;TCP&quot;}],&quot;resources&quot;:{},&quot;volumeMounts&quot;:[{&quot;name&quot;:&quot;default-token-wpfjn&quot;,&quot;readOnly&quot;:true,&quot;mountPath&quot;:&quot;/var/run/secrets/kubernetes.io/serviceaccount&quot;}],&quot;terminationMessagePath&quot;:&quot;/dev/termination-log&quot;,&quot;imagePullPolicy&quot;:&quot;Always&quot;}],&quot;restartPolicy&quot;:&quot;Always&quot;,&quot;terminationGracePeriodSeconds&quot;:30,&quot;dnsPolicy&quot;:&quot;ClusterFirst&quot;,&quot;serviceAccountName&quot;:&quot;default&quot;,&quot;serviceAccount&quot;:&quot;default&quot;,&quot;nodeName&quot;:&quot;10.240.0.4&quot;,&quot;securityContext&quot;:{}},&quot;status&quot;:{&quot;phase&quot;:&quot;Running&quot;,&quot;conditions&quot;:[{&quot;type&quot;:&quot;Ready&quot;,&quot;status&quot;:&quot;True&quot;,&quot;lastProbeTime&quot;:null,&quot;lastTransitionTime&quot;:&quot;2016-03-15T08:00:52Z&quot;}],&quot;hostIP&quot;:&quot;10.240.0.4&quot;,&quot;podIP&quot;:&quot;172.16.49.2&quot;,&quot;startTime&quot;:&quot;2016-03-15T08:00:51Z&quot;,&quot;containerStatuses&quot;:[{&quot;name&quot;:&quot;nginx-app&quot;,&quot;state&quot;:{&quot;running&quot;:{&quot;startedAt&quot;:&quot;2016-03-15T08:00:52Z&quot;}},&quot;lastState&quot;:{},&quot;ready&quot;:true,&quot;restartCount&quot;:0,&quot;image&quot;:&quot;nginx&quot;,&quot;imageID&quot;:&quot;docker://sha256:af4b3d7d5401624ed3a747dc20f88e2b5e92e0ee9954aab8f1b5724d7edeca5e&quot;,&quot;containerID&quot;:&quot;docker://b97168314ad58404dbce7cb94291db7a976d2cb824b39e5864bf4bdaf27af255&quot;}]}}}<br />
[/code]</p>

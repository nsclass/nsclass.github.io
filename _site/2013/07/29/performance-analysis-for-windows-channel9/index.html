<p>The following URL contains the useful information about using xperf for analysis of Windows application and OS.<br />
http://channel9.msdn.com/Shows/Defrag-Tools/RSS</p>
<p>1. For example the following script shows how to get sampling CPU usage<br />
[code lang="c"]<br />
@echo off<br />
echo Press a key when ready to start...<br />
pause<br />
echo .<br />
echo ...Capturing... </p>
<p>xperf -on PROC_THREAD+LOADER+PROFILE+INTERRUPT+DPC -stackwalk Profile -BufferSize 1024 -MinBuffers 256 -MaxBuffers 256 -MaxFile 256 -FileMode Circular</p>
<p>echo Press a key when you want to stop...<br />
pause </p>
<p>echo .<br />
echo ...Stopping...<br />
xperf -stop -d cpu.etl<br />
[/code]</p>
